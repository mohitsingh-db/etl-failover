{
  "version": 4,
  "terraform_version": "1.9.2",
  "serial": 232,
  "lineage": "77d38e9c-e58a-3b34-e36e-7aa668f182ec",
  "outputs": {
    "eastus2_access_connector_id": {
      "value": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
      "type": "string"
    },
    "eastus2_databricks_workspace_name": {
      "value": "dr_test_eastus2_databricks",
      "type": "string"
    },
    "eastus2_databricks_workspace_url": {
      "value": "adb-919371672615453.13.azuredatabricks.net",
      "type": "string"
    },
    "eastus2_dr_sync_container_name": {
      "value": "dr-sync",
      "type": "string"
    },
    "eastus2_external_container_name": {
      "value": "external",
      "type": "string"
    },
    "eastus2_storage_account_name": {
      "value": "eastus2drstorageacct",
      "type": "string"
    },
    "resource_group_eastus2_name": {
      "value": "dr_test_eastus2",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "terraform_remote_state",
      "name": "westus2",
      "provider": "provider[\"terraform.io/builtin/terraform\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "local",
            "config": {
              "value": {
                "path": "../region_secondary/terraform.tfstate"
              },
              "type": [
                "object",
                {
                  "path": "string"
                }
              ]
            },
            "defaults": null,
            "outputs": {
              "value": {
                "resource_group_westus2_name": "dr_test_westus2",
                "westus2_access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_westus2/providers/Microsoft.Databricks/accessConnectors/dr_test_westus2_connector",
                "westus2_databricks_workspace_name": "dr_test_westus2_databricks",
                "westus2_databricks_workspace_url": "adb-1160940441767788.8.azuredatabricks.net",
                "westus2_dr_sync_container_name": "dr-sync",
                "westus2_external_container_name": "external",
                "westus2_storage_account_name": "westus2drstorageacct"
              },
              "type": [
                "object",
                {
                  "resource_group_westus2_name": "string",
                  "westus2_access_connector_id": "string",
                  "westus2_databricks_workspace_name": "string",
                  "westus2_databricks_workspace_url": "string",
                  "westus2_dr_sync_container_name": "string",
                  "westus2_external_container_name": "string",
                  "westus2_storage_account_name": "string"
                }
              ]
            },
            "workspace": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_databricks_access_connector",
      "name": "dr_test_eastus2_connector",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
            "identity": [
              {
                "identity_ids": [],
                "principal_id": "3b8f2f8c-0ad5-44e2-8218-0b01771d2e3f",
                "tenant_id": "bf465dc7-3bc8-4944-b018-092572b5c20d",
                "type": "SystemAssigned"
              }
            ],
            "location": "eastus2",
            "name": "dr_test_eastus2_connector",
            "resource_group_name": "dr_test_eastus2",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_databricks_workspace",
      "name": "dr_test_eastus2_databricks",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_connector_id": null,
            "custom_parameters": [
              {
                "machine_learning_workspace_id": "",
                "nat_gateway_name": "nat-gateway",
                "no_public_ip": true,
                "private_subnet_name": "",
                "private_subnet_network_security_group_association_id": "",
                "public_ip_name": "nat-gw-public-ip",
                "public_subnet_name": "",
                "public_subnet_network_security_group_association_id": "",
                "storage_account_name": "dbstoragezttwfdoqfykje",
                "storage_account_sku_name": "Standard_GRS",
                "virtual_network_id": "",
                "vnet_address_prefix": "10.139"
              }
            ],
            "customer_managed_key_enabled": false,
            "default_storage_firewall_enabled": null,
            "disk_encryption_set_id": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/workspaces/dr_test_eastus2_databricks",
            "infrastructure_encryption_enabled": false,
            "load_balancer_backend_address_pool_id": "",
            "location": "eastus2",
            "managed_disk_cmk_key_vault_id": "",
            "managed_disk_cmk_key_vault_key_id": "",
            "managed_disk_cmk_rotation_to_latest_version_enabled": false,
            "managed_disk_identity": [],
            "managed_resource_group_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/databricks-rg-dr_test_eastus2",
            "managed_resource_group_name": "databricks-rg-dr_test_eastus2",
            "managed_services_cmk_key_vault_id": "",
            "managed_services_cmk_key_vault_key_id": "",
            "name": "dr_test_eastus2_databricks",
            "network_security_group_rules_required": null,
            "public_network_access_enabled": true,
            "resource_group_name": "dr_test_eastus2",
            "sku": "premium",
            "storage_account_identity": [],
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null,
            "workspace_id": "919371672615453",
            "workspace_url": "adb-919371672615453.13.azuredatabricks.net"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "dr_test_eastus2",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2",
            "location": "eastus2",
            "managed_by": "",
            "name": "dr_test_eastus2",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "eastus2_blob_contributor",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/providers/Microsoft.Authorization/roleAssignments/4755ed41-f55a-ac4e-7aae-9bf18acf5efa",
            "name": "4755ed41-f55a-ac4e-7aae-9bf18acf5efa",
            "principal_id": "3b8f2f8c-0ad5-44e2-8218-0b01771d2e3f",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/providers/Microsoft.Authorization/roleDefinitions/ba92f5b4-2d11-453d-a403-e96b0029c9fe",
            "role_definition_name": "Storage Blob Data Contributor",
            "scope": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "eastus2_queue_contributor",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/providers/Microsoft.Authorization/roleAssignments/5d1ca2aa-2165-4d2e-11e4-8671ce9c2ccd",
            "name": "5d1ca2aa-2165-4d2e-11e4-8671ce9c2ccd",
            "principal_id": "3b8f2f8c-0ad5-44e2-8218-0b01771d2e3f",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/providers/Microsoft.Authorization/roleDefinitions/974c5e8b-45b9-4653-ba55-5f855dd0fb88",
            "role_definition_name": "Storage Queue Data Contributor",
            "scope": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_account",
      "name": "dr_test_eastus2_storage",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 4,
          "attributes": {
            "access_tier": "Hot",
            "account_kind": "StorageV2",
            "account_replication_type": "LRS",
            "account_tier": "Standard",
            "allow_nested_items_to_be_public": true,
            "allowed_copy_scope": "",
            "azure_files_authentication": [],
            "blob_properties": [
              {
                "change_feed_enabled": false,
                "change_feed_retention_in_days": 0,
                "container_delete_retention_policy": [],
                "cors_rule": [],
                "default_service_version": "",
                "delete_retention_policy": [],
                "last_access_time_enabled": false,
                "restore_policy": [],
                "versioning_enabled": false
              }
            ],
            "cross_tenant_replication_enabled": true,
            "custom_domain": [],
            "customer_managed_key": [],
            "default_to_oauth_authentication": false,
            "dns_endpoint_type": "Standard",
            "edge_zone": "",
            "enable_https_traffic_only": true,
            "https_traffic_only_enabled": true,
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "identity": [],
            "immutability_policy": [],
            "infrastructure_encryption_enabled": false,
            "is_hns_enabled": true,
            "large_file_share_enabled": false,
            "local_user_enabled": true,
            "location": "eastus2",
            "min_tls_version": "TLS1_2",
            "name": "eastus2drstorageacct",
            "network_rules": [],
            "nfsv3_enabled": false,
            "primary_access_key": "8zieUii0U35YtEGLJ9hq/4L5frdPFvTLpMlBobTs1SGG7z8V7AtdRwL3BUYP4SJZUKhdpdKCf+2j+AStZo5jBQ==",
            "primary_blob_connection_string": "DefaultEndpointsProtocol=https;BlobEndpoint=https://eastus2drstorageacct.blob.core.windows.net/;AccountName=eastus2drstorageacct;AccountKey=8zieUii0U35YtEGLJ9hq/4L5frdPFvTLpMlBobTs1SGG7z8V7AtdRwL3BUYP4SJZUKhdpdKCf+2j+AStZo5jBQ==",
            "primary_blob_endpoint": "https://eastus2drstorageacct.blob.core.windows.net/",
            "primary_blob_host": "eastus2drstorageacct.blob.core.windows.net",
            "primary_blob_internet_endpoint": "",
            "primary_blob_internet_host": "",
            "primary_blob_microsoft_endpoint": "",
            "primary_blob_microsoft_host": "",
            "primary_connection_string": "DefaultEndpointsProtocol=https;AccountName=eastus2drstorageacct;AccountKey=8zieUii0U35YtEGLJ9hq/4L5frdPFvTLpMlBobTs1SGG7z8V7AtdRwL3BUYP4SJZUKhdpdKCf+2j+AStZo5jBQ==;EndpointSuffix=core.windows.net",
            "primary_dfs_endpoint": "https://eastus2drstorageacct.dfs.core.windows.net/",
            "primary_dfs_host": "eastus2drstorageacct.dfs.core.windows.net",
            "primary_dfs_internet_endpoint": "",
            "primary_dfs_internet_host": "",
            "primary_dfs_microsoft_endpoint": "",
            "primary_dfs_microsoft_host": "",
            "primary_file_endpoint": "https://eastus2drstorageacct.file.core.windows.net/",
            "primary_file_host": "eastus2drstorageacct.file.core.windows.net",
            "primary_file_internet_endpoint": "",
            "primary_file_internet_host": "",
            "primary_file_microsoft_endpoint": "",
            "primary_file_microsoft_host": "",
            "primary_location": "eastus2",
            "primary_queue_endpoint": "https://eastus2drstorageacct.queue.core.windows.net/",
            "primary_queue_host": "eastus2drstorageacct.queue.core.windows.net",
            "primary_queue_microsoft_endpoint": "",
            "primary_queue_microsoft_host": "",
            "primary_table_endpoint": "https://eastus2drstorageacct.table.core.windows.net/",
            "primary_table_host": "eastus2drstorageacct.table.core.windows.net",
            "primary_table_microsoft_endpoint": "",
            "primary_table_microsoft_host": "",
            "primary_web_endpoint": "https://eastus2drstorageacct.z20.web.core.windows.net/",
            "primary_web_host": "eastus2drstorageacct.z20.web.core.windows.net",
            "primary_web_internet_endpoint": "",
            "primary_web_internet_host": "",
            "primary_web_microsoft_endpoint": "",
            "primary_web_microsoft_host": "",
            "public_network_access_enabled": true,
            "queue_encryption_key_type": "Service",
            "queue_properties": [
              {
                "cors_rule": [],
                "hour_metrics": [
                  {
                    "enabled": true,
                    "include_apis": true,
                    "retention_policy_days": 7,
                    "version": "1.0"
                  }
                ],
                "logging": [
                  {
                    "delete": false,
                    "read": false,
                    "retention_policy_days": 0,
                    "version": "1.0",
                    "write": false
                  }
                ],
                "minute_metrics": [
                  {
                    "enabled": false,
                    "include_apis": false,
                    "retention_policy_days": 0,
                    "version": "1.0"
                  }
                ]
              }
            ],
            "resource_group_name": "dr_test_eastus2",
            "routing": [],
            "sas_policy": [],
            "secondary_access_key": "5q44yIJdkiQ6ysyeI6fCmnqUbBGjL33mzBssY7ebec7moqfGJ9yiGnbAsAig9D8uwj1N8oFN1HUB+ASt33Blow==",
            "secondary_blob_connection_string": "",
            "secondary_blob_endpoint": "",
            "secondary_blob_host": "",
            "secondary_blob_internet_endpoint": "",
            "secondary_blob_internet_host": "",
            "secondary_blob_microsoft_endpoint": "",
            "secondary_blob_microsoft_host": "",
            "secondary_connection_string": "DefaultEndpointsProtocol=https;AccountName=eastus2drstorageacct;AccountKey=5q44yIJdkiQ6ysyeI6fCmnqUbBGjL33mzBssY7ebec7moqfGJ9yiGnbAsAig9D8uwj1N8oFN1HUB+ASt33Blow==;EndpointSuffix=core.windows.net",
            "secondary_dfs_endpoint": "",
            "secondary_dfs_host": "",
            "secondary_dfs_internet_endpoint": "",
            "secondary_dfs_internet_host": "",
            "secondary_dfs_microsoft_endpoint": "",
            "secondary_dfs_microsoft_host": "",
            "secondary_file_endpoint": "",
            "secondary_file_host": "",
            "secondary_file_internet_endpoint": "",
            "secondary_file_internet_host": "",
            "secondary_file_microsoft_endpoint": "",
            "secondary_file_microsoft_host": "",
            "secondary_location": "",
            "secondary_queue_endpoint": "",
            "secondary_queue_host": "",
            "secondary_queue_microsoft_endpoint": "",
            "secondary_queue_microsoft_host": "",
            "secondary_table_endpoint": "",
            "secondary_table_host": "",
            "secondary_table_microsoft_endpoint": "",
            "secondary_table_microsoft_host": "",
            "secondary_web_endpoint": "",
            "secondary_web_host": "",
            "secondary_web_internet_endpoint": "",
            "secondary_web_internet_host": "",
            "secondary_web_microsoft_endpoint": "",
            "secondary_web_microsoft_host": "",
            "sftp_enabled": false,
            "share_properties": [
              {
                "cors_rule": [],
                "retention_policy": [
                  {
                    "days": 7
                  }
                ],
                "smb": []
              }
            ],
            "shared_access_key_enabled": true,
            "static_website": [],
            "table_encryption_key_type": "Service",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secondary_access_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_access_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_blob_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_blob_connection_string"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiI0In0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_container",
      "name": "dr_test_eastus2_dr_sync",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "container_access_type": "private",
            "default_encryption_scope": "$account-encryption-key",
            "encryption_scope_override_enabled": true,
            "has_immutability_policy": false,
            "has_legal_hold": false,
            "id": "https://eastus2drstorageacct.blob.core.windows.net/dr-sync",
            "metadata": {},
            "name": "dr-sync",
            "resource_manager_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/blobServices/default/containers/dr-sync",
            "storage_account_name": "eastus2drstorageacct",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_container",
      "name": "dr_test_eastus2_external",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "container_access_type": "private",
            "default_encryption_scope": "$account-encryption-key",
            "encryption_scope_override_enabled": true,
            "has_immutability_policy": false,
            "has_legal_hold": false,
            "id": "https://eastus2drstorageacct.blob.core.windows.net/external",
            "metadata": {},
            "name": "external",
            "resource_manager_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/blobServices/default/containers/external",
            "storage_account_name": "eastus2drstorageacct",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_catalog",
      "name": "dr_test_catalog",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "comment": "Test catalog for data organization",
            "connection_name": null,
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog",
            "isolation_mode": "OPEN",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_test_catalog",
            "options": null,
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "provider_name": null,
            "share_name": null,
            "storage_root": "abfss://external@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_cross_westus2_sync_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "Sync location for data storage in westus2",
            "credential_name": "dr_cross_westus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_cross_westus2_sync_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_cross_westus2_sync_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://dr-sync@westus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "data.terraform_remote_state.westus2",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_schema.main",
            "databricks_storage_credential.dr_cross_westus2_storage_credential",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_eastus2_external_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "External location for data storage in eastus2",
            "credential_name": "dr_eastus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_eastus2_external_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_eastus2_external_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://external@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_eastus2_sync_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "Sync location for data storage in eastus2",
            "credential_name": "dr_eastus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_eastus2_sync_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_eastus2_sync_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://dr-sync@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_dr_sync",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "dr_receiver_job",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "531038875641582",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "dr_receiver",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "receiver",
                "name": "operation_type"
              },
              {
                "default": "primary",
                "name": "sync_location_to"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "PAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/dr_sync_job/main",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "receive_data",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#job/531038875641582",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "dr_sender_job",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "735059565952555",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "dr_sender",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "sender",
                "name": "operation_type"
              },
              {
                "default": "secondary",
                "name": "sync_location_to"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "UNPAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/dr_sync_job/main",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "send_data",
                "timeout_seconds": 0,
                "webhook_notifications": [
                  {
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ]
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#job/735059565952555",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "sample_workflow_1",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "1044144050829059",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "sample_workflow_1",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "eastus2drstorageacct",
                "name": "storageaccname"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "UNPAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "true",
                    "task_key": "status"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/bronze",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "adls_to_raw",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "raw_to_stage"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/archive",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "archive",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/file_checker",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "file_checker",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "adls_to_raw"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/silver",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "raw_to_stage",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "archive"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/gold",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "stage_to_main",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [
                  {
                    "left": "{{tasks.file_checker.values.file_check_status}}",
                    "op": "EQUAL_TO",
                    "right": "true"
                  }
                ],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "file_checker"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "status",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#job/1044144050829059",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "workflow",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "409867233490586",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "sample_workflow_2",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "UNPAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "TransformToSilver"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/AggregateToGold",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "AggregateToGold",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/GenerateRawData",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "GenerateRawData",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "GenerateRawData"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/TransformToSilver",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "TransformToSilver",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#job/409867233490586",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_notebook.aggregate_to_gold",
            "databricks_notebook.generate_raw_data",
            "databricks_notebook.transform_to_silver"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_metastore",
      "name": "dr_eastus2_metastore",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].account",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cloud": "azure",
            "created_at": 1725194708083,
            "created_by": "mohit.singh@databricks.com",
            "default_data_access_config_id": null,
            "delta_sharing_organization_name": null,
            "delta_sharing_recipient_token_lifetime_in_seconds": 0,
            "delta_sharing_scope": "INTERNAL",
            "force_destroy": null,
            "global_metastore_id": "azure:eastus2:8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_eastus2_metastore",
            "owner": "mohit.singh@databricks.com",
            "region": "eastus2",
            "storage_root": null,
            "storage_root_credential_id": null,
            "updated_at": 1725194708083,
            "updated_by": "mohit.singh@databricks.com"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_metastore_assignment",
      "name": "dr_eastus2_metastore_assignment",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "default_catalog_name": "main",
            "id": "919371672615453|8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "workspace_id": 919371672615453
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_metastore.dr_eastus2_metastore"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "aggregate_to_gold",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBSZWFkIGZyb20gc2lsdmVyIHRhYmxlCmRmX3NpbHZlciA9IHNwYXJrLnRhYmxlKCJkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uuc2lsdmVyX2RhdGEiKQoKIyBBZ2dyZWdhdGlvbiAoZS5nLiwgY291bnQgYnkgbmFtZSkKZGZfZ29sZCA9IGRmX3NpbHZlci5ncm91cEJ5KCJuYW1lIikuY291bnQoKQoKIyBXcml0ZSB0byBnb2xkIHRhYmxlCmRmX2dvbGQud3JpdGUubW9kZSgib3ZlcndyaXRlIikuc2F2ZUFzVGFibGUoImRyX3Rlc3RfY2F0YWxvZy5tYWluLmdvbGRfZGF0YSIpCgo=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/AggregateToGold",
            "language": "PYTHON",
            "md5": "8582c64e84728db1397b06a97ef57031",
            "object_id": 2603385160998887,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/AggregateToGold",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/AggregateToGold"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "archive",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIFBhdGhzIHdoZXJlIHRoZSBmaWxlIGlzIGN1cnJlbnRseSBzdG9yZWQgYW5kIHdoZXJlIGl0IHdpbGwgYmUgYXJjaGl2ZWQKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCgpzb3VyY2VfcGF0aCA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9LmRmcy5jb3JlLndpbmRvd3MubmV0L2RhdGEvaW5nZXN0aW9uLyIKYXJjaGl2ZV9wYXRoID0gZiJhYmZzczovL2V4dGVybmFsQHtzdG9yYWdlYWNjbmFtZX0uZGZzLmNvcmUud2luZG93cy5uZXQvZGF0YS9hcmNoaXZlLyIKCiMgU3BlY2lmeSB0aGUgZmlsZSBuYW1lIChpZiBrbm93bikgb3IgbGlzdCBhbmQgcHJvY2VzcyBmaWxlcyBkeW5hbWljYWxseQojIEV4YW1wbGU6IGZpbGVfbmFtZSA9ICJzYW1wbGVfZmlsZV8yMDI0MDgxM18xNTQ1MzAudHh0IgoKIyBPcHRpb25hbGx5LCBsaXN0IGZpbGVzIGluIHRoZSBzb3VyY2UgcGF0aCAoaWYgeW91IHdhbnQgdG8gbW92ZSBhbGwgZmlsZXMpCmZpbGVzID0gZGJ1dGlscy5mcy5scyhzb3VyY2VfcGF0aCkKCmZvciBmaWxlX2luZm8gaW4gZmlsZXM6CiAgICBmaWxlX25hbWUgPSBmaWxlX2luZm8ubmFtZSAgIyBFeHRyYWN0IHRoZSBmaWxlIG5hbWUKICAgIHNvdXJjZV9maWxlX3BhdGggPSBmIntzb3VyY2VfcGF0aH17ZmlsZV9uYW1lfSIKICAgIGFyY2hpdmVfZmlsZV9wYXRoID0gZiJ7YXJjaGl2ZV9wYXRofXtmaWxlX25hbWV9IgogICAgCiAgICAjIE1vdmUgdGhlIGZpbGUgYnkgY29weWluZyBpdCB0byB0aGUgYXJjaGl2ZSBwYXRoIGFuZCB0aGVuIGRlbGV0aW5nIGl0IGZyb20gdGhlIHNvdXJjZSBwYXRoCiAgICBkYnV0aWxzLmZzLmNwKHNvdXJjZV9maWxlX3BhdGgsIGFyY2hpdmVfZmlsZV9wYXRoKQogICAgZGJ1dGlscy5mcy5ybShzb3VyY2VfZmlsZV9wYXRoKQoKICAgICMgUHJpbnQgY29uZmlybWF0aW9uCiAgICBwcmludChmIkZpbGUgbW92ZWQgZnJvbSB7c291cmNlX2ZpbGVfcGF0aH0gdG8ge2FyY2hpdmVfZmlsZV9wYXRofSIp",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/archive",
            "language": "PYTHON",
            "md5": "37249011925846bd3079befc2673e90f",
            "object_id": 2603385160998873,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/archive",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/archive"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "bronze",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgY3VycmVudF90aW1lc3RhbXAsIGxpdCwgZXhwciwgY29sCgp3b3Jrc3BhY2VfbmFtZSA9ICJlMi1kZW1vLWZpZWxkLWVuZyIgICMgUmVwbGFjZSB3aXRoIHRoZSBhY3R1YWwgd29ya3NwYWNlIG5hbWUKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCgojIFJlYWQgdGhlIGJpbmFyeSBmaWxlcyBmcm9tIGEgZGlyZWN0b3J5CmJpbmFyeV9kZiA9IChzcGFyay5yZWFkLmZvcm1hdCgiYmluYXJ5RmlsZSIpCiAgICAgICAgICAgICAubG9hZChmImFiZnNzOi8vZXh0ZXJuYWxAe3N0b3JhZ2VhY2NuYW1lfS5kZnMuY29yZS53aW5kb3dzLm5ldC9kYXRhL2luZ2VzdGlvbi8iKQoud2l0aENvbHVtbigiZmlsZV9tb2RpZmllZF90aW1lIiwgY29sKCJtb2RpZmljYXRpb25UaW1lIikpLndpdGhDb2x1bW4oImZpbGVfbmFtZSIsIGV4cHIoIl9tZXRhZGF0YS5maWxlX3BhdGgiKSkgICMgQWRqdXN0ZWQgbGluZQogICAgICAgICAgICAgLndpdGhDb2x1bW4oIndvcmtzcGFjZV9uYW1lIiwgbGl0KHdvcmtzcGFjZV9uYW1lKSkpCgojIFNhdmUgdGhlIGJpbmFyeSBkYXRhLCBmaWxlbmFtZSwgbW9kaWZpZWQgdGltZSwgYW5kIHdvcmtzcGFjZSBuYW1lIHRvIGEgRGVsdGEgdGFibGUKYmluYXJ5X2RmLndyaXRlLmZvcm1hdCgiZGVsdGEiKS5tb2RlKCJvdmVyd3JpdGUiKS5zYXZlQXNUYWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIpCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlc3FsIAojIE1BR0lDIHNlbGVjdCAqIGZyb20gZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZQ==",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/bronze",
            "language": "PYTHON",
            "md5": "ba0d0c443e1cfa795c83ad186500799b",
            "object_id": 2603385160998869,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/bronze",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/bronze"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_main",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIE1BR0lDICVydW4gLi91dGlscwoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXJ1biAuL3ZhbGlkYXRvcgoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXJ1biAuL3N5bmNfdG9fcmVnaW9uCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlcnVuIC4vc3luY19pbl9yZWdpb24KCiMgQ09NTUFORCAtLS0tLS0tLS0tCgojIFNldCB1cCB3aWRnZXRzIGZvciBpbnB1dCBwYXJhbWV0ZXJzCmRidXRpbHMud2lkZ2V0cy50ZXh0KCJvcGVyYXRpb25fdHlwZSIsICJzZW5kZXIiKSAgIyBPcGVyYXRpb246ICJzZW5kZXIiIG9yICJyZWNlaXZlciIKZGJ1dGlscy53aWRnZXRzLnRleHQoInN5bmNfbG9jYXRpb25fdG8iLCAic2Vjb25kYXJ5IikgICMgU3luYyBsb2NhdGlvbjogInByaW1hcnkiIG9yICJzZWNvbmRhcnkiCgojIFJldHJpZXZlIHBhcmFtZXRlciB2YWx1ZXMKb3BlcmF0aW9uX3R5cGUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJvcGVyYXRpb25fdHlwZSIpCnN5bmNfbG9jYXRpb25fdG8gPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzeW5jX2xvY2F0aW9uX3RvIikKCiMgQ09NTUFORCAtLS0tLS0tLS0tCgojIEV4cGxhbmF0aW9uIG9mIFBhcmFtZXRlcnM6CiMgLSBvcGVyYXRpb25fdHlwZTogVGhpcyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5vdGVib29rIHdpbGwgYWN0IGFzIGEgc2VuZGVyIG9yIHJlY2VpdmVyLgojICAgICAgICAgICAgICAgICAgICJzZW5kZXIiIHdpbGwgY2FsbCB0aGUgc3luY190b19yZWdpb24gZnVuY3Rpb24gdG8gc2VuZCBkYXRhIGZyb20gb25lIHJlZ2lvbiB0byBhbm90aGVyLgojICAgICAgICAgICAgICAgICAgICJyZWNlaXZlciIgd2lsbCBjYWxsIHRoZSBzeW5jX2luX3JlZ2lvbiBmdW5jdGlvbiB0byBzeW5jIGRhdGEgaW50byB0aGUgdGFyZ2V0IHJlZ2lvbi4KIyAtIHN5bmNfbG9jYXRpb25fdG86IFRoaXMgZGV0ZXJtaW5lcyB3aGljaCBzeW5jIGxvY2F0aW9uIChwcmltYXJ5IG9yIHNlY29uZGFyeSkgdG8gdXNlIGZvciByZWFkaW5nIGFuZCB3cml0aW5nIHRoZSBkYXRhLgoKTE9HX0xFVkVMID0gImRlYnVnIiAgIyBEZWZhdWx0IGxvZyBsZXZlbAoKIyBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGUKY29uZmlnID0gbG9hZF9jb25maWcoIi4vY29uZmlnL2NvbmZpZ19kZXYuanNvbiIpCnZhbGlkYXRlZF9jb25maWcgPSB2YWxpZGF0ZV9jb25maWcoY29uZmlnKQoKCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBCYXNlZCBvbiB0aGUgb3BlcmF0aW9uIHR5cGUsIGVpdGhlciAic3luY190b19yZWdpb24iIG9yICJzeW5jX2luX3JlZ2lvbiIgd2lsbCBiZSBleGVjdXRlZC4KCmlmIG9wZXJhdGlvbl90eXBlID09ICJzZW5kZXIiOgogICAgIyBTZW5kZXI6IFN5bmMgdG8gcmVnaW9uIChkZWVwIGNsb25lIGZyb20gb25lIGxvY2F0aW9uIHRvIGFub3RoZXIpCiAgICAjIFZhbGlkYXRlIHdvcmtmbG93cyBhbmQgdGFibGVzIGJlZm9yZSBzeW5jaW5nCiAgICB2YWxpZGF0ZV93b3JrZmxvd19hbmRfdGFibGVzKHZhbGlkYXRlZF9jb25maWcsIHN5bmNfbG9jYXRpb25fdG8pICAgIAogICAgc3luY190b19yZWdpb24oCiAgICAgICAgdmFsaWRhdGVkX2NvbmZpZywgICAgICAgICMgVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgY29udGFpbmluZyB3b3Jrc3BhY2UgYW5kIHN5bmMgZGV0YWlscwogICAgICAgIHN5bmNfbG9jYXRpb25fdG89c3luY19sb2NhdGlvbl90bywgICAgICAjIFVzZSB0aGUgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHN5bmMgbG9jYXRpb24KICAgICAgICBtYXhfd29ya2Vycz0xMCAgICAgICAgICAgIyBVc2UgdXAgdG8gMTAgdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZyBvZiB3b3JrZmxvd3MKICAgICkKZWxpZiBvcGVyYXRpb25fdHlwZSA9PSAicmVjZWl2ZXIiOgogICAgIyBSZWNlaXZlcjogU3luYyBkYXRhIGZyb20gdGhlIGV4dGVybmFsIGxvY2F0aW9uIGludG8gVW5pdHkgQ2F0YWxvZwogICAgc3luY19pbl9yZWdpb24oCiAgICAgICAgdmFsaWRhdGVkX2NvbmZpZywgICAgICAgICAgICAgIyBUaGUgdmFsaWRhdGVkIGNvbmZpZ3VyYXRpb24gZGljdGlvbmFyeSBjb250YWluaW5nIHdvcmtzcGFjZSBhbmQgc3luYyBkZXRhaWxzCiAgICAgICAgc3luY19sb2NhdGlvbl9mcm9tPXN5bmNfbG9jYXRpb25fdG8sICAjIFVzZSB0aGUgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHN5bmMgbG9jYXRpb24gdG8gcmVhZCBmcm9tCiAgICAgICAgbWF4X3dvcmtlcnM9MTAgICAgICAgICAgICAgICAgIyBVc2UgdXAgdG8gMTAgdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZwogICAgKQplbHNlOgogICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJJbnZhbGlkIG9wZXJhdGlvbl90eXBlOiB7b3BlcmF0aW9uX3R5cGV9LiBNdXN0IGJlIGVpdGhlciAnc2VuZGVyJyBvciAncmVjZWl2ZXInLiIpCiAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCBvcGVyYXRpb25fdHlwZToge29wZXJhdGlvbl90eXBlfS4gTXVzdCBiZSBlaXRoZXIgJ3NlbmRlcicgb3IgJ3JlY2VpdmVyJy4iKQoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCmRpc3BsYXkoc3BhcmsucmVhZC5mb3JtYXQoImRlbHRhIikubG9hZCgiYWJmc3M6Ly9kci1zeW5jQHdlc3R1czJkcnN0b3JhZ2VhY2N0LmRmcy5jb3JlLndpbmRvd3MubmV0L21ldGEvc3luY19tZXRhZGF0YV90YWJsZSIpKQ==",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/main",
            "language": "PYTHON",
            "md5": "f853af4d3b15ed7d2846143bafd6e86a",
            "object_id": 2603385160998889,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/main",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/main"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_report",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsIGltcG9ydCBTcGFya1Nlc3Npb24KZnJvbSBweXNwYXJrLnNxbC5mdW5jdGlvbnMgaW1wb3J0IGV4cHIKCiMgRGVmaW5lIHZhcmlhYmxlcwp0aW1lem9uZSA9ICdBbWVyaWNhL0NoaWNhZ28nCnRhYmxlX2xvY2F0aW9uID0gJ2FiZnNzOi8vZHItc3luY0B3ZXN0dXMyZHJzdG9yYWdlYWNjdC5kZnMuY29yZS53aW5kb3dzLm5ldC9tZXRhL3N5bmNfbWV0YWRhdGFfdGFibGUnCgojIFNRTCBxdWVyeSB3cmFwcGVkIGluIFB5U3BhcmsKcXVlcnkgPSBmIiIiClNFTEVDVCAKICAgIHQzLndvcmtzcGFjZV9uYW1lLCAKICAgIHQzLmdyb3VwX25hbWUsIAogICAgdDMud29ya2Zsb3dfbmFtZSwgCiAgICB0My5zb3VyY2VfdGFibGUgQVMgdGFibGVfbmFtZSwgIC0tIFVzZSB0aGUgZXhwbG9kZWQgdGFibGUgbmFtZQogICAgdDMubGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lLAogICAgdDMuc3luY19yZWFzb24sCiAgICB0My5zeW5jX3RpbWVfdG9fcmVnaW9uLAogICAgdDMuc3luY190aW1lX2luX3JlZ2lvbiwKICAgIHQxLnN5bmNfY29tbWl0X3ZlcnNpb24gQVMgc291cmNlX3N5bmNfY29tbWl0X3ZlcnNpb24sICAtLSBTb3VyY2Ugb3BlcmF0aW9uIG1ldHJpY3MKICAgIHQxLnNvdXJjZV90YWJsZV9zaXplIEFTIHNvdXJjZV90YWJsZV9zaXplLAogICAgdDIuc3luY19jb21taXRfdmVyc2lvbiBBUyB0YXJnZXRfc3luY19jb21taXRfdmVyc2lvbiwgIC0tIFRhcmdldCBvcGVyYXRpb24gbWV0cmljcwogICAgdDIuc291cmNlX3RhYmxlX3NpemUgQVMgdGFyZ2V0X3RhYmxlX3NpemUsCiAgICAKICAgIC0tIEFkanVzdCBob3VyIGNhbGN1bGF0aW9uIHRvIHVzZSB0aGUgc2FtZSB0aW1lem9uZSBmb3IgYm90aCB0aW1lc3RhbXBzCiAgICByb3VuZCgKICAgICh1bml4X3RpbWVzdGFtcChmcm9tX3V0Y190aW1lc3RhbXAoY3VycmVudF90aW1lc3RhbXAoKSwgJ3t0aW1lem9uZX0nKSkgLSB1bml4X3RpbWVzdGFtcCh0My5sYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUpKSAvIDM2MDAsIDIKICAgICkgQVMgaG91cnNfc2luY2VfbGFzdF9zeW5jLAoKICAgIC0tIFN5bmMgc3RhdHVzIGxvZ2ljIGJhc2VkIG9uIHdvcmtmbG93X25hbWUgcHJlc2VuY2UgYW5kIG1ldHJpYyBjb21wYXJpc29uCiAgICBDQVNFIAogICAgICAgIFdIRU4gdDMud29ya2Zsb3dfbmFtZSBJUyBOVUxMIE9SIHQzLndvcmtmbG93X25hbWUgPSAnJyBUSEVOIAogICAgICAgICAgICBDQVNFIAogICAgICAgICAgICAgICAgV0hFTiB0MS5zb3VyY2VfdGFibGVfc2l6ZSA9IHQyLnNvdXJjZV90YWJsZV9zaXplIFRIRU4gJ1N5bmNlZCcKICAgICAgICAgICAgICAgIEVMU0UgJ05vdCBTeW5jZWQnCiAgICAgICAgICAgIEVORAogICAgICAgIEVMU0UKICAgICAgICAgICAgQ0FTRQogICAgICAgICAgICAgICAgV0hFTiB0MS5zeW5jX2NvbW1pdF92ZXJzaW9uID0gdDIuc3luY19jb21taXRfdmVyc2lvbiBBTkQgdDEuc291cmNlX3RhYmxlX3NpemUgPSB0Mi5zb3VyY2VfdGFibGVfc2l6ZSBUSEVOICdTeW5jZWQnCiAgICAgICAgICAgICAgICBFTFNFICdOb3QgU3luY2VkJwogICAgICAgICAgICBFTkQKICAgIEVORCBBUyBzeW5jX3N0YXR1cwoKRlJPTQogICAgLS0gRmlyc3QgdGFibGUgZm9yIHNvdXJjZSBvcGVyYXRpb24gbWV0cmljcwogICAgKAogICAgICAgIFNFTEVDVCAKICAgICAgICAgICAga2V5IEFTIHRhYmxlX25hbWUsCiAgICAgICAgICAgIG1ldHJpY1snbWV0cmljcyddWydzeW5jX2NvbW1pdF92ZXJzaW9uJ10gQVMgc3luY19jb21taXRfdmVyc2lvbiwKICAgICAgICAgICAgbWV0cmljWydtZXRyaWNzJ11bJ3NvdXJjZV90YWJsZV9zaXplJ10gQVMgc291cmNlX3RhYmxlX3NpemUKICAgICAgICBGUk9NIAogICAgICAgICgKICAgICAgICAgICAgU0VMRUNUIGV4cGxvZGUoZnJvbV9qc29uKHNvdXJjZV9vcGVyYXRpb25fbWV0cmljcywgJ2FycmF5PG1hcDxzdHJpbmcsIHN0cnVjdDxtZXRyaWNzOm1hcDxzdHJpbmcsIGxvbmc+Pj4gPicpKSBBUyBtZXRyaWNzX2VudHJ5IAogICAgICAgICAgICBGUk9NIGRlbHRhLmB7dGFibGVfbG9jYXRpb259YAogICAgICAgICAgICBXSEVSRSBzb3VyY2Vfb3BlcmF0aW9uX21ldHJpY3MgSVMgTk9UIE5VTEwKICAgICAgICApIHRhYgogICAgICAgIExBVEVSQUwgVklFVyBleHBsb2RlKG1ldHJpY3NfZW50cnkpIEFTIGtleSwgbWV0cmljCiAgICApIHQxCi0tIEpvaW4gd2l0aCB0aGUgc2Vjb25kIHRhYmxlIGZvciB0YXJnZXQgb3BlcmF0aW9uIG1ldHJpY3MKTEVGVCBKT0lOIAogICAgKAogICAgICAgIFNFTEVDVCAKICAgICAgICAgICAga2V5IEFTIHRhYmxlX25hbWUsCiAgICAgICAgICAgIENBU1QobWV0cmljWydtZXRyaWNzJ11bJ3N5bmNfY29tbWl0X3ZlcnNpb24nXSBBUyBsb25nKSBBUyBzeW5jX2NvbW1pdF92ZXJzaW9uLAogICAgICAgICAgICBDQVNUKG1ldHJpY1snbWV0cmljcyddWydzb3VyY2VfdGFibGVfc2l6ZSddIEFTIGxvbmcpIEFTIHNvdXJjZV90YWJsZV9zaXplCiAgICAgICAgRlJPTSAKICAgICAgICAoCiAgICAgICAgICAgIFNFTEVDVCBleHBsb2RlKGZyb21fanNvbih0YXJnZXRfb3BlcmF0aW9uX21ldHJpY3MsICdhcnJheTxtYXA8c3RyaW5nLCBzdHJ1Y3Q8bWV0cmljczptYXA8c3RyaW5nLCBzdHJpbmc+Pj4gPicpKSBBUyBtZXRyaWNzX2VudHJ5IAogICAgICAgICAgICBGUk9NIGRlbHRhLmB7dGFibGVfbG9jYXRpb259YAogICAgICAgICAgICBXSEVSRSB0YXJnZXRfb3BlcmF0aW9uX21ldHJpY3MgSVMgTk9UIE5VTEwKICAgICAgICApIHRhYgogICAgICAgIExBVEVSQUwgVklFVyBleHBsb2RlKG1ldHJpY3NfZW50cnkpIEFTIGtleSwgbWV0cmljCiAgICApIHQyCk9OIHQxLnRhYmxlX25hbWUgPSB0Mi50YWJsZV9uYW1lCi0tIEpvaW4gd2l0aCB0aGUgdGhpcmQgdGFibGUgZm9yIGdlbmVyYWwgaW5mbwpMRUZUIEpPSU4gCiAgICAoCiAgICAgICAgU0VMRUNUIAogICAgICAgICAgICB3b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgIGdyb3VwX25hbWUsIAogICAgICAgICAgICB3b3JrZmxvd19uYW1lLCAKICAgICAgICAgICAgZXhwbG9kZSh0YWJsZXMpIEFTIHNvdXJjZV90YWJsZSwgIC0tIEV4cGxvZGUgdGhlIHRhYmxlcyBhcnJheQogICAgICAgICAgICBmcm9tX3V0Y190aW1lc3RhbXAoZnJvbV91bml4dGltZShsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUgLyAxMDAwKSwgJ3t0aW1lem9uZX0nKSBBUyBsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUsCiAgICAgICAgICAgIHN5bmNfcmVhc29uLAogICAgICAgICAgICBmcm9tX3V0Y190aW1lc3RhbXAoZnJvbV91bml4dGltZShzeW5jX3RpbWVfdG9fcmVnaW9uIC8gMTAwMCksICd7dGltZXpvbmV9JykgQVMgc3luY190aW1lX3RvX3JlZ2lvbiwKICAgICAgICAgICAgZnJvbV91dGNfdGltZXN0YW1wKGZyb21fdW5peHRpbWUoc3luY190aW1lX2luX3JlZ2lvbiAvIDEwMDApLCAne3RpbWV6b25lfScpIEFTIHN5bmNfdGltZV9pbl9yZWdpb24KICAgICAgICBGUk9NIGRlbHRhLmB7dGFibGVfbG9jYXRpb259YAogICAgKSB0MwpPTiB0MS50YWJsZV9uYW1lID0gdDMuc291cmNlX3RhYmxlCiIiIgoKIyBSdW4gdGhlIHF1ZXJ5IHVzaW5nIFB5U3BhcmsKZGlzcGxheShzcGFyay5zcWwocXVlcnkpKQo=",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/report",
            "language": "PYTHON",
            "md5": "2e5a9277b0552fa7fbea6514a501214f",
            "object_id": 3287250089789875,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/report",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/report"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_sync_in_region",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgdGltZQpmcm9tIHB5c3Bhcmsuc3FsIGltcG9ydCBmdW5jdGlvbnMgYXMgRgoKZGVmIHN5bmNfaW5fcmVnaW9uKHZhbGlkYXRlZF9jb25maWc6IGRpY3QsIHN5bmNfbG9jYXRpb25fZnJvbTogc3RyID0gInNlY29uZGFyeSIsIG1heF93b3JrZXJzOiBpbnQgPSAxMCk6CiAgICAiIiIKICAgIFN5bmNzIERlbHRhIHRhYmxlcyBmcm9tIGFuIGV4dGVybmFsIGxvY2F0aW9uIChhYmZzcyBwYXRoKSBpbnRvIFVuaXR5IENhdGFsb2cgYmFzZWQgb24gdGhlIHN5bmMgdGltZXMuCgogICAgQXJnczoKICAgIC0gdmFsaWRhdGVkX2NvbmZpZyAoZGljdCk6IFRoZSB2YWxpZGF0ZWQgY29uZmlndXJhdGlvbiBjb250YWluaW5nIHdvcmtzcGFjZSBhbmQgc3luYyBkZXRhaWxzLgogICAgLSBzeW5jX2xvY2F0aW9uX2Zyb20gKHN0cik6IFNwZWNpZnkgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHRvIGNob29zZSB0aGUgc3luYyBsb2NhdGlvbiB0byByZWFkIGZyb20uCiAgICAtIG1heF93b3JrZXJzIChpbnQpOiBUaGUgbnVtYmVyIG9mIHdvcmtlcnMgZm9yIG11bHRpdGhyZWFkaW5nLgoKICAgIFJldHVybnM6CiAgICAtIE5vbmUKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgU3RlcCAxOiBJdGVyYXRlIHRocm91Z2ggdGhlIHdvcmtzcGFjZXMgaW4gdGhlIHZhbGlkYXRlZCBjb25maWcKICAgICAgICBmb3Igd29ya3NwYWNlIGluIHZhbGlkYXRlZF9jb25maWdbJ3dvcmtzcGFjZXMnXToKICAgICAgICAgICAgd29ya3NwYWNlX25hbWUgPSB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ10KCiAgICAgICAgICAgICMgQ2hvb3NlIHRoZSBtZXRhZGF0YSB0YWJsZSBwYXRoIGJhc2VkIG9uIHRoZSBzeW5jX2xvY2F0aW9uX2Zyb20KICAgICAgICAgICAgc3luY19sb2NhdGlvbiA9IHdvcmtzcGFjZVtmInN5bmNfbG9jYXRpb25fe3N5bmNfbG9jYXRpb25fZnJvbX0iXQogICAgICAgICAgICBtZXRhZGF0YV90YWJsZV9wYXRoID0gZiJ7c3luY19sb2NhdGlvbn0vbWV0YS9zeW5jX21ldGFkYXRhX3RhYmxlIgoKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCBmIlN0YXJ0aW5nIHN5bmMgZm9yIHdvcmtzcGFjZToge3dvcmtzcGFjZV9uYW1lfSB1c2luZyB7c3luY19sb2NhdGlvbl9mcm9tfSBzeW5jIGxvY2F0aW9uLiIpCgogICAgICAgICAgICAjIFN0ZXAgMjogTG9hZCB0aGUgbWV0YWRhdGEgdGFibGUgaW50byBhIFNwYXJrIERhdGFGcmFtZQogICAgICAgICAgICBtZXRhZGF0YV9kZiA9IHNwYXJrLnJlYWQuZm9ybWF0KCJkZWx0YSIpLmxvYWQobWV0YWRhdGFfdGFibGVfcGF0aCkKCiAgICAgICAgICAgICMgU3RlcCAzOiBGaWx0ZXIgcmVjb3JkcyB3aGVyZSBzeW5jX3RpbWVfdG9fcmVnaW9uID49IHN5bmNfdGltZV9pbl9yZWdpb24gb3Igc3luY190aW1lX2luX3JlZ2lvbiBpcyBudWxsIChmaXJzdC10aW1lIHN5bmMpCiAgICAgICAgICAgIGZpbHRlcmVkX21ldGFkYXRhX2RmID0gbWV0YWRhdGFfZGYuZmlsdGVyKAogICAgICAgICAgICAgICAgKG1ldGFkYXRhX2RmWyJzeW5jX3RpbWVfdG9fcmVnaW9uIl0uaXNOb3ROdWxsKCkpICYKICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YV9kZlsic3luY190aW1lX2luX3JlZ2lvbiJdLmlzTnVsbCgpIHwgICMgSW5jbHVkZSBmaXJzdC10aW1lIHN5bmNzIHdoZXJlIHN5bmNfdGltZV9pbl9yZWdpb24gaXMgbnVsbAogICAgICAgICAgICAgICAgICAgIChtZXRhZGF0YV9kZlsic3luY190aW1lX3RvX3JlZ2lvbiJdID49IG1ldGFkYXRhX2RmWyJzeW5jX3RpbWVfaW5fcmVnaW9uIl0pICAjIE9yIHdoZXJlIHN5bmNfdGltZV90b19yZWdpb24gPj0gc3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBmaWx0ZXJlZF9tZXRhZGF0YV9kZi5jb3VudCgpID09IDA6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsICJObyByZWNvcmRzIHRvIHN5bmMuIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIFN0ZXAgNDogQ2FwdHVyZSB0aGUgY3VycmVudCB0aW1lc3RhbXAgZm9yIHN5bmNfdGltZV9pbl9yZWdpb24KICAgICAgICAgICAgc3luY190aW1lX2luX3JlZ2lvbiA9IGludCh0aW1lLnRpbWUoKSAqIDEwMDApCgogICAgICAgICAgICAjIFN0ZXAgNTogQ29sbGVjdCBmaWx0ZXJlZCByb3dzIGFuZCBzeW5jIHRoZW0gaW4gcGFyYWxsZWwKICAgICAgICAgICAgcmVjb3Jkc190b19zeW5jID0gZmlsdGVyZWRfbWV0YWRhdGFfZGYuY29sbGVjdCgpICAjIENvbGxlY3QgdGhlIGZpbHRlcmVkIHJlY29yZHMgdG8gc3luYwoKICAgICAgICAgICAgd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9bWF4X3dvcmtlcnMpIGFzIGV4ZWN1dG9yOgogICAgICAgICAgICAgICAgZnV0dXJlcyA9IFtdCgogICAgICAgICAgICAgICAgZm9yIHJvdyBpbiByZWNvcmRzX3RvX3N5bmM6CiAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlX25hbWUgPSByb3dbIndvcmtzcGFjZV9uYW1lIl0KICAgICAgICAgICAgICAgICAgICBncm91cF9uYW1lID0gcm93WyJncm91cF9uYW1lIl0KICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgInRhYmxlcyI6IHJvd1sidGFibGVzIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJzeW5jX3RpbWVfdG9fcmVnaW9uIjogcm93WyJzeW5jX3RpbWVfdG9fcmVnaW9uIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJzeW5jX3RpbWVfaW5fcmVnaW9uIjogcm93WyJzeW5jX3RpbWVfaW5fcmVnaW9uIl0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIyBTdWJtaXQgZWFjaCBncm91cCB0byBhIHdvcmtlciB0aHJlYWQKICAgICAgICAgICAgICAgICAgICBmdXR1cmUgPSBleGVjdXRvci5zdWJtaXQoCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3Nfc3luY190b19yZWdpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZV9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBncm91cF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgc3luY19sb2NhdGlvbiwgCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhX3RhYmxlX3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb24KICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZnV0dXJlcy5hcHBlbmQoZnV0dXJlKQoKICAgICAgICAgICAgICAgICMgV2FpdCBmb3IgYWxsIHRocmVhZHMgdG8gY29tcGxldGUKICAgICAgICAgICAgICAgIGZvciBmdXR1cmUgaW4gYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgZnV0dXJlLnJlc3VsdCgpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkVycm9yIGR1cmluZyBzeW5jOiB7ZX0iKQoKICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsICJTeW5jIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIikKICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsIGYiRmFpbGVkIHRvIHN5bmMgdGFibGVzOiB7ZX0iKQoKCmRlZiBwcm9jZXNzX3N5bmNfdG9fcmVnaW9uKHdvcmtzcGFjZV9uYW1lOiBzdHIsIGdyb3VwX25hbWU6IHN0ciwgbWV0YWRhdGE6IGRpY3QsIHN5bmNfbG9jYXRpb246IHN0ciwgbWV0YWRhdGFfdGFibGVfcGF0aDogc3RyLCBzeW5jX3RpbWVfaW5fcmVnaW9uOiBzdHIpOgogICAgIiIiCiAgICBQcm9jZXNzZXMgdGhlIHN5bmMgZm9yIGVhY2ggZ3JvdXAsIHJlYWRpbmcgZnJvbSBhYmZzcyBsb2NhdGlvbiBhbmQgZGVlcCBjbG9uaW5nIGludG8gVW5pdHkgQ2F0YWxvZy4KCiAgICBBcmdzOgogICAgLSB3b3Jrc3BhY2VfbmFtZSAoc3RyKTogVGhlIHdvcmtzcGFjZSBuYW1lLgogICAgLSBncm91cF9uYW1lIChzdHIpOiBUaGUgZ3JvdXAgbmFtZS4KICAgIC0gbWV0YWRhdGEgKGRpY3QpOiBUaGUgbWV0YWRhdGEgcmVjb3JkIGZvciB0aGUgZ3JvdXAuCiAgICAtIHN5bmNfbG9jYXRpb24gKHN0cik6IFRoZSBzeW5jIGxvY2F0aW9uIChlLmcuLCBzZWNvbmRhcnkpLgogICAgLSBtZXRhZGF0YV90YWJsZV9wYXRoIChzdHIpOiBUaGUgcGF0aCB0byB0aGUgbWV0YWRhdGEgdGFibGUgZm9yIHVwZGF0aW5nLgogICAgLSBzeW5jX3RpbWVfaW5fcmVnaW9uIChzdHIpOiBUaGUgdGltZXN0YW1wIHRvIHVwZGF0ZSBzeW5jX3RpbWVfaW5fcmVnaW9uLgoKICAgIFJldHVybnM6CiAgICAtIE5vbmUKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgU3RlcCAxOiBFeHRyYWN0IHRhYmxlcyBmcm9tIHRoZSBtZXRhZGF0YQogICAgICAgIHRhYmxlcyA9IG1ldGFkYXRhWyJ0YWJsZXMiXQogICAgICAgIHN5bmNfdGltZV90b19yZWdpb24gPSBtZXRhZGF0YS5nZXQoInN5bmNfdGltZV90b19yZWdpb24iKSAgIyBHZXQgdGhlIHN5bmNfdGltZV90b19yZWdpb24gZm9yIGNvbXBhcmlzb24KCiAgICAgICAgaWYgbm90IHN5bmNfdGltZV90b19yZWdpb246CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgZiJObyBzeW5jX3RpbWVfdG9fcmVnaW9uIGZvdW5kIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfS4gU2tpcHBpbmcuIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdGFyZ2V0X29wZXJhdGlvbl9tZXRyaWNzID0gW10KICAgICAgICBmb3IgdGFibGUgaW4gdGFibGVzOgogICAgICAgICAgICB0YWJsZV9tZXRyaWNzID0ge30KICAgICAgICAgICAgdGFibGVfbWV0cmljc1t0YWJsZV0gPSB7Im1ldHJpY3MiOiB7fX0KICAgICAgICAgICAgIyBQYXJzZSB0aGUgY2F0YWxvZywgc2NoZW1hLCBhbmQgdGFibGUgbmFtZSBmcm9tIHRoZSB0YWJsZSBzdHJpbmcKICAgICAgICAgICAgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lID0gdGFibGUuc3BsaXQoIi4iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBTdGVwIDI6IENyZWF0ZSB0aGUgYWJmc3MgcGF0aCBiYXNlZCBvbiB0aGUgZXh0ZXJuYWwgbG9jYXRpb24gKHN5bmNfbG9jYXRpb24pCiAgICAgICAgICAgIGFiZnNzX3BhdGggPSBmIntzeW5jX2xvY2F0aW9ufS97Y2F0YWxvZ30ve3NjaGVtYX0ve3RhYmxlX25hbWV9IgoKICAgICAgICAgICAgIyBTdGVwIDM6IEdldCB0aGUgaGlnaGVzdCB2ZXJzaW9uIGJlZm9yZSBzeW5jX3RpbWVfdG9fcmVnaW9uIHVzaW5nICdERVNDUklCRSBISVNUT1JZJwogICAgICAgICAgICBoaXN0b3J5X3F1ZXJ5ID0gZiJERVNDUklCRSBISVNUT1JZIGRlbHRhLmB7YWJmc3NfcGF0aH1gIgogICAgICAgICAgICBoaXN0b3J5X2RmID0gc3Bhcmsuc3FsKGhpc3RvcnlfcXVlcnkpCgogICAgICAgICAgICAjIEZpbHRlciB0aGUgaGlzdG9yeSB0byBnZXQgdGhlIHZlcnNpb24gYmVmb3JlIHN5bmNfdGltZV90b19yZWdpb24KICAgICAgICAgICAgdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wID0gKGhpc3RvcnlfZGYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRi5jb2woInRpbWVzdGFtcCIpIDw9IEYuZnJvbV91bml4dGltZShGLmxpdChzeW5jX3RpbWVfdG9fcmVnaW9uKSAvIDEwMDApLmNhc3QoInRpbWVzdGFtcCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihoaXN0b3J5X2RmLm9wZXJhdGlvbiA9PSAiQ0xPTkUiKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vcmRlckJ5KCJ0aW1lc3RhbXAiLCBhc2NlbmRpbmc9RmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCJ2ZXJzaW9uIiwgKHVuaXhfdGltZXN0YW1wKCJ0aW1lc3RhbXAiKSAqIDEwMDApLmFsaWFzKCJ0aW1lc3RhbXAiKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sKCJvcGVyYXRpb25QYXJhbWV0ZXJzIikuZ2V0SXRlbSgic291cmNlVmVyc2lvbiIpLmFsaWFzKCJzb3VyY2VWZXJzaW9uIiksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbCgib3BlcmF0aW9uTWV0cmljcyIpLmdldEl0ZW0oInNvdXJjZVRhYmxlU2l6ZSIpLmFsaWFzKCJzb3VyY2VUYWJsZVNpemUiKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubGltaXQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsZWN0KCkpCgogICAgICAgICAgICBpZiBub3QgdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCBmIk5vIHZhbGlkIHZlcnNpb24gZm91bmQgYmVmb3JlIHtzeW5jX3RpbWVfdG9fcmVnaW9ufSBmb3Ige2FiZnNzX3BhdGh9LiBTa2lwcGluZy4iKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICBsYXRlc3RfdmVyc2lvbl9iZWZvcmVfc3luY190aW1lID0gdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wWzBdWyd2ZXJzaW9uJ10KICAgICAgICAgICAgdGFibGVfbWV0cmljc1t0YWJsZV1bIm1ldHJpY3MiXVsic3luY19jb21taXRfdmVyc2lvbiJdID0gdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wWzBdWydzb3VyY2VWZXJzaW9uJ10KICAgICAgICAgICAgIyBTdGVwIDQ6IFBlcmZvcm0gZGVlcCBjbG9uZSB1c2luZyB0aGUgdmVyc2lvbiBpZGVudGlmaWVkCiAgICAgICAgICAgIHRhcmdldF90YWJsZSA9IGYie2NhdGFsb2d9LntzY2hlbWF9Lnt0YWJsZV9uYW1lfSIKCiAgICAgICAgICAgIHNxbF9jb21tYW5kID0gZiIiIgogICAgICAgICAgICAgICAgUkVQTEFDRSBUQUJMRSB7dGFyZ2V0X3RhYmxlfSAKICAgICAgICAgICAgICAgIERFRVAgQ0xPTkUgZGVsdGEuYHthYmZzc19wYXRofWAgVkVSU0lPTiBBUyBPRiB7bGF0ZXN0X3ZlcnNpb25fYmVmb3JlX3N5bmNfdGltZX0KICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiRXhlY3V0aW5nIFNRTDoge3NxbF9jb21tYW5kfSIpCiAgICAgICAgICAgIHNwYXJrLnNxbChzcWxfY29tbWFuZCkKICAgICAgICAgICAgY2xvbmVkZiA9IHNwYXJrLnNxbChzcWxfY29tbWFuZCkKICAgICAgICAgICAgc2l6ZSA9IGNsb25lZGYuc2VsZWN0KCJzb3VyY2VfdGFibGVfc2l6ZSIpLmNvbGxlY3QoKVswXVsic291cmNlX3RhYmxlX3NpemUiXQogICAgICAgICAgICB0YWJsZV9tZXRyaWNzW3RhYmxlXVsibWV0cmljcyJdWyJzb3VyY2VfdGFibGVfc2l6ZSJdID0gc2l6ZQogICAgICAgICAgICB0YXJnZXRfb3BlcmF0aW9uX21ldHJpY3MuYXBwZW5kKHRhYmxlX21ldHJpY3MpCiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgZiJUYWJsZSB7dGFibGV9IGRlZXAgY2xvbmVkIGludG8gVW5pdHkgQ2F0YWxvZyBhdCB7dGFyZ2V0X3RhYmxlfSB1c2luZyB2ZXJzaW9uIHtsYXRlc3RfdmVyc2lvbl9iZWZvcmVfc3luY190aW1lfSIpCgogICAgICAgICMgU3RlcCA1OiBVcGRhdGUgdGhlIG1ldGFkYXRhIHdpdGggdGhlIHN5bmNfdGltZV9pbl9yZWdpb24KICAgICAgICB1cGRhdGVfbWV0YWRhdGFfc3RhdHVzKAogICAgICAgICAgICBtZXRhZGF0YV90YWJsZV9wYXRoID0gbWV0YWRhdGFfdGFibGVfcGF0aCwgCiAgICAgICAgICAgIHdvcmtzcGFjZV9uYW1lID0gd29ya3NwYWNlX25hbWUsIAogICAgICAgICAgICBncm91cF9uYW1lID0gZ3JvdXBfbmFtZSwgCiAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb249c3luY190aW1lX2luX3JlZ2lvbiwKICAgICAgICAgICAgdGFyZ2V0X29wZXJhdGlvbl9tZXRyaWNzPXRhcmdldF9vcGVyYXRpb25fbWV0cmljcwogICAgICAgICkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlVwZGF0ZWQgc3luY190aW1lX2luX3JlZ2lvbiBmb3Ige3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX0iKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkVycm9yIHN5bmNpbmcge3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX06IHtlfSIpCg==",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/sync_in_region",
            "language": "PYTHON",
            "md5": "59917481f2c0ffb64b2c06518982e3c1",
            "object_id": 2603385160998876,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/sync_in_region",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/sync_in_region"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_sync_to_region",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IsIGFzX2NvbXBsZXRlZApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCmltcG9ydCB0aW1lCmltcG9ydCBweXR6CmZyb20gcHlzcGFyay5zcWwgaW1wb3J0IGZ1bmN0aW9ucyBhcyBGCgojIEdsb2JhbCB2YXJpYWJsZSB0byBjb2xsZWN0IGluZm8tbGV2ZWwgbG9ncyBmb3Igc3VjY2Vzc2Z1bCB3b3JrZmxvd3MKc3VjY2Vzc2Z1bF93b3JrZmxvd3MgPSBbXQoKZGVmIHByb2Nlc3Nfd29ya2Zsb3dfdG9fcmVnaW9uKHdvcmtmbG93X2RhdGEsIGluc3RhbmNlX3VybCwgcGF0X3Rva2VuLCB0YXJnZXRfbG9jYXRpb24sIG1ldGFkYXRhX3RhYmxlX3BhdGgsIHN5bmNfaW50ZXJ2YWxfbWlucywgc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zKToKICAgICIiIgogICAgUHJvY2VzcyBhIHNpbmdsZSB3b3JrZmxvdzogQ2hlY2sgZm9yIG5ldyBjb21taXRzLCB0aGVuIGRvIEFQSSBjYWxsIGFuZCBkZWVwIGNsb25lIGlmIHJlcXVpcmVkLgogICAgQWxzbywgdXBkYXRlIHRoZSBtZXRhZGF0YSB0YWJsZSB3aXRoIHN5bmMgc3RhdHVzIG9ubHkgd2hlbiB0aGVyZSBpcyBhIGRlZXAgY2xvbmUgcGVyZm9ybWVkLgogICAgIiIiCiAgICAKICAgICh3b3Jrc3BhY2VfbmFtZSwgZ3JvdXBfbmFtZSksIG1ldGFkYXRhID0gd29ya2Zsb3dfZGF0YQogICAgdGFibGVzID0gbWV0YWRhdGFbInRhYmxlcyJdCiAgICB2YWxpZGF0ZWQgPSBtZXRhZGF0YS5nZXQoInZhbGlkYXRlZCIsIE5vbmUpICAjIENhbiBiZSBOb25lIGlmIG5vdCBhdmFpbGFibGUKICAgIHdvcmtmbG93X2lkID0gbWV0YWRhdGEuZ2V0KCJ3b3JrZmxvd19pZCIsIE5vbmUpCiAgICBsYXN0X3N5bmNfdGltZSA9IG1ldGFkYXRhLmdldCgibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lIiwgTm9uZSkKICAgIHN5bmNfc3RhdHVzID0gbWV0YWRhdGEuZ2V0KCJzeW5jX3N0YXR1cyIsIE5vbmUpCgogICAgIyBTdGVwIDE6IFBhcnNlIGFsbCB0YWJsZXMgaW50byBhIGxpc3Qgb2YgKGNhdGFsb2csIHNjaGVtYSwgdGFibGVfbmFtZSkKICAgIHNvdXJjZV9vcGVyYXRpb25fbWV0cmljcyA9IFtdCiAgICBwYXJzZWRfdGFibGVzID0gW10KICAgIHN5bmNfcmVhc29uID0gIndvcmtmbG93X3RpbWUiCiAgICBmb3IgdGFibGUgaW4gdGFibGVzOgogICAgICAgIGNhdGFsb2csIHNjaGVtYSwgdGFibGVfbmFtZSA9IHRhYmxlLnNwbGl0KCIuIikKICAgICAgICBwYXJzZWRfdGFibGVzLmFwcGVuZCgoY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lKSkKCiAgICAjIFN0ZXAgMjogQ2hlY2sgZm9yIG5ldyBjb21taXRzIGluIGFueSBvZiB0aGUgdGFibGVzCiAgICBuZXdfY29tbWl0c19mb3VuZCA9IEZhbHNlCiAgICB0cnk6CiAgICAgICAgZm9yIGNhdGFsb2csIHNjaGVtYSwgdGFibGVfbmFtZSBpbiBwYXJzZWRfdGFibGVzOgogICAgICAgICAgICBzb3VyY2VfdGFibGUgPSBmIntjYXRhbG9nfS57c2NoZW1hfS57dGFibGVfbmFtZX0iCgogICAgICAgICAgICAjIFF1ZXJ5IHRoZSBoaXN0b3J5IG9mIHRoZSB0YWJsZSB0byBjaGVjayBmb3IgY29tbWl0cyBhZnRlciB0aGUgbGFzdCBzeW5jCiAgICAgICAgICAgIGhpc3RvcnlfZGYgPSBzcGFyay5zcWwoZiJERVNDUklCRSBISVNUT1JZIHtzb3VyY2VfdGFibGV9IikKCiAgICAgICAgICAgICMgSWYgbGFzdF9zeW5jX3RpbWUgaXMgTm9uZSwgYXNzdW1lIGl0J3MgdGhlIGZpcnN0IHN5bmMgYW5kIHByb2NlZWQKICAgICAgICAgICAgaWYgbGFzdF9zeW5jX3RpbWUgaXMgTm9uZSBvciBzeW5jX3N0YXR1cyBpcyBOb25lOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJGaXJzdCB0aW1lIHN5bmMgZm9yIHtncm91cF9uYW1lfSwgcHJvY2VlZGluZyB3aXRoIHN5bmMuIikKICAgICAgICAgICAgICAgIG5ld19jb21taXRzX2ZvdW5kID0gVHJ1ZQogICAgICAgICAgICAgICAgYnJlYWsgICMgTm8gbmVlZCB0byBjaGVjayBmdXJ0aGVyIHRhYmxlcywgYnV0IHRoZXkgd2lsbCBzdGlsbCBiZSBwYXJ0IG9mIHRoZSBkZWVwIGNsb25lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIElmIGxhc3Rfc3luY190aW1lIGlzIGF2YWlsYWJsZSwgY2hlY2sgZm9yIG5ldyBjb21taXRzCiAgICAgICAgICAgICAgICBuZXdfY29tbWl0cyA9IGhpc3RvcnlfZGYuZmlsdGVyKEYuY29sKCd0aW1lc3RhbXAnKSA+IEYuZnJvbV91bml4dGltZShGLmxpdChsYXN0X3N5bmNfdGltZSkgLyAxMDAwKS5jYXN0KCJ0aW1lc3RhbXAiKSkuY291bnQoKQoKICAgICAgICAgICAgICAgIGlmIG5ld19jb21taXRzID4gMDoKICAgICAgICAgICAgICAgICAgICBuZXdfY29tbWl0c19mb3VuZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIndvcmtmbG93OiB7Z3JvdXBfbmFtZX0sIHRhYmxlOiB7c291cmNlX3RhYmxlfSBMYXN0IHN1Y2Nlc3NmdWwgdGltZTogIHtsYXN0X3N5bmNfdGltZX0gbmV3IGNvbW1pdCBmb3VuZDoge25ld19jb21taXRzX2ZvdW5kfSIpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsgICMgU3RvcCBjaGVja2luZyBmdXJ0aGVyIHRhYmxlcyBvbmNlIHdlIGZpbmQgbmV3IGNvbW1pdHMKCiAgICAgICAgIyBJZiBubyBuZXcgY29tbWl0cyBhbmQgbm90IHRoZSBmaXJzdCBzeW5jLCBza2lwIHRoZSB3b3JrZmxvdyB3aXRob3V0IHVwZGF0aW5nIG1ldGFkYXRhCiAgICAgICAgaWYgbm90IG5ld19jb21taXRzX2ZvdW5kOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIk5vIG5ldyBjb21taXRzIGZvdW5kIGZvciBncm91cCB7Z3JvdXBfbmFtZX0sIHNraXBwaW5nLiIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIFN0ZXAgMzogSWYgd29ya2Zsb3dfaWQgZXhpc3RzIGFuZCB2YWxpZGF0ZWQsIGNoZWNrIHRoZSB3b3JrZmxvdyBydW4KICAgICAgICBpZiB3b3JrZmxvd19pZDoKICAgICAgICAgICAgaWYgdmFsaWRhdGVkOgogICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bF9ydW5zID0gam9iX3N1Y2Nlc3NmdWxfcnVuX2FmdGVyX2xhc3RfcnVuKGluc3RhbmNlX3VybCwgcGF0X3Rva2VuLCBbd29ya2Zsb3dfaWRdLCBsYXN0X3N5bmNfdGltZSkKICAgICAgICAgICAgICAgIGlmIHdvcmtmbG93X2lkIG5vdCBpbiBzdWNjZXNzZnVsX3J1bnMgb3Igbm90IHN1Y2Nlc3NmdWxfcnVuc1t3b3JrZmxvd19pZF06CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJObyBzdWNjZXNzZnVsIHJ1bnMgZm91bmQgZm9yIHdvcmtmbG93IHt3b3JrZmxvd19pZH0gYWZ0ZXIge2xhc3Rfc3luY190aW1lfSBzdWNjZXNzZnVsX3J1bnMgYXJlIHtzdWNjZXNzZnVsX3J1bnN9LiBTa2lwcGluZyBub3JtYWwgc3luYy4iKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhlIGN1cnJlbnRfbWlsbGlzZWNvbmRzIG1pbnVzIGxhc3Rfc3luY190aW1lIGV4Y2VlZHMgc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9taWxsaXNlY29uZHMgPSBpbnQodGltZS50aW1lKCkgKiAxMDAwKQogICAgICAgICAgICAgICAgICAgIGVsYXBzZWRfbWludXRlcyA9IChjdXJyZW50X21pbGxpc2Vjb25kcyAtIGxhc3Rfc3luY190aW1lKSAvIDYwMDAwCiAgICAgICAgICAgICAgICAgICAgaWYgZWxhcHNlZF9taW51dGVzID4gc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zOgogICAgICAgICAgICAgICAgICAgICAgICBzeW5jX3JlYXNvbiA9ICJ0aHJlc2hvbGRfdGltZSIKICAgICAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJTeW5jIGZhaWxvdmVyIGludGVydmFsIGV4Y2VlZGVkIGZvciB7Z3JvdXBfbmFtZX0gY3VycmVudCB0aW1lOiB7Y3VycmVudF9taWxsaXNlY29uZHN9IGxhc3Rfc3luY19kYXRldGltZToge2xhc3Rfc3luY190aW1lfSwgZWxhcHBzZWQgbWludXRlOiB7ZWxhcHNlZF9taW51dGVzfSwgc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zOiB7c3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zfSAgcHJvY2VlZGluZyB3aXRoIGZhaWxvdmVyIHN5bmMuIikKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgICAgICBsYXRlc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXAgPSBzdWNjZXNzZnVsX3J1bnNbd29ya2Zsb3dfaWRdIGlmIHN1Y2Nlc3NmdWxfcnVuc1t3b3JrZmxvd19pZF0gZWxzZSAoY3VycmVudF9taWxsaXNlY29uZHMpCiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlVzaW5nIGxhc3Qgc3VjY2Vzc2Z1bCBydW4gdGltZXN0YW1wOiB7bGF0ZXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wfSIpCgogICAgICAgICAgICAgICAgIyBTdGVwIDQ6IFVwZGF0ZSBzdGF0dXMgdG8gJ0luIFByb2dyZXNzJyBhZnRlciB3b3JrZmxvdyBjaGVjayBhbmQgYmVmb3JlIGRlZXAgY2xvbmluZwogICAgICAgICAgICAgICAgdXBkYXRlX21ldGFkYXRhX3N0YXR1cyhtZXRhZGF0YV90YWJsZV9wYXRoLCB3b3Jrc3BhY2VfbmFtZSwgZ3JvdXBfbmFtZSwgIkluIFByb2dyZXNzIikKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiU2V0ICdJbiBQcm9ncmVzcycgc3RhdHVzIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfSIpCgogICAgICAgICAgICAgICAgIyBTdGVwIDU6IFBlcmZvcm0gZGVlcCBjbG9uZSBmb3IgZWFjaCB0YWJsZSwgdXNpbmcgdGhlIGhpZ2hlc3QgdmVyc2lvbiBiZWZvcmUgbGF0ZXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wCiAgICAgICAgICAgICAgICBmb3IgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lIGluIHBhcnNlZF90YWJsZXM6CiAgICAgICAgICAgICAgICAgICAgdGFibGVfbWV0cmljcyA9IHt9CiAgICAgICAgICAgICAgICAgICAgc291cmNlX3RhYmxlID0gZiJ7Y2F0YWxvZ30ue3NjaGVtYX0ue3RhYmxlX25hbWV9IgogICAgICAgICAgICAgICAgICAgIHRhYmxlX21ldHJpY3Nbc291cmNlX3RhYmxlXSA9IHsibWV0cmljcyI6IHt9fQogICAgICAgICAgICAgICAgICAgIHZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcCA9IChzcGFyay5zcWwoZiJERVNDUklCRSBISVNUT1JZIHtzb3VyY2VfdGFibGV9IikKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYuY29sKCJ0aW1lc3RhbXAiKSA8PSBGLmZyb21fdW5peHRpbWUoRi5saXQobGF0ZXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wKSAvIDEwMDApLmNhc3QoInRpbWVzdGFtcCIpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLm9yZGVyQnkoInRpbWVzdGFtcCIsIGFzY2VuZGluZz1GYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgidmVyc2lvbiIsICh1bml4X3RpbWVzdGFtcCgidGltZXN0YW1wIikgKiAxMDAwKS5hbGlhcygidGltZXN0YW1wIikpCiAgICAgICAgICAgICAgICAgICAgICAgIC5saW1pdCgxKQogICAgICAgICAgICAgICAgICAgICAgICAuY29sbGVjdCgpKQoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiTm8gdmFsaWQgdmVyc2lvbiBmb3VuZCBiZWZvcmUge2xhdGVzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcH0gZm9yIHRhYmxlIHtzb3VyY2VfdGFibGV9LiBTa2lwcGluZy4iKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBsYXRlc3RfdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wID0gdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wWzBdWyd2ZXJzaW9uJ10KICAgICAgICAgICAgICAgICAgICBsYXRlc3RfdGltZXN0YW1wX2JlZm9yZV90aW1lc3RhbXAgPSB2ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXBbMF1bJ3RpbWVzdGFtcCddCiAgICAgICAgICAgICAgICAgICAgdGFibGVfbWV0cmljc1tzb3VyY2VfdGFibGVdWyJtZXRyaWNzIl1bInN5bmNfY29tbWl0X3RpbWVzdGFtcCJdID0gbGF0ZXN0X3RpbWVzdGFtcF9iZWZvcmVfdGltZXN0YW1wCiAgICAgICAgICAgICAgICAgICAgdGFibGVfbWV0cmljc1tzb3VyY2VfdGFibGVdWyJtZXRyaWNzIl1bInN5bmNfY29tbWl0X3ZlcnNpb24iXSA9IGxhdGVzdF92ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXAKCiAgICAgICAgICAgICAgICAgICAgIyBSdW4gdGhlIGRlZXAgY2xvbmUgU1FMIGNvbW1hbmQgd2l0aCBWRVJTSU9OIEFTIE9GIGZvciBlYWNoIHRhYmxlCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3RhYmxlX3BhdGggPSBmInt0YXJnZXRfbG9jYXRpb259L3tjYXRhbG9nfS97c2NoZW1hfS97dGFibGVfbmFtZX0iCgogICAgICAgICAgICAgICAgICAgIHNxbF9jb21tYW5kID0gZiIiIgogICAgICAgICAgICAgICAgICAgICAgICBDUkVBVEUgT1IgUkVQTEFDRSBUQUJMRSBkZWx0YS5ge3RhcmdldF90YWJsZV9wYXRofWAgCiAgICAgICAgICAgICAgICAgICAgICAgIERFRVAgQ0xPTkUge3NvdXJjZV90YWJsZX0gVkVSU0lPTiBBUyBPRiB7bGF0ZXN0X3ZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcH0KICAgICAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIkV4ZWN1dGluZyBTUUwgY29tbWFuZDoge3NxbF9jb21tYW5kfSIpCiAgICAgICAgICAgICAgICAgICAgY2xvbmVkZiA9IHNwYXJrLnNxbChzcWxfY29tbWFuZCkKICAgICAgICAgICAgICAgICAgICBzaXplID0gY2xvbmVkZi5zZWxlY3QoInNvdXJjZV90YWJsZV9zaXplIikuY29sbGVjdCgpWzBdWyJzb3VyY2VfdGFibGVfc2l6ZSJdCiAgICAgICAgICAgICAgICAgICAgdGFibGVfbWV0cmljc1tzb3VyY2VfdGFibGVdWyJtZXRyaWNzIl1bInNvdXJjZV90YWJsZV9zaXplIl0gPSBzaXplCiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJEZWVwIGNsb25lZCB0YWJsZSB7c291cmNlX3RhYmxlfSB0byB7dGFyZ2V0X3RhYmxlX3BhdGh9IGFzIG9mIHZlcnNpb24ge2xhdGVzdF92ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXB9IikKICAgICAgICAgICAgICAgICAgICBzb3VyY2Vfb3BlcmF0aW9uX21ldHJpY3MuYXBwZW5kKHRhYmxlX21ldHJpY3MpCiAgICAgICAgIyBTdGVwIDQ6IElmIHRoZXJlIGlzIG5vIHdvcmtmbG93X2lkLCBwcm9jZWVkIGRpcmVjdGx5IHdpdGggZGVlcCBjbG9uZSBmb3IgdGhlIHRhYmxlcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgSGFuZGxlIGdyb3VwcyB3aXRob3V0IHdvcmtmbG93cywgcGVyZm9ybSBkZWVwIGNsb25lIGZvciBlYWNoIHRhYmxlCiAgICAgICAgICAgIHByb2NlZWQgPSBGYWxzZQogICAgICAgICAgICBjdXJyZW50X21pbGxpc2Vjb25kcyA9IGludCh0aW1lLnRpbWUoKSAqIDEwMDApCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBsYXN0X3N5bmNfdGltZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGVsYXBzZWRfbWludXRlcyA9IChjdXJyZW50X21pbGxpc2Vjb25kcyAtIGxhc3Rfc3luY190aW1lKSAvIDYwMDAwCiAgICAgICAgICAgICAgICBpZiBlbGFwc2VkX21pbnV0ZXMgPiBzeW5jX2ludGVydmFsX21pbnM6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJTeW5jIGludGVydmFsIG1ldCBmb3IgZ3JvdXAge2dyb3VwX25hbWV9LCBlbGFwc2VkX21pbnV0ZXM6IHtlbGFwc2VkX21pbnV0ZXN9LHN5bmNfaW50ZXJ2YWxfbWluczoge3N5bmNfaW50ZXJ2YWxfbWluc30sIHN5bmNpbmcuIikKICAgICAgICAgICAgICAgICAgICBwcm9jZWVkID0gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJvY2VlZCA9IFRydWUgICAgICAgIAogICAgICAgICAgICAjIFBlcmZvcm0gc3luYyBvbmx5IGlmIGN1cnJlbnQgdGltZXN0YW1wIC0gbGFzdF9zeW5jX3RpbWUgPiBzeW5jX2ludGVydmFsX21pbnMKICAgICAgICAgICAgaWYgcHJvY2VlZDoKICAgICAgICAgICAgICAgIHN5bmNfcmVhc29uID0gInNjaGVkdWxlX3RpbWUiCiAgICAgICAgICAgICAgICBmb3IgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lIGluIHBhcnNlZF90YWJsZXM6CiAgICAgICAgICAgICAgICAgICAgdGFibGVfbWV0cmljcyA9IHt9CiAgICAgICAgICAgICAgICAgICAgc291cmNlX3RhYmxlID0gZiJ7Y2F0YWxvZ30ue3NjaGVtYX0ue3RhYmxlX25hbWV9IgogICAgICAgICAgICAgICAgICAgIHRhYmxlX21ldHJpY3Nbc291cmNlX3RhYmxlXSA9IHsibWV0cmljcyI6IHt9fQogICAgICAgICAgICAgICAgICAgIHRhcmdldF90YWJsZV9wYXRoID0gZiJ7dGFyZ2V0X2xvY2F0aW9ufS97Y2F0YWxvZ30ve3NjaGVtYX0ve3RhYmxlX25hbWV9IgoKICAgICAgICAgICAgICAgICAgICAjIFBlcmZvcm0gZGVlcCBjbG9uZSBvbmx5IGlmIHRhYmxlIGRvZXMgbm90IGV4aXN0CiAgICAgICAgICAgICAgICAgICAgc3FsX2NvbW1hbmQgPSBmIiIiCiAgICAgICAgICAgICAgICAgICAgICAgIENSRUFURSBPUiBSRVBMQUNFIFRBQkxFIGRlbHRhLmB7dGFyZ2V0X3RhYmxlX3BhdGh9YCAKICAgICAgICAgICAgICAgICAgICAgICAgREVFUCBDTE9ORSB7c291cmNlX3RhYmxlfQogICAgICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiRXhlY3V0aW5nIFNRTCBjb21tYW5kOiB7c3FsX2NvbW1hbmR9IikKICAgICAgICAgICAgICAgICAgICBjbG9uZWRmID0gc3Bhcmsuc3FsKHNxbF9jb21tYW5kKQogICAgICAgICAgICAgICAgICAgIHNpemUgPSBjbG9uZWRmLnNlbGVjdCgic291cmNlX3RhYmxlX3NpemUiKS5jb2xsZWN0KClbMF1bInNvdXJjZV90YWJsZV9zaXplIl0KICAgICAgICAgICAgICAgICAgICB0YWJsZV9tZXRyaWNzW3NvdXJjZV90YWJsZV1bIm1ldHJpY3MiXVsic291cmNlX3RhYmxlX3NpemUiXSA9IHNpemUKICAgICAgICAgICAgICAgICAgICBzb3VyY2Vfb3BlcmF0aW9uX21ldHJpY3MuYXBwZW5kKHRhYmxlX21ldHJpY3MpCiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJEZWVwIGNsb25lZCB0YWJsZSB7c291cmNlX3RhYmxlfSB0byB7dGFyZ2V0X3RhYmxlX3BhdGh9IikKICAgICAgICAgICAgICAgIGxhdGVzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcCA9IGN1cnJlbnRfbWlsbGlzZWNvbmRzCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlN5bmMgaW50ZXJ2YWwgbm90IG1ldCBmb3IgZ3JvdXAge2dyb3VwX25hbWV9LCBza2lwcGluZy4iKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgU3RlcCA1OiBBZnRlciBzdWNjZXNzZnVsIGNsb25pbmcsIHVwZGF0ZSBtZXRhZGF0YSB0byAnU3VjY2VzcycgYW5kIHNldCBzeW5jIHRpbWUKICAgICAgICBzeW5jX3RpbWUgPSBpbnQodGltZS50aW1lKCkgKiAxMDAwKQogICAgICAgIHVwZGF0ZV9tZXRhZGF0YV9zdGF0dXMoCiAgICAgICAgICAgIG1ldGFkYXRhX3RhYmxlX3BhdGggPSBtZXRhZGF0YV90YWJsZV9wYXRoLCAKICAgICAgICAgICAgd29ya3NwYWNlX25hbWUgPSB3b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgIGdyb3VwX25hbWUgPSBncm91cF9uYW1lLCAKICAgICAgICAgICAgc3RhdHVzID0gIlN1Y2Nlc3MiLCAKICAgICAgICAgICAgc3luY190aW1lID0gbGF0ZXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wLCAKICAgICAgICAgICAgc3luY190aW1lX3RvX3JlZ2lvbiA9IHN5bmNfdGltZSwgCiAgICAgICAgICAgIHN5bmNfcmVhc29uPSBzeW5jX3JlYXNvbiwgCiAgICAgICAgICAgIHNvdXJjZV9vcGVyYXRpb25fbWV0cmljcyA9IHNvdXJjZV9vcGVyYXRpb25fbWV0cmljcykKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlNldCAnU3VjY2Vzcycgc3RhdHVzIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfSIpCgogICAgICAgICMgTG9nIHN1bW1hcnkgaW5mbwogICAgICAgIHN1Y2Nlc3NmdWxfd29ya2Zsb3dzLmFwcGVuZCh7CiAgICAgICAgICAgICd3b3Jrc3BhY2VfbmFtZSc6IHdvcmtzcGFjZV9uYW1lLAogICAgICAgICAgICAnZ3JvdXBfbmFtZSc6IGdyb3VwX25hbWUsCiAgICAgICAgICAgICd3b3JrZmxvd19uYW1lJzogbWV0YWRhdGFbJ3dvcmtmbG93X25hbWUnXSwKICAgICAgICAgICAgJ3dvcmtmbG93X2lkJzogbWV0YWRhdGFbJ3dvcmtmbG93X2lkJ10sCiAgICAgICAgICAgICd0YWJsZXMnOiBtZXRhZGF0YVsndGFibGVzJ10sCiAgICAgICAgICAgICdsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUnOiBsYXRlc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXAsCiAgICAgICAgICAgICdzeW5jX3N0YXR1cyc6ICdTdWNjZXNzJwogICAgICAgIH0pCiAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkVycm9yIHByb2Nlc3Npbmcgd29ya2Zsb3cge3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX06IHtlfSIpCgpkZWYgc3luY190b19yZWdpb24odmFsaWRhdGVkX2NvbmZpZzogZGljdCwgc3luY19sb2NhdGlvbl90bzogc3RyID0gInByaW1hcnkiLCBtYXhfd29ya2VyczogaW50ID0gMTApOgogICAgIiIiCiAgICBTeW5jcyBEZWx0YSB0YWJsZXMgZnJvbSBtZXRhZGF0YSB3aXRoIG11bHRpLXRocmVhZGluZyBhbmQgdHdvIGxldmVscyBvZiBsb2dnaW5nOiBkZWJ1ZyBhbmQgaW5mby4KCiAgICBBcmdzOgogICAgLSB2YWxpZGF0ZWRfY29uZmlnIChkaWN0KTogVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGNvbnRhaW5pbmcgd29ya3NwYWNlIGFuZCBzeW5jIGRldGFpbHMuCiAgICAtIHN5bmNfbG9jYXRpb25fdG8gKHN0cik6IFNwZWNpZnkgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHRvIGNob29zZSB0aGUgc3luYyBsb2NhdGlvbi4KICAgIC0gc3luY19pbnRlcnZhbF9taW5zIChpbnQpOiBOdW1iZXIgb2YgbWlucyBiZWZvcmUgcmVjaGVja2luZyBncm91cHMgd2l0aG91dCB3b3JrZmxvd3MuCiAgICAtIHN5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucyAoaW50KTogTnVtYmVyIG9mIG1pbnMgYWZ0ZXIgd2hpY2ggYSB0YWJsZSB3b3VsZCBiZSBzeW5jZWQgaXJyZXNwZWN0aXZlIG9mIHdvcmtmbG93IGNvbXBsaXRpb24uCiAgICAtIG1heF93b3JrZXJzIChpbnQpOiBNYXggdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZy4KICAgIC0gbG9nZ2luZ19sZXZlbCAoc3RyKTogRWl0aGVyICdpbmZvJyBmb3Igc3VtbWFyeSBvciAnZGVidWcnIGZvciBkZXRhaWxlZCBsb2dnaW5nLgoKICAgIFJldHVybnM6CiAgICAtIE5vbmUKICAgICIiIgoKICAgIGdsb2JhbCBzdWNjZXNzZnVsX3dvcmtmbG93cwogICAgc3VjY2Vzc2Z1bF93b3JrZmxvd3MgPSBbXSAgIyBSZXNldCB0aGUgZ2xvYmFsIHN1Y2Nlc3NmdWwgd29ya2Zsb3cgbGlzdAoKICAgICMgVmFsaWRhdGUgc3luY19sb2NhdGlvbl90bwogICAgaWYgc3luY19sb2NhdGlvbl90byBub3QgaW4gWyJwcmltYXJ5IiwgInNlY29uZGFyeSJdOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN5bmNfbG9jYXRpb25fdG8gbXVzdCBiZSBlaXRoZXIgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIikKCiAgICB0cnk6CiAgICAgICAgIyBTdGVwIDE6IFNldCB1cCBhIHRocmVhZCBwb29sIGV4ZWN1dG9yIHRvIGhhbmRsZSB0aGUgd29ya2Zsb3dzIGNvbmN1cnJlbnRseQogICAgICAgIHdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPW1heF93b3JrZXJzKSBhcyBleGVjdXRvcjoKICAgICAgICAgICAgZnV0dXJlcyA9IFtdCgogICAgICAgICAgICAjIFN0ZXAgMjogSXRlcmF0ZSB0aHJvdWdoIHRoZSB3b3Jrc3BhY2VzIGluIHRoZSB2YWxpZGF0ZWQgY29uZmlnCiAgICAgICAgICAgIGZvciB3b3Jrc3BhY2UgaW4gdmFsaWRhdGVkX2NvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgICAgICAgICAgd29ya3NwYWNlX25hbWUgPSB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ10KCiAgICAgICAgICAgICAgICAjIFJldHJpZXZlIHRoZSBhY3R1YWwgUEFUIHRva2VuIHVzaW5nIHRoZSBzY29wZSBhbmQga2V5CiAgICAgICAgICAgICAgICBzZWNyZXRfc2NvcGUgPSB2YWxpZGF0ZWRfY29uZmlnLmdldCgic2VjcmV0X3Njb3BlIikKICAgICAgICAgICAgICAgIHBhdF9rZXkgPSB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9wYXRfa2V5J10KICAgICAgICAgICAgICAgIHN5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucyA9IHdvcmtzcGFjZVsnc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zJ10KICAgICAgICAgICAgICAgIHN5bmNfaW50ZXJ2YWxfbWlucyA9IHdvcmtzcGFjZVsnc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zJ10KICAgICAgICAgICAgICAgIHBhdF90b2tlbiA9IHJldHJpZXZlX3BhdF90b2tlbihzZWNyZXRfc2NvcGUsIHBhdF9rZXkpCiAgICAgICAgICAgICAgICBpZiBwYXRfdG9rZW4gaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiRXJyb3IgcmV0cmlldmluZyBQQVQgdG9rZW4gZm9yIHdvcmtzcGFjZToge3dvcmtzcGFjZV9uYW1lfSwgc2tpcHBpbmcgc3luYy4iKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgIyBDaG9vc2UgdGhlIG1ldGFkYXRhIHRhYmxlIHBhdGggYmFzZWQgb24gdGhlIHN5bmNfbG9jYXRpb25fdG8KICAgICAgICAgICAgICAgIHN5bmNfbG9jYXRpb24gPSB3b3Jrc3BhY2VbZiJzeW5jX2xvY2F0aW9uX3tzeW5jX2xvY2F0aW9uX3RvfSJdCiAgICAgICAgICAgICAgICBtZXRhZGF0YV90YWJsZV9wYXRoID0gZiJ7c3luY19sb2NhdGlvbn0vbWV0YS9zeW5jX21ldGFkYXRhX3RhYmxlIgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJtZXRhZGF0YSB0YWJsZSBwYXRoIHttZXRhZGF0YV90YWJsZV9wYXRofSIpCiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiU3RhcnRpbmcgc3luYyBmb3Igd29ya3NwYWNlOiB7d29ya3NwYWNlX25hbWV9IHVzaW5nIHtzeW5jX2xvY2F0aW9uX3RvfSBzeW5jIGxvY2F0aW9uLiIpCgogICAgICAgICAgICAgICAgIyBTdGVwIDM6IExvYWQgdGhlIG1ldGFkYXRhIHRhYmxlIGZyb20gdGhlIHNlbGVjdGVkIHN5bmMgbG9jYXRpb24KICAgICAgICAgICAgICAgIG1ldGFkYXRhX2RpY3QgPSBsb2FkX21ldGFkYXRhX3RhYmxlKG1ldGFkYXRhX3RhYmxlX3BhdGgpCgogICAgICAgICAgICAgICAgIyBTdGVwIDQ6IEl0ZXJhdGUgdGhyb3VnaCB0aGUgbWV0YWRhdGEgYW5kIHN1Ym1pdCBlYWNoIHdvcmtmbG93IGZvciBjb25jdXJyZW50IHByb2Nlc3NpbmcKICAgICAgICAgICAgICAgIGZvciB3b3JrZmxvd19kYXRhIGluIG1ldGFkYXRhX2RpY3QuaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICBncm91cF9uYW1lID0gd29ya2Zsb3dfZGF0YVswXVsxXSAgIyBFeHRyYWN0IHRoZSBncm91cF9uYW1lIGZyb20gdGhlIHdvcmtmbG93X2RhdGEKCiAgICAgICAgICAgICAgICAgICAgIyBFeHRyYWN0IGluc3RhbmNlX3VybCBmcm9tIHRoZSB2YWxpZGF0ZWQgY29uZmlnCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfdXJsID0gd29ya3NwYWNlWyd3b3Jrc3BhY2VfaW5zdGFuY2VfdXJsJ10KCiAgICAgICAgICAgICAgICAgICAgIyBTdWJtaXQgZWFjaCB3b3JrZmxvdyBmb3IgY29uY3VycmVudCBwcm9jZXNzaW5nCiAgICAgICAgICAgICAgICAgICAgZnV0dXJlID0gZXhlY3V0b3Iuc3VibWl0KHByb2Nlc3Nfd29ya2Zsb3dfdG9fcmVnaW9uLCB3b3JrZmxvd19kYXRhLCBpbnN0YW5jZV91cmwsIHBhdF90b2tlbiwgc3luY19sb2NhdGlvbiwgbWV0YWRhdGFfdGFibGVfcGF0aCwgc3luY19pbnRlcnZhbF9taW5zLCBzeW5jX2ZhaWxvdmVyX2ludGVydmFsX21pbnMpCiAgICAgICAgICAgICAgICAgICAgZnV0dXJlcy5hcHBlbmQoZnV0dXJlKQoKICAgICAgICAgICAgIyBTdGVwIDU6IFdhaXQgZm9yIGFsbCBmdXR1cmVzIHRvIGNvbXBsZXRlCiAgICAgICAgICAgIGZvciBmdXR1cmUgaW4gYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGZ1dHVyZS5yZXN1bHQoKSAgIyBHZXQgdGhlIHJlc3VsdCBmcm9tIHRoZSBmdXR1cmUKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiRXJyb3IgcHJvY2Vzc2luZyB3b3JrZmxvdzoge2V9IikKCiAgICAgICAgIyBTdGVwIDY6IERpc3BsYXkgc3VtbWFyeSBpbiBpbmZvIG1vZGUKICAgICAgICBzdW1tYXJ5X2RmID0gcGQuRGF0YUZyYW1lKHN1Y2Nlc3NmdWxfd29ya2Zsb3dzKQogICAgICAgIHN1bW1hcnlfZGYgPSBzdW1tYXJ5X2RmLmRyb3AoY29sdW1ucz1bJ3ZhbGlkYXRlZCddLCBlcnJvcnM9J2lnbm9yZScpICAjIERyb3BwaW5nICd2YWxpZGF0ZWQnIGlmIGV4aXN0cwogICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgIlN1bW1hcnkgb2Ygc3VjY2Vzc2Z1bGx5IHN5bmNlZCB3b3JrZmxvd3M6IikKICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIHN1bW1hcnlfZGYudG9fc3RyaW5nKGluZGV4PUZhbHNlKSkgICMgUHJpbnQgdGhlIGRhdGFmcmFtZSB3aXRob3V0IGluZGV4CiAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCAiU3luYyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsIGYiRXJyb3IgZHVyaW5nIHN5bmMgcHJvY2Vzczoge2V9IikK",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/sync_to_region",
            "language": "PYTHON",
            "md5": "4af62c94e69644f1ee4052dd0524051f",
            "object_id": 2603385160998863,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/sync_to_region",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/sync_to_region"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_utils",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHB5dHoKaW1wb3J0IGpzb24KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSBweXNwYXJrLnNxbC50eXBlcyBpbXBvcnQgU3RydWN0VHlwZSwgU3RydWN0RmllbGQsIFN0cmluZ1R5cGUsIEFycmF5VHlwZSwgQm9vbGVhblR5cGUsIExvbmdUeXBlCmZyb20gcHlzcGFyay5zcWwgaW1wb3J0IERhdGFGcmFtZQppbXBvcnQgdHJhY2ViYWNrCmltcG9ydCB0aW1lCmltcG9ydCByYW5kb20KZnJvbSBweXNwYXJrLnNxbC5mdW5jdGlvbnMgaW1wb3J0IGxpdCwgY29sLCB1bml4X3RpbWVzdGFtcAoKCiMgRGVmaW5lIHRoZSBzY2hlbWEgb2YgdGhlIG1ldGFkYXRhIHRhYmxlLCBpbmNsdWRpbmcgbmV3IGNvbHVtbnMKc2NoZW1hID0gU3RydWN0VHlwZShbCiAgICBTdHJ1Y3RGaWVsZCgid29ya3NwYWNlX25hbWUiLCBTdHJpbmdUeXBlKCksIEZhbHNlKSwKICAgIFN0cnVjdEZpZWxkKCJncm91cF9uYW1lIiwgU3RyaW5nVHlwZSgpLCBGYWxzZSksCiAgICBTdHJ1Y3RGaWVsZCgid29ya2Zsb3dfbmFtZSIsIFN0cmluZ1R5cGUoKSwgVHJ1ZSksCiAgICBTdHJ1Y3RGaWVsZCgid29ya2Zsb3dfaWQiLCBTdHJpbmdUeXBlKCksIFRydWUpLAogICAgU3RydWN0RmllbGQoInRhYmxlcyIsIEFycmF5VHlwZShTdHJpbmdUeXBlKCkpLCBGYWxzZSksCiAgICBTdHJ1Y3RGaWVsZCgidmFsaWRhdGVkIiwgQm9vbGVhblR5cGUoKSwgRmFsc2UpLAogICAgU3RydWN0RmllbGQoImxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSIsIExvbmdUeXBlKCksIFRydWUpLAogICAgU3RydWN0RmllbGQoInN5bmNfc3RhdHVzIiwgU3RyaW5nVHlwZSgpLCBUcnVlKSwKICAgIFN0cnVjdEZpZWxkKCJzeW5jX3JlYXNvbiIsIFN0cmluZ1R5cGUoKSwgVHJ1ZSksCiAgICBTdHJ1Y3RGaWVsZCgic3luY190aW1lX3RvX3JlZ2lvbiIsIExvbmdUeXBlKCksIFRydWUpLCAKICAgIFN0cnVjdEZpZWxkKCJzeW5jX3RpbWVfaW5fcmVnaW9uIiwgTG9uZ1R5cGUoKSwgVHJ1ZSksCiAgICBTdHJ1Y3RGaWVsZCgic291cmNlX29wZXJhdGlvbl9tZXRyaWNzIiwgU3RyaW5nVHlwZSgpLCBUcnVlKSwKICAgIFN0cnVjdEZpZWxkKCJ0YXJnZXRfb3BlcmF0aW9uX21ldHJpY3MiLCBTdHJpbmdUeXBlKCksIFRydWUpCl0pCgpkZWYgbG9nX21lc3NhZ2UobGV2ZWw6IHN0ciwgbWVzc2FnZTogc3RyKToKICAgICIiIgogICAgTG9ncyBhIG1lc3NhZ2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZ2xvYmFsIGxvZyBsZXZlbC4KCiAgICBBcmdzOgogICAgLSBsZXZlbCAoc3RyKTogVGhlIGxldmVsIG9mIHRoZSBtZXNzYWdlICgnZGVidWcnLCAnaW5mbycsIG9yICdlcnJvcicpLgogICAgLSBtZXNzYWdlIChzdHIpOiBUaGUgbWVzc2FnZSB0byBiZSBsb2dnZWQuCiAgICAiIiIKICAgIGdsb2JhbCBMT0dfTEVWRUwKICAgIGxldmVscyA9IHsiZGVidWciOiAxLCAiaW5mbyI6IDIsICJlcnJvciI6IDN9ICAjIExvZ2dpbmcgbGV2ZWxzIHByaW9yaXR5CgogICAgIyBMb2cgdGhlIG1lc3NhZ2Ugb25seSBpZiB0aGUgbGV2ZWwgaXMgZXF1YWwgdG8gb3IgaGlnaGVyIHRoYW4gdGhlIGN1cnJlbnQgbG9nIGxldmVsCiAgICBpZiBsZXZlbHMuZ2V0KGxldmVsLCAwKSA+PSBsZXZlbHMuZ2V0KExPR19MRVZFTCwgMCk6CiAgICAgICAgcHJpbnQoZiJ7bGV2ZWwudXBwZXIoKX06IHttZXNzYWdlfSIpCgpkZWYgbG9hZF9jb25maWcoZmlsZV9wYXRoOiBzdHIpIC0+IGRpY3Q6CiAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAncicpIGFzIGZpbGU6CiAgICAgICAgY29uZmlnID0ganNvbi5sb2FkKGZpbGUpCiAgICByZXR1cm4gY29uZmlnCgpkZWYgZmluZF93b3Jrc3BhY2VfY29uZmlnKHdvcmtzcGFjZV9uYW1lOiBzdHIsIHZhbGlkYXRlZF9jb25maWc6IGRpY3QpIC0+IGRpY3Q6CiAgICAiIiIKICAgIEZpbmRzIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHdvcmtzcGFjZSBjb25maWd1cmF0aW9uIGZyb20gdGhlIHZhbGlkYXRlZCBjb25maWcuCgogICAgQXJnczoKICAgIC0gd29ya3NwYWNlX25hbWUgKHN0cik6IFRoZSBuYW1lIG9mIHRoZSB3b3Jrc3BhY2UuCiAgICAtIHZhbGlkYXRlZF9jb25maWcgKGRpY3QpOiBUaGUgdmFsaWRhdGVkIGNvbmZpZ3VyYXRpb24gY29udGFpbmluZyB3b3Jrc3BhY2UgZGV0YWlscy4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBUaGUgd29ya3NwYWNlIGNvbmZpZ3VyYXRpb24gaWYgZm91bmQsIG90aGVyd2lzZSBOb25lLgogICAgIiIiCiAgICBmb3Igd29ya3NwYWNlIGluIHZhbGlkYXRlZF9jb25maWdbJ3dvcmtzcGFjZXMnXToKICAgICAgICBpZiB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ10gPT0gd29ya3NwYWNlX25hbWU6CiAgICAgICAgICAgIHJldHVybiB3b3Jrc3BhY2UKICAgIHJldHVybiBOb25lCiAgICAKZGVmIHVwZGF0ZV9tZXRhZGF0YV9zdGF0dXMobWV0YWRhdGFfdGFibGVfcGF0aDogc3RyLCB3b3Jrc3BhY2VfbmFtZTogc3RyLCBncm91cF9uYW1lOiBzdHIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0ciA9IE5vbmUsIHN5bmNfdGltZTogaW50ID0gTm9uZSwgc3luY190aW1lX3RvX3JlZ2lvbjogaW50ID0gTm9uZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb246IGludCA9IE5vbmUsIHN5bmNfcmVhc29uOiBzdHIgPSBOb25lLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX29wZXJhdGlvbl9tZXRyaWNzOiBkaWN0ID0gTm9uZSwgdGFyZ2V0X29wZXJhdGlvbl9tZXRyaWNzOiBkaWN0ID0gTm9uZSk6CiAgICAiIiIKICAgIFVwZGF0ZXMgdGhlIG1ldGFkYXRhIHRhYmxlIHdpdGggdGhlIGN1cnJlbnQgc3RhdHVzLCBzeW5jIHRpbWVzdGFtcHMsIGFuZCBtZXRyaWNzIGZvciB0aGUgcmVnaW9ucy4KCiAgICBBcmdzOgogICAgLSBtZXRhZGF0YV90YWJsZV9wYXRoIChzdHIpOiBQYXRoIHRvIHRoZSBtZXRhZGF0YSBEZWx0YSB0YWJsZS4KICAgIC0gd29ya3NwYWNlX25hbWUgKHN0cik6IFRoZSB3b3Jrc3BhY2UgbmFtZSBvZiB0aGUgZ3JvdXAuCiAgICAtIGdyb3VwX25hbWUgKHN0cik6IFRoZSBncm91cCBuYW1lLgogICAgLSBzdGF0dXMgKHN0ciwgb3B0aW9uYWwpOiBUaGUgc3luYyBzdGF0dXMgKCdJbiBQcm9ncmVzcycgb3IgJ1N1Y2Nlc3MnKS4KICAgIC0gc3luY190aW1lIChpbnQsIG9wdGlvbmFsKTogVGhlIGxhc3Qgc3luYyB0aW1lIGluIGVwb2NoIGZvcm1hdC4KICAgIC0gc3luY19yZWFzb24gKHN0ciwgb3B0aW9uYWwpOiBUaGUgcmVhc29uIGZvciB0aGUgc3luYy4KICAgIC0gc3luY190aW1lX3RvX3JlZ2lvbiAoaW50LCBvcHRpb25hbCk6IFRoZSBzeW5jIHRpbWVzdGFtcCBmb3IgdGhlICJ0byIgcmVnaW9uIGluIGVwb2NoIGZvcm1hdC4KICAgIC0gc3luY190aW1lX2luX3JlZ2lvbiAoaW50LCBvcHRpb25hbCk6IFRoZSBzeW5jIHRpbWVzdGFtcCBmb3IgdGhlICJpbiIgcmVnaW9uIGluIGVwb2NoIGZvcm1hdC4KICAgIC0gc291cmNlX29wZXJhdGlvbl9tZXRyaWNzIChkaWN0LCBvcHRpb25hbCk6IE1ldHJpY3MgcmVsYXRlZCB0byB0aGUgc291cmNlIG9wZXJhdGlvbnMuCiAgICAtIHRhcmdldF9vcGVyYXRpb25fbWV0cmljcyAoZGljdCwgb3B0aW9uYWwpOiBNZXRyaWNzIHJlbGF0ZWQgdG8gdGhlIHRhcmdldCBvcGVyYXRpb25zLgoKICAgIFJldHVybnM6CiAgICAtIE5vbmUKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgU3RhcnQgY29uc3RydWN0aW5nIHRoZSBTUUwgcXVlcnkKICAgICAgICB1cGRhdGVfcXVlcnkgPSBmIlVQREFURSBkZWx0YS5ge21ldGFkYXRhX3RhYmxlX3BhdGh9YCBTRVQgIgogICAgICAgIAogICAgICAgICMgTGlzdCB0byBob2xkIGNvbHVtbiB1cGRhdGUgZXhwcmVzc2lvbnMKICAgICAgICB1cGRhdGVfY29sdW1ucyA9IFtdCiAgICAgICAgCiAgICAgICAgIyBBZGQgbm9uLU5vbmUgdmFsdWVzIHRvIHRoZSB1cGRhdGUgcXVlcnkKICAgICAgICBpZiBzdGF0dXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zLmFwcGVuZChmInN5bmNfc3RhdHVzID0gJ3tzdGF0dXN9JyIpCiAgICAgICAgaWYgc3luY190aW1lIGlzIG5vdCBOb25lOgogICAgICAgICAgICB1cGRhdGVfY29sdW1ucy5hcHBlbmQoZiJsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUgPSB7c3luY190aW1lfSIpCiAgICAgICAgaWYgc3luY190aW1lX3RvX3JlZ2lvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYic3luY190aW1lX3RvX3JlZ2lvbiA9IHtzeW5jX3RpbWVfdG9fcmVnaW9ufSIpCiAgICAgICAgaWYgc3luY190aW1lX2luX3JlZ2lvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYic3luY190aW1lX2luX3JlZ2lvbiA9IHtzeW5jX3RpbWVfaW5fcmVnaW9ufSIpCiAgICAgICAgaWYgc3luY19yZWFzb24gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHVwZGF0ZV9jb2x1bW5zLmFwcGVuZChmInN5bmNfcmVhc29uID0gJ3tzeW5jX3JlYXNvbn0nIikKICAgICAgICAKICAgICAgICAjIEhhbmRsZSBzb3VyY2Vfb3BlcmF0aW9uX21ldHJpY3MsIGNvbnZlcnRpbmcgdG8gSlNPTiBzdHJpbmcgaWYgcHJvdmlkZWQKICAgICAgICBpZiBzb3VyY2Vfb3BlcmF0aW9uX21ldHJpY3MgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNvdXJjZV9tZXRyaWNzX2pzb24gPSBqc29uLmR1bXBzKHNvdXJjZV9vcGVyYXRpb25fbWV0cmljcykKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYic291cmNlX29wZXJhdGlvbl9tZXRyaWNzID0gJ3tzb3VyY2VfbWV0cmljc19qc29ufSciKQogICAgICAgIAogICAgICAgICMgSGFuZGxlIHRhcmdldF9vcGVyYXRpb25fbWV0cmljcywgY29udmVydGluZyB0byBKU09OIHN0cmluZyBpZiBwcm92aWRlZAogICAgICAgIGlmIHRhcmdldF9vcGVyYXRpb25fbWV0cmljcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgdGFyZ2V0X21ldHJpY3NfanNvbiA9IGpzb24uZHVtcHModGFyZ2V0X29wZXJhdGlvbl9tZXRyaWNzKQogICAgICAgICAgICB1cGRhdGVfY29sdW1ucy5hcHBlbmQoZiJ0YXJnZXRfb3BlcmF0aW9uX21ldHJpY3MgPSAne3RhcmdldF9tZXRyaWNzX2pzb259JyIpCiAgICAgICAgCiAgICAgICAgIyBKb2luIGFsbCB1cGRhdGUgY29sdW1ucyB0byBmb3JtIHRoZSBTRVQgcGFydCBvZiB0aGUgU1FMIHF1ZXJ5CiAgICAgICAgdXBkYXRlX3F1ZXJ5ICs9ICIsICIuam9pbih1cGRhdGVfY29sdW1ucykKICAgICAgICAKICAgICAgICAjIEFkZCBXSEVSRSBjbGF1c2UgdG8gZmlsdGVyIGJ5IHdvcmtzcGFjZV9uYW1lIGFuZCBncm91cF9uYW1lCiAgICAgICAgdXBkYXRlX3F1ZXJ5ICs9IGYiIFdIRVJFIHdvcmtzcGFjZV9uYW1lID0gJ3t3b3Jrc3BhY2VfbmFtZX0nIEFORCBncm91cF9uYW1lID0gJ3tncm91cF9uYW1lfSciCiAgICAgICAgCiAgICAgICAgIyBMb2cgYW5kIGV4ZWN1dGUgdGhlIHVwZGF0ZSBxdWVyeQogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiRXhlY3V0aW5nIFNRTCB1cGRhdGU6IHt1cGRhdGVfcXVlcnl9IikKICAgICAgICBleGVjdXRlX3dpdGhfcmV0cnkodXBkYXRlX3F1ZXJ5KQogICAgICAgIAogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiTWV0YWRhdGEgdXBkYXRlZCBmb3Ige3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX0gd2l0aCB0aGUgZm9sbG93aW5nOiB7dXBkYXRlX2NvbHVtbnN9IikKICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsIGYiRXJyb3IgdXBkYXRpbmcgbWV0YWRhdGE6IHtzdHIoZSl9IikKICAgICAgICByYWlzZQoKZGVmIGNoZWNrX2ZzX3BhdGgocGF0aDogc3RyKSAtPiBib29sOgogICAgIiIiCiAgICBDaGVjayBpZiB0aGUgcHJvZ3JhbSBoYXMgYWNjZXNzIHRvIGNyZWF0ZSBhbmQgZGVsZXRlIGEgZmlsZSBhdCB0aGUgZ2l2ZW4gc3RvcmFnZSBwYXRoLgoKICAgIEFyZ3M6CiAgICAtIHBhdGggKHN0cik6IFRoZSBzdG9yYWdlIHBhdGggdG8gY2hlY2suCgogICAgUmV0dXJuczoKICAgIC0gYm9vbDogVHJ1ZSBpZiB0aGUgcHJvZ3JhbSBoYXMgd3JpdGUgYWNjZXNzLCBGYWxzZSBvdGhlcndpc2UuCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEdlbmVyYXRlIGEgdGVtcG9yYXJ5IGZpbGUgbmFtZQogICAgICAgIHRlbXBfZmlsZV9wYXRoID0gZiJ7cGF0aH0vdGVtcF9hY2Nlc3NfY2hlY2sudHh0IgoKICAgICAgICAjIFdyaXRlIGEgdGVtcG9yYXJ5IGZpbGUgdG8gdGhlIHN0b3JhZ2UgcGF0aAogICAgICAgIGRidXRpbHMuZnMucHV0KHRlbXBfZmlsZV9wYXRoLCAidGVzdCIsIG92ZXJ3cml0ZT1UcnVlKQoKICAgICAgICAjIENvbmZpcm0gdGhlIGZpbGUgd2FzIHdyaXR0ZW4gYnkgY2hlY2tpbmcgaXRzIGV4aXN0ZW5jZQogICAgICAgIGlmIGRidXRpbHMuZnMubHMocGF0aCk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJBY2Nlc3MgY2hlY2sgc3VjY2Vzc2Z1bCBhdCBwYXRoOiB7cGF0aH0iKQoKICAgICAgICAgICAgIyBDbGVhbiB1cCBieSBkZWxldGluZyB0aGUgdGVtcG9yYXJ5IGZpbGUKICAgICAgICAgICAgZGJ1dGlscy5mcy5ybSh0ZW1wX2ZpbGVfcGF0aCkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiQ291bGQgbm90IGNvbmZpcm0gdGhlIGNyZWF0aW9uIG9mIHRoZSBmaWxlIGF0IHBhdGg6IHtwYXRofSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsZiJBY2Nlc3MgY2hlY2sgZmFpbGVkIGF0IHBhdGg6IHtwYXRofS4gRXJyb3I6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgpkZWYgbG9hZF9tZXRhZGF0YV90YWJsZShwYXRoOiBzdHIpIC0+IGRpY3Q6CiAgICAiIiIKICAgIExvYWQgdGhlIG1ldGFkYXRhIHRhYmxlIGZyb20gdGhlIGdpdmVuIHBhdGggYW5kIGNvbnZlcnQgaXQgaW50byBhIGRpY3Rpb25hcnkuCgogICAgQXJnczoKICAgIC0gcGF0aCAoc3RyKTogVGhlIHBhdGggd2hlcmUgdGhlIG1ldGFkYXRhIHRhYmxlIGlzIHN0b3JlZC4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBUaGUgbWV0YWRhdGEgdGFibGUgYXMgYSBkaWN0aW9uYXJ5LCBzdHJ1Y3R1cmVkIGFzOgogICAgICB7CiAgICAgICAgKHdvcmtzcGFjZV9uYW1lLCBncm91cF9uYW1lKTogewogICAgICAgICAgICAid29ya2Zsb3dfbmFtZSI6IDx3b3JrZmxvd19uYW1lPiwKICAgICAgICAgICAgIndvcmtmbG93X2lkIjogPHdvcmtmbG93X2lkPiwKICAgICAgICAgICAgInRhYmxlcyI6IFs8dGFibGUxPiwgPHRhYmxlMj4sIC4uLl0sCiAgICAgICAgICAgICJ2YWxpZGF0ZWQiOiA8dmFsaWRhdGVkX3N0YXR1cz4sCiAgICAgICAgICAgICJsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUiOiA8bGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lPiwKICAgICAgICAgICAgInN5bmNfc3RhdHVzIjogPHN5bmNfc3RhdHVzPiwKICAgICAgICAgICAgInN5bmNfdGltZV90b19yZWdpb24iOiA8c3luY190aW1lX3RvX3JlZ2lvbj4sCiAgICAgICAgICAgICJzeW5jX3RpbWVfaW5fcmVnaW9uIjogPHN5bmNfdGltZV9pbl9yZWdpb24+CiAgICAgICAgfQogICAgICB9CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIENoZWNrIGlmIHRoZSBwYXRoIGV4aXN0cwogICAgICAgIGRidXRpbHMuZnMubHMocGF0aCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlBhdGggZG9lcyBub3QgZXhpc3Q6IHtwYXRofS4gQ3JlYXRpbmcgYSBuZXcgbWV0YWRhdGEgdGFibGUuIikKICAgICAgICBjcmVhdGVfZW1wdHlfbWV0YWRhdGFfdGFibGUocGF0aCkKICAgICAgICByZXR1cm4ge30KICAgIAogICAgdHJ5OgogICAgICAgICMgTG9hZCB0aGUgRGVsdGEgdGFibGUgaW50byBhIERhdGFGcmFtZQogICAgICAgIGRmID0gc3BhcmsucmVhZC5mb3JtYXQoImRlbHRhIikubG9hZChwYXRoKQoKICAgICAgICAjIEluaXRpYWxpemUgYW4gZW1wdHkgZGljdGlvbmFyeSB0byBob2xkIHRoZSBtZXRhZGF0YQogICAgICAgIG1ldGFkYXRhX2RpY3QgPSB7fQoKICAgICAgICAjIEl0ZXJhdGUgb3ZlciB0aGUgRGF0YUZyYW1lIHJvd3MgYW5kIHBvcHVsYXRlIHRoZSBkaWN0aW9uYXJ5CiAgICAgICAgZm9yIHJvdyBpbiBkZi5jb2xsZWN0KCk6CiAgICAgICAgICAgIHdvcmtzcGFjZV9uYW1lID0gcm93Wyd3b3Jrc3BhY2VfbmFtZSddCiAgICAgICAgICAgIGdyb3VwX25hbWUgPSByb3dbJ2dyb3VwX25hbWUnXQogICAgICAgICAgICB3b3JrZmxvd19uYW1lID0gcm93Wyd3b3JrZmxvd19uYW1lJ10KICAgICAgICAgICAgd29ya2Zsb3dfaWQgPSByb3dbJ3dvcmtmbG93X2lkJ10KICAgICAgICAgICAgdGFibGVzID0gcm93Wyd0YWJsZXMnXQogICAgICAgICAgICB2YWxpZGF0ZWQgPSByb3dbJ3ZhbGlkYXRlZCddCiAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSA9IHJvd1snbGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lJ10KICAgICAgICAgICAgc3luY19zdGF0dXMgPSByb3dbJ3N5bmNfc3RhdHVzJ10KICAgICAgICAgICAgc3luY190aW1lX3RvX3JlZ2lvbiA9IHJvd1snc3luY190aW1lX3RvX3JlZ2lvbiddCiAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb24gPSByb3dbJ3N5bmNfdGltZV9pbl9yZWdpb24nXQoKICAgICAgICAgICAgIyBBZGQgdGhlIG1ldGFkYXRhIHRvIHRoZSBkaWN0aW9uYXJ5IHdpdGggZm9ybWF0dGVkIHRpbWVzdGFtcHMKICAgICAgICAgICAgbWV0YWRhdGFfZGljdFsod29ya3NwYWNlX25hbWUsIGdyb3VwX25hbWUpXSA9IHsKICAgICAgICAgICAgICAgICJ3b3JrZmxvd19uYW1lIjogd29ya2Zsb3dfbmFtZSwKICAgICAgICAgICAgICAgICJ3b3JrZmxvd19pZCI6IHdvcmtmbG93X2lkLAogICAgICAgICAgICAgICAgInRhYmxlcyI6IHRhYmxlcywKICAgICAgICAgICAgICAgICJ2YWxpZGF0ZWQiOiB2YWxpZGF0ZWQsCiAgICAgICAgICAgICAgICAibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lIjogbGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lLAogICAgICAgICAgICAgICAgInN5bmNfc3RhdHVzIjogc3luY19zdGF0dXMsCiAgICAgICAgICAgICAgICAic3luY190aW1lX3RvX3JlZ2lvbiI6IHN5bmNfdGltZV90b19yZWdpb24sCiAgICAgICAgICAgICAgICAic3luY190aW1lX2luX3JlZ2lvbiI6IHN5bmNfdGltZV9pbl9yZWdpb24KICAgICAgICAgICAgfQoKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiTWV0YWRhdGEgdGFibGUgbG9hZGVkIHN1Y2Nlc3NmdWxseSBmcm9tOiB7cGF0aH0iKQogICAgICAgIHJldHVybiBtZXRhZGF0YV9kaWN0CgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvciBsb2FkaW5nIG1ldGFkYXRhIHRhYmxlIGZyb20gcGF0aDoge3BhdGh9LiBFcnJvcjoge2V9IikKICAgICAgICByZXR1cm4ge30KCmRlZiBjcmVhdGVfZW1wdHlfbWV0YWRhdGFfdGFibGUocGF0aDogc3RyKToKICAgICIiIgogICAgQ3JlYXRlcyBhbiBlbXB0eSBtZXRhZGF0YSBEZWx0YSB0YWJsZSBhdCB0aGUgc3BlY2lmaWVkIHBhdGguCgogICAgQXJnczoKICAgIC0gcGF0aCAoc3RyKTogVGhlIHBhdGggd2hlcmUgdGhlIERlbHRhIHRhYmxlIHdpbGwgYmUgY3JlYXRlZC4KICAgICIiIgogICAgCiAgICAjIENyZWF0ZSBhbiBlbXB0eSBEYXRhRnJhbWUgd2l0aCB0aGUgZGVmaW5lZCBzY2hlbWEKICAgIGVtcHR5X2RmID0gc3BhcmsuY3JlYXRlRGF0YUZyYW1lKFtdLCBzY2hlbWE9c2NoZW1hKQoKICAgICMgV3JpdGUgdGhlIGVtcHR5IERhdGFGcmFtZSBhcyBhIERlbHRhIHRhYmxlCiAgICBlbXB0eV9kZi53cml0ZS5mb3JtYXQoImRlbHRhIikubW9kZSgib3ZlcndyaXRlIikuc2F2ZShwYXRoKQogICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVtcHR5IG1ldGFkYXRhIHRhYmxlIGNyZWF0ZWQgYXQ6IHtwYXRofSIpCgpkZWYgZ2V0X2RhdGFicmlja3Nfam9ic19pbmZvKGluc3RhbmNlX3VybDogc3RyLCBwYXRfc2NvcGU6IHN0ciwgcGF0X3Rva2VuOiBzdHIsIHdvcmtmbG93X25hbWVzOiBsaXN0KSAtPiBkaWN0OgogICAgIiIiCiAgICBSZXRyaWV2ZXMgam9iIGluZm9ybWF0aW9uIGZyb20gRGF0YWJyaWNrcyBSRVNUIEFQSSBmb3IgYSBsaXN0IG9mIHdvcmtmbG93cyB1c2luZyBBUEkgdmVyc2lvbiAyLjEgd2l0aCBwYWdpbmF0aW9uLgoKICAgIEFyZ3M6CiAgICAtIGluc3RhbmNlX3VybCAoc3RyKTogVGhlIFVSTCBvZiB0aGUgRGF0YWJyaWNrcyBpbnN0YW5jZS4KICAgIC0gcGF0X3Rva2VuIChzdHIpOiBUaGUgUEFUIHRva2VuIGZvciBhdXRoZW50aWNhdGlvbi4KICAgIC0gd29ya2Zsb3dfbmFtZXMgKGxpc3QpOiBBIGxpc3Qgb2Ygd29ya2Zsb3cvam9iIG5hbWVzIHRvIHJldHJpZXZlIGluZm9ybWF0aW9uIGZvci4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBBIGRpY3Rpb25hcnkgd2l0aCB3b3JrZmxvdyBuYW1lcyBhcyBrZXlzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIGpvYiBJRHMgYXMgdmFsdWVzLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgcGF0ID0gcmV0cmlldmVfcGF0X3Rva2VuKHBhdF9zY29wZSwgcGF0X3Rva2VuKQogICAgICAgICMgQ29uc3RydWN0IHRoZSBBUEkgZW5kcG9pbnQgVVJMIGZvciBKb2JzIEFQSSAyLjEKICAgICAgICBlbmRwb2ludCA9IGYie2luc3RhbmNlX3VybH0vYXBpLzIuMS9qb2JzL2xpc3QiCgogICAgICAgICMgU2V0IHVwIHRoZSBoZWFkZXJzIGZvciB0aGUgQVBJIHJlcXVlc3QKICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtwYXR9IgogICAgICAgIH0KCiAgICAgICAgIyBJbml0aWFsaXplIHZhcmlhYmxlcyBmb3IgcGFnaW5hdGlvbgogICAgICAgIGpvYnNfaW5mbyA9IHt9CiAgICAgICAgaGFzX21vcmUgPSBUcnVlCiAgICAgICAgb2Zmc2V0ID0gMAoKICAgICAgICAjIFBhZ2luYXRlIHRocm91Z2ggYWxsIGpvYnMKICAgICAgICB3aGlsZSBoYXNfbW9yZSBhbmQgbGVuKGpvYnNfaW5mbykgPCBsZW4od29ya2Zsb3dfbmFtZXMpOgogICAgICAgICAgICAjIEluY2x1ZGUgdGhlIG9mZnNldCBwYXJhbWV0ZXIgdG8gaGFuZGxlIHBhZ2luYXRpb24KICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgImxpbWl0IjogMjUsICAjIEFkanVzdCBsaW1pdCB0byBtYXRjaCBBUEkgcmVxdWlyZW1lbnRzCiAgICAgICAgICAgICAgICAib2Zmc2V0Ijogb2Zmc2V0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoZW5kcG9pbnQsIGhlYWRlcnM9aGVhZGVycywgcGFyYW1zPXBhcmFtcykKICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCgogICAgICAgICAgICAjIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICBqb2JzID0gcmVzdWx0LmdldCgiam9icyIsIFtdKQoKICAgICAgICAgICAgIyBTZWFyY2ggZm9yIHRoZSBqb2JzIGJ5IG5hbWUgYW5kIGNvbGxlY3QgaW5mb3JtYXRpb24KICAgICAgICAgICAgZm9yIGpvYiBpbiBqb2JzOgogICAgICAgICAgICAgICAgam9iX25hbWUgPSBqb2IuZ2V0KCJzZXR0aW5ncyIsIHt9KS5nZXQoIm5hbWUiKQogICAgICAgICAgICAgICAgaWYgam9iX25hbWUgaW4gd29ya2Zsb3dfbmFtZXMgYW5kIGpvYl9uYW1lIG5vdCBpbiBqb2JzX2luZm86CiAgICAgICAgICAgICAgICAgICAgam9ic19pbmZvW2pvYl9uYW1lXSA9IGpvYi5nZXQoImpvYl9pZCIpCiAgICAgICAgICAgICAgICAgICAgIyBJZiB3ZSd2ZSBmb3VuZCBhbGwgcmVxdWVzdGVkIGpvYnMsIHJldHVybiBlYXJseQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihqb2JzX2luZm8pID09IGxlbih3b3JrZmxvd19uYW1lcyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqb2JzX2luZm8KCiAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhlcmUgYXJlIG1vcmUgam9icyB0byByZXRyaWV2ZQogICAgICAgICAgICBoYXNfbW9yZSA9IGxlbihqb2JzKSA9PSAyNSAgIyBBZGp1c3QgdG8gdGhlIGxpbWl0IHVzZWQKICAgICAgICAgICAgb2Zmc2V0ICs9IDI1ICAjIEluY3JlbWVudCB0aGUgb2Zmc2V0IGZvciB0aGUgbmV4dCBwYWdlCgogICAgICAgICMgUmV0dXJuIHRoZSBjb2xsZWN0ZWQgam9iIGluZm9ybWF0aW9uCiAgICAgICAgcmV0dXJuIGpvYnNfaW5mbwoKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiRXJyb3IgZmV0Y2hpbmcgam9iIGluZm8gZm9yIHdvcmtmbG93cyAne3dvcmtmbG93X25hbWVzfSc6IHtlfSIpCiAgICAgICAgcmV0dXJuIHt9CgpkZWYgam9iX3N1Y2Nlc3NmdWxfcnVuX2FmdGVyX2xhc3RfcnVuKGluc3RhbmNlX3VybDogc3RyLCBwYXRfdG9rZW46IHN0ciwgam9iX2lkczogbGlzdCwgbGFzdF9ydW5fdGltZXN0YW1wOiBpbnQgPSBOb25lKSAtPiBkaWN0OgogICAgIiIiCiAgICBDaGVja3MgaWYgYW55IG9mIHRoZSBnaXZlbiBEYXRhYnJpY2tzIGpvYnMgaGF2ZSBoYWQgc3VjY2Vzc2Z1bCBydW5zIGFmdGVyIHRoZSBsYXN0IHJlY29yZGVkIHJ1biB0aW1lc3RhbXAuCgogICAgQXJnczoKICAgIC0gaW5zdGFuY2VfdXJsIChzdHIpOiBUaGUgVVJMIG9mIHRoZSBEYXRhYnJpY2tzIGluc3RhbmNlLgogICAgLSBwYXRfdG9rZW4gKHN0cik6IFRoZSBQQVQgdG9rZW4gZm9yIGF1dGhlbnRpY2F0aW9uLgogICAgLSBqb2JfaWRzIChsaXN0KTogQSBsaXN0IG9mIGpvYiBJRHMgdG8gY2hlY2suCiAgICAtIGxhc3RfcnVuX3RpbWVzdGFtcCAoaW50LCBvcHRpb25hbCk6IFRoZSB0aW1lc3RhbXAgb2YgdGhlIGxhc3QgcmVjb3JkZWQgcnVuIGluIGVwb2NoIHRpbWUgKG1pbGxpc2Vjb25kcykuIAogICAgICBJZiBOb25lLCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIGxhdGVzdCBzdWNjZXNzZnVsIHJ1biB3aXRob3V0IGNvbXBhcmlzb24uCgogICAgUmV0dXJuczoKICAgIC0gZGljdDogQSBkaWN0aW9uYXJ5IHdoZXJlIHRoZSBrZXlzIGFyZSBqb2IgSURzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgbGFzdCBzdWNjZXNzZnVsIHJ1biBlbmQgdGltZXN0YW1wcyBpbiAKICAgICAgZXBvY2ggZm9ybWF0IChtaWxsaXNlY29uZHMpLiBJZiBubyBzdWNjZXNzZnVsIHJ1biBpcyBmb3VuZCBhZnRlciB0aGUgZ2l2ZW4gdGltZXN0YW1wLCB0aGUgdmFsdWUgd2lsbCBiZSBOb25lLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7cGF0X3Rva2VufSIKICAgICAgICB9CgogICAgICAgIHN1Y2Nlc3NmdWxfcnVucyA9IHt9CgogICAgICAgICMgSXRlcmF0ZSBvdmVyIGVhY2ggam9iX2lkCiAgICAgICAgZm9yIGpvYl9pZCBpbiBqb2JfaWRzOgogICAgICAgICAgICAjIENvbnN0cnVjdCB0aGUgQVBJIGVuZHBvaW50IFVSTCBmb3IgbGlzdGluZyBydW5zIG9mIHRoZSBzcGVjaWZpYyBqb2IKICAgICAgICAgICAgZW5kcG9pbnQgPSBmIntpbnN0YW5jZV91cmx9L2FwaS8yLjEvam9icy9ydW5zL2xpc3QiCgogICAgICAgICAgICAjIERlZmluZSB0aGUgcGFyYW1ldGVycyBmb3IgZmlsdGVyaW5nIGpvYiBydW5zCiAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICJqb2JfaWQiOiBqb2JfaWQsCiAgICAgICAgICAgICAgICAiY29tcGxldGVkX29ubHkiOiAidHJ1ZSIsCiAgICAgICAgICAgICAgICAibGltaXQiOiAyNSwgCiAgICAgICAgICAgICAgICAic3RhcnRfdGltZV9mcm9tIjogbGFzdF9ydW5fdGltZXN0YW1wCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgTWFrZSB0aGUgcmVxdWVzdCB0byB0aGUgRGF0YWJyaWNrcyBKb2JzIEFQSSB0byBsaXN0IGpvYiBydW5zCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGVuZHBvaW50LCBoZWFkZXJzPWhlYWRlcnMsIHBhcmFtcz1wYXJhbXMpCiAgICAgICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKSAgIyBSYWlzZSBhbiBleGNlcHRpb24gZm9yIEhUVFAgZXJyb3JzCgogICAgICAgICAgICAjIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlCiAgICAgICAgICAgIHJ1bnMgPSByZXNwb25zZS5qc29uKCkuZ2V0KCJydW5zIiwgW10pCgogICAgICAgICAgICAjIFZhcmlhYmxlIHRvIHN0b3JlIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCBydW4gZW5kIHRpbWUgYWZ0ZXIgbGFzdF9ydW5fdGltZXN0YW1wCiAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fZW5kX3RpbWUgPSBOb25lCgogICAgICAgICAgICAjIEl0ZXJhdGUgb3ZlciB0aGUgcnVucyBhbmQgZmluZCB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgcnVuIGFmdGVyIHRoZSBsYXN0IHJ1bgogICAgICAgICAgICBmb3IgcnVuIGluIHJ1bnM6CiAgICAgICAgICAgICAgICBydW5fZW5kX3RpbWUgPSBydW4uZ2V0KCJlbmRfdGltZSIsIDApICAjIFRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHMKICAgICAgICAgICAgICAgIHJ1bl9yZXN1bHRfc3RhdGUgPSBydW4uZ2V0KCJzdGF0ZSIsIHt9KS5nZXQoInJlc3VsdF9zdGF0ZSIpCgogICAgICAgICAgICAgICAgaWYgcnVuX3Jlc3VsdF9zdGF0ZSA9PSAiU1VDQ0VTUyI6CiAgICAgICAgICAgICAgICAgICAgaWYgbGFzdF9ydW5fdGltZXN0YW1wIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICMgSWYgbm8gbGFzdCBydW4gdGltZXN0YW1wIGlzIHByb3ZpZGVkLCB0cmFjayB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgcnVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fZW5kX3RpbWUgaXMgTm9uZSBvciBydW5fZW5kX3RpbWUgPiBsYXN0X3N1Y2Nlc3NmdWxfcnVuX2VuZF90aW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3J1bl9lbmRfdGltZSA9IHJ1bl9lbmRfdGltZQogICAgICAgICAgICAgICAgICAgIGVsaWYgcnVuX2VuZF90aW1lID4gbGFzdF9ydW5fdGltZXN0YW1wOgogICAgICAgICAgICAgICAgICAgICAgICAjIElmIHRoZSBydW4gaXMgYWZ0ZXIgdGhlIGxhc3Qga25vd24gcnVuIHRpbWVzdGFtcCwgdHJhY2sgdGhlIGxhdGVzdCBzdWNjZXNzZnVsIHJ1bgogICAgICAgICAgICAgICAgICAgICAgICBpZiBsYXN0X3N1Y2Nlc3NmdWxfcnVuX2VuZF90aW1lIGlzIE5vbmUgb3IgcnVuX2VuZF90aW1lID4gbGFzdF9zdWNjZXNzZnVsX3J1bl9lbmRfdGltZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fZW5kX3RpbWUgPSBydW5fZW5kX3RpbWUKCiAgICAgICAgICAgICMgQWRkIHRoZSByZXN1bHQgdG8gdGhlIGRpY3Rpb25hcnkKICAgICAgICAgICAgc3VjY2Vzc2Z1bF9ydW5zW2pvYl9pZF0gPSBsYXN0X3N1Y2Nlc3NmdWxfcnVuX2VuZF90aW1lCgogICAgICAgIHJldHVybiBzdWNjZXNzZnVsX3J1bnMKCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJFcnJvciBjaGVja2luZyBqb2IgcnVuczoge2V9IikKICAgICAgICByZXR1cm4ge30KCmRlZiByZXRyaWV2ZV9wYXRfdG9rZW4oc2VjcmV0X3Njb3BlOiBzdHIsIHBhdF9rZXk6IHN0cikgLT4gc3RyOgogICAgIiIiCiAgICBSZXRyaWV2ZXMgdGhlIFBlcnNvbmFsIEFjY2VzcyBUb2tlbiAoUEFUKSBmb3IgYSBzcGVjaWZpYyB3b3Jrc3BhY2UgZnJvbSB0aGUgRGF0YWJyaWNrcyBzZWNyZXQgc3RvcmUuCgogICAgQXJnczoKICAgIC0gc2VjcmV0X3Njb3BlIChzdHIpOiBUaGUgc2NvcGUgd2l0aGluIHRoZSBzZWNyZXQgc3RvcmUgd2hlcmUgdGhlIFBBVCBpcyBzdG9yZWQuCiAgICAtIHBhdF9rZXkgKHN0cik6IFRoZSBrZXkgaWRlbnRpZnlpbmcgdGhlIFBBVCB3aXRoaW4gdGhlIHNlY3JldCBzY29wZS4KCiAgICBSZXR1cm5zOgogICAgLSBzdHI6IFRoZSByZXRyaWV2ZWQgUEFUIHRva2VuLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBVc2UgRGF0YWJyaWNrcyB1dGlsaXRpZXMgdG8gZmV0Y2ggdGhlIFBBVCB0b2tlbgogICAgICAgIHBhdF90b2tlbiA9IGRidXRpbHMuc2VjcmV0cy5nZXQoImRyLXRlc3Qtc2NvcGUiLCBrZXk9cGF0X2tleSkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBQQVQgdG9rZW4gZm9yIHNlY3JldCBzY29wZToge3NlY3JldF9zY29wZX0sIGtleToge3BhdF9rZXl9IikKICAgICAgICByZXR1cm4gcGF0X3Rva2VuCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIixmIkVycm9yIHJldHJpZXZpbmcgUEFUIHRva2VuIGZyb20gc2VjcmV0IHNjb3BlOiB7c2VjcmV0X3Njb3BlfSwga2V5OiB7cGF0X2tleX0uIEVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBOb25lCiAgICAKZGVmIGNoZWNrX3RhYmxlKHRhYmxlOiBzdHIpIC0+IGJvb2w6CiAgICAiIiIKICAgIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIHJlYWQgcGVybWlzc2lvbiBvbiBhIHRhYmxlIGJ5IGNoZWNraW5nIGlmIHRoZSB0YWJsZSBleGlzdHMgYW5kIGNhbiBiZSBkZXNjcmliZWQuCgogICAgQXJnczoKICAgIC0gdGFibGUgKHN0cik6IFRoZSBmdWxseSBxdWFsaWZpZWQgbmFtZSBvZiB0aGUgdGFibGUgKGNhdGFsb2cuc2NoZW1hLnRhYmxlX25hbWUpLgoKICAgIFJldHVybnM6CiAgICAtIGJvb2w6IFRydWUgaWYgdGhlIHVzZXIgaGFzIHJlYWQgcGVybWlzc2lvbiwgRmFsc2Ugb3RoZXJ3aXNlLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBpZiB0aGUgdGFibGUgZXhpc3RzIHVzaW5nIFNwYXJrIGNhdGFsb2cKICAgICAgICBpZiBzcGFyay5jYXRhbG9nLnRhYmxlRXhpc3RzKHRhYmxlKToKICAgICAgICAgICAgIyBUcnkgdG8gZGVzY3JpYmUgdGhlIHRhYmxlJ3MgbWV0YWRhdGEgdG8gZW5zdXJlIHJlYWQgYWNjZXNzCiAgICAgICAgICAgIHNwYXJrLmNhdGFsb2cubGlzdENvbHVtbnModGFibGUpCiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJSZWFkIHBlcm1pc3Npb24gY29uZmlybWVkIGZvciB0YWJsZSB7dGFibGV9LiIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIlRhYmxlICd7dGFibGV9JyBkb2VzIG5vdCBleGlzdC4iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiRXJyb3IgY2hlY2tpbmcgcmVhZCBwZXJtaXNzaW9uIGZvciB0YWJsZSAne3RhYmxlfSc6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKZGVmIG1lcmdlX21ldGFkYXRhX2VudHJpZXMobWV0YWRhdGFfdGFibGVfcGF0aDogc3RyLCBuZXdfZW50cmllczogbGlzdCkgLT4gTm9uZToKICAgICIiIgogICAgTWVyZ2UgbmV3IGVudHJpZXMgaW50byB0aGUgRGVsdGEgbWV0YWRhdGEgdGFibGUgdXNpbmcgdGhlIE1FUkdFIElOVE8gU1FMIGNvbW1hbmQuCiAgICBJbnNlcnQgbmV3IGVudHJpZXMsIHVwZGF0ZSBleGlzdGluZyBlbnRyaWVzIG9ubHkgd2hlbiBzcGVjaWZpYyBjb2x1bW5zIGRpZmZlciwgYW5kIGRlbGV0ZSBlbnRyaWVzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0IGluIHRoZSBzb3VyY2UuCgogICAgQXJnczoKICAgIC0gbWV0YWRhdGFfdGFibGVfcGF0aCAoc3RyKTogVGhlIERlbHRhIHRhYmxlIHBhdGggaW4gdGhlIHByaW1hcnkgc3luYyBsb2NhdGlvbi4KICAgIC0gbmV3X2VudHJpZXMgKGxpc3QpOiBBIGxpc3Qgb2YgbmV3IG1ldGFkYXRhIGVudHJpZXMsIGVhY2ggY29udGFpbmluZzoKICAgICAgLSB3b3Jrc3BhY2VfbmFtZSAoc3RyKQogICAgICAtIGdyb3VwX25hbWUgKHN0cikKICAgICAgLSB3b3JrZmxvd19uYW1lIChzdHIpCiAgICAgIC0gd29ya2Zsb3dfaWQgKHN0cikKICAgICAgLSB0YWJsZXMgKGxpc3Qgb2Ygc3RyKQogICAgICAtIHZhbGlkYXRlZCAoYm9vbCkKCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIENvbnZlcnQgdGhlIG5ldyBlbnRyaWVzIGxpc3QgaW50byBhIERhdGFGcmFtZQogICAgICAgIG5ld19lbnRyaWVzX2RmID0gc3BhcmsuY3JlYXRlRGF0YUZyYW1lKG5ld19lbnRyaWVzLCBzY2hlbWE9c2NoZW1hKQogICAgICAgICMgU3RlcCAxOiBDcmVhdGUgYSB0ZW1wb3JhcnkgdmlldyBmcm9tIG5ld19lbnRyaWVzCiAgICAgICAgbmV3X2VudHJpZXNfZGYuY3JlYXRlT3JSZXBsYWNlVGVtcFZpZXcoIm5ld19tZXRhZGF0YSIpCgogICAgICAgICMgU3RlcCAyOiBVc2UgdGhlIE1FUkdFIElOVE8gY29tbWFuZCB0byBtZXJnZSB0aGUgbmV3IGVudHJpZXMgaW50byB0aGUgRGVsdGEgdGFibGUKICAgICAgICBtZXJnZV9zcWwgPSBmIiIiCiAgICAgICAgICAgIE1FUkdFIElOVE8gZGVsdGEuYHttZXRhZGF0YV90YWJsZV9wYXRofWAgQVMgdGFyZ2V0CiAgICAgICAgICAgIFVTSU5HIG5ld19tZXRhZGF0YSBBUyBzb3VyY2UKICAgICAgICAgICAgT04gdGFyZ2V0LndvcmtzcGFjZV9uYW1lID0gc291cmNlLndvcmtzcGFjZV9uYW1lCiAgICAgICAgICAgIEFORCB0YXJnZXQuZ3JvdXBfbmFtZSA9IHNvdXJjZS5ncm91cF9uYW1lCiAgICAgICAgICAgIFdIRU4gTUFUQ0hFRCBBTkQgCiAgICAgICAgICAgICAgICAodGFyZ2V0LndvcmtmbG93X25hbWUgIT0gc291cmNlLndvcmtmbG93X25hbWUKICAgICAgICAgICAgICAgIE9SIHRhcmdldC50YWJsZXMgIT0gc291cmNlLnRhYmxlcwogICAgICAgICAgICAgICAgT1IgdGFyZ2V0LnZhbGlkYXRlZCAhPSBzb3VyY2UudmFsaWRhdGVkKSAKICAgICAgICAgICAgVEhFTiAKICAgICAgICAgICAgICAgIFVQREFURSBTRVQgCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LndvcmtmbG93X25hbWUgPSBzb3VyY2Uud29ya2Zsb3dfbmFtZSwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQudGFibGVzID0gc291cmNlLnRhYmxlcywKICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsaWRhdGVkID0gc291cmNlLnZhbGlkYXRlZCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQubGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3luY19zdGF0dXMgPSBOVUxMLAogICAgICAgICAgICAgICAgICAgIHRhcmdldC5zeW5jX3JlYXNvbiA9IE5VTEwsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN5bmNfdGltZV90b19yZWdpb24gPSBOVUxMLAogICAgICAgICAgICAgICAgICAgIHRhcmdldC5zeW5jX3RpbWVfaW5fcmVnaW9uID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc291cmNlX29wZXJhdGlvbl9tZXRyaWNzID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQudGFyZ2V0X29wZXJhdGlvbl9tZXRyaWNzID0gTlVMTAogICAgICAgICAgICBXSEVOIE5PVCBNQVRDSEVEIFRIRU4KICAgICAgICAgICAgICAgIElOU0VSVCAoCiAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlX25hbWUsIAogICAgICAgICAgICAgICAgICAgIGdyb3VwX25hbWUsIAogICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWUsIAogICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X2lkLCAKICAgICAgICAgICAgICAgICAgICB0YWJsZXMsIAogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlZCwgCiAgICAgICAgICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lLCAKICAgICAgICAgICAgICAgICAgICBzeW5jX3N0YXR1cywKICAgICAgICAgICAgICAgICAgICBzeW5jX3JlYXNvbiwKICAgICAgICAgICAgICAgICAgICBzeW5jX3RpbWVfdG9fcmVnaW9uLAogICAgICAgICAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb24sCiAgICAgICAgICAgICAgICAgICAgc291cmNlX29wZXJhdGlvbl9tZXRyaWNzLAogICAgICAgICAgICAgICAgICAgIHRhcmdldF9vcGVyYXRpb25fbWV0cmljcwogICAgICAgICAgICAgICAgKSBWQUxVRVMgKAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS53b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgc291cmNlLmdyb3VwX25hbWUsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS53b3JrZmxvd19uYW1lLCAKICAgICAgICAgICAgICAgICAgICBzb3VyY2Uud29ya2Zsb3dfaWQsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS50YWJsZXMsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS52YWxpZGF0ZWQsIAogICAgICAgICAgICAgICAgICAgIE5VTEwsIAogICAgICAgICAgICAgICAgICAgIE5VTEwsCiAgICAgICAgICAgICAgICAgICAgTlVMTCwKICAgICAgICAgICAgICAgICAgICBOVUxMLAogICAgICAgICAgICAgICAgICAgIE5VTEwsCiAgICAgICAgICAgICAgICAgICAgTlVMTCwKICAgICAgICAgICAgICAgICAgICBOVUxMCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIFdIRU4gTk9UIE1BVENIRUQgQlkgU09VUkNFIFRIRU4KICAgICAgICAgICAgICAgIERFTEVURQogICAgICAgICIiIgoKICAgICAgICAjIFN0ZXAgMzogRXhlY3V0ZSB0aGUgbWVyZ2UgU1FMCiAgICAgICAgZXhlY3V0ZV93aXRoX3JldHJ5KG1lcmdlX3NxbCkKCiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIk1ldGFkYXRhIHRhYmxlIG1lcmdlZCBzdWNjZXNzZnVsbHkgYXQ6IHttZXRhZGF0YV90YWJsZV9wYXRofSIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGVycm9yX2RldGFpbHMgPSB0cmFjZWJhY2suZm9ybWF0X2V4YygpCiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJFcnJvciBkdXJpbmcgbWV0YWRhdGEgbWVyZ2U6IHtlcnJvcl9kZXRhaWxzfSIpCgpkZWYgZXhlY3V0ZV93aXRoX3JldHJ5KHNxbF9xdWVyeTogc3RyLCBtYXhfcmV0cmllczogaW50ID0gMyk6CiAgICAiIiIKICAgIEV4ZWN1dGVzIGEgZ2l2ZW4gU1FMIHF1ZXJ5IHdpdGggcmV0cnkgbG9naWMgaW4gY2FzZSBvZiBmYWlsdXJlLgoKICAgIEFyZ3M6CiAgICAtIHNxbF9xdWVyeSAoc3RyKTogVGhlIFNRTCBxdWVyeSB0byBiZSBleGVjdXRlZC4KICAgIC0gbWF4X3JldHJpZXMgKGludCk6IFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXRyeSBhdHRlbXB0cyAoZGVmYXVsdCBpcyAzKS4KCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKG1heF9yZXRyaWVzKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNwYXJrLnNxbChzcWxfcXVlcnkpCiAgICAgICAgICAgIGJyZWFrICAjIEV4aXQgdGhlIGxvb3AgaWYgdGhlIHF1ZXJ5IGlzIHN1Y2Nlc3NmdWwKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkVycm9yIGRldGVjdGVkICh7dHlwZShlKS5fX25hbWVfX30pLiBBdHRlbXB0IHthdHRlbXB0ICsgMX0gb2Yge21heF9yZXRyaWVzfS4iKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgYXR0ZW1wdCA8IG1heF9yZXRyaWVzIC0gMToKICAgICAgICAgICAgICAgICMgRXhwb25lbnRpYWwgYmFja29mZiB3aXRoIGppdHRlciAocmFuZG9tbmVzcykKICAgICAgICAgICAgICAgIHNsZWVwX3RpbWUgPSAoMTAgKiAoYXR0ZW1wdCArIDEpKSArIHJhbmRvbS51bmlmb3JtKDAsIDIpCiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlJldHJ5aW5nIGFmdGVyIHtzbGVlcF90aW1lOi4yZn0gc2Vjb25kcy4uLiIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHNsZWVwX3RpbWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkZhaWxlZCB0byBleGVjdXRlIFNRTCBxdWVyeSBhZnRlciB7bWF4X3JldHJpZXN9IGF0dGVtcHRzLiIpCiAgICAgICAgICAgICAgICByYWlzZQ==",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/utils",
            "language": "PYTHON",
            "md5": "9cafdca5204c8b2b246ca6634808e6aa",
            "object_id": 2603385160998883,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/utils",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/utils"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_validator",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpkZWYgdmFsaWRhdGVfY29uZmlnKGNvbmZpZzogZGljdCkgLT4gZGljdDoKICAgICIiIgogICAgVGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBiYXNpYyB2YWxpZGF0aW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIEpTT04uCgogICAgLSBFbnN1cmVzIHRoYXQgY3JpdGljYWwgZmllbGRzIGFyZSBub3QgZW1wdHkgYW5kIHN0b3BzIHRoZSBqb2IgaWYgdGhleSBhcmUuCiAgICAtIEVuc3VyZXMgdGhhdCBncm91cCBuYW1lcyB3aXRoaW4gZWFjaCB3b3Jrc3BhY2UgYXJlIHVuaXF1ZS4KICAgIC0gUHJvdmlkZXMgZGVmYXVsdCB2YWx1ZXMgZm9yIG9wdGlvbmFsIGZpZWxkcyBpZiB0aGV5IGFyZSBtaXNzaW5nLgogICAgLSBXYXJucyBhbmQgY29udGludWVzIGlmIG9wdGlvbmFsIGZpZWxkcyBvciBjb25kaXRpb25zIGFyZSBub3QgbWV0LgogICAgLSBSZW1vdmVzIGludmFsaWQgc3luYyBncm91cHMgZnJvbSB0aGUgY29uZmlndXJhdGlvbi4KICAgIC0gUHJpbnRzIGEgc3VtbWFyeSBpbiBhIHRhYnVsYXIgZm9ybWF0LgoKICAgIEFyZ3M6CiAgICAtIGNvbmZpZyAoZGljdCk6IFRoZSBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgbG9hZGVkIGZyb20gdGhlIEpTT04gZmlsZS4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBUaGUgdmFsaWRhdGVkIGFuZCBwb3RlbnRpYWxseSBtb2RpZmllZCBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkuCiAgICAiIiIKICAgIHZhbGlkYXRlZF9jb25maWcgPSB7IndvcmtzcGFjZXMiOiBbXX0KCiAgICAjIEVuc3VyZSAnc2VjcmV0X3Njb3BlJyBpcyBwcmVzZW50CiAgICBzZWNyZXRfc2NvcGUgPSBjb25maWcuZ2V0KCJzZWNyZXRfc2NvcGUiKQogICAgaWYgbm90IHNlY3JldF9zY29wZToKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJFcnJvcjogJ3NlY3JldF9zY29wZScgaXMgbWlzc2luZy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgcmV0dXJuIHt9CiAgICAKICAgIHZhbGlkYXRlZF9jb25maWdbInNlY3JldF9zY29wZSJdID0gc2VjcmV0X3Njb3BlCiAgICAKICAgIGZvciB3b3Jrc3BhY2UgaW4gY29uZmlnWyd3b3Jrc3BhY2VzJ106CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIlZhbGlkYXRpbmcgd29ya3NwYWNlOiB7d29ya3NwYWNlLmdldCgnd29ya3NwYWNlX25hbWUnLCAnVW5uYW1lZCcpfSIpCgogICAgICAgICMgQ2hlY2sgY3JpdGljYWwgZmllbGRzCiAgICAgICAgaWYgbm90IHdvcmtzcGFjZS5nZXQoJ3dvcmtzcGFjZV9uYW1lJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIkVycm9yOiBXb3Jrc3BhY2UgbmFtZSBpcyBtaXNzaW5nLiBTdG9wcGluZyBqb2IuIikKICAgICAgICAgICAgcmV0dXJuIHt9CgogICAgICAgIGlmIG5vdCB3b3Jrc3BhY2UuZ2V0KCd3b3Jrc3BhY2VfaW5zdGFuY2VfdXJsJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogV29ya3NwYWNlIGluc3RhbmNlIFVSTCBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnd29ya3NwYWNlX3BhdF9rZXknKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBXb3Jrc3BhY2UgUEFUIGtleSBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19sb2NhdGlvbl9wcmltYXJ5Jyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogcHJpbWFyeSByZWdpb24gc3luYyBsb2NhdGlvbiBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19sb2NhdGlvbl9zZWNvbmRhcnknKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBzZWNvbmRhcnkgcmVnaW9uIHN5bmMgbG9jYXRpb24gaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFN0b3BwaW5nIGpvYi4iKQogICAgICAgICAgICByZXR1cm4ge30KCiAgICAgICAgIyBIYW5kbGUgb3B0aW9uYWwgZmllbGRzIHdpdGggZGVmYXVsdHMKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19pbnRlcnZhbF9taW5zJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJXYXJuaW5nOiBTeW5jIGRlZmF1bHQgc2NoZWR1bGUgaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFVzaW5nIGRlZmF1bHQgc2NoZWR1bGU6IGV2ZXJ5IDEyIGhvdXJzLiIpCiAgICAgICAgICAgIHdvcmtzcGFjZVsnc3luY19pbnRlcnZhbF9taW5zJ10gPSA3MjAKCiAgICAgICAgaWYgbm90IHdvcmtzcGFjZS5nZXQoJ3N5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucycpOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBmYWlsb3ZlciBpbnRlcnZhbCBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gVXNpbmcgZGVmYXVsdCBmYWlsb3ZlciBpbnRlcnZhbDogZXZlcnkgMzYgaG91cnMuIikKICAgICAgICAgICAgd29ya3NwYWNlWydzeW5jX2ZhaWxvdmVyX2ludGVydmFsX21pbnMnXSA9IDIxNjAKCiAgICAgICAgaWYgbm90IHdvcmtzcGFjZS5nZXQoJ3N5bmNfbWF4X3JldHJpZXMnKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIldhcm5pbmc6IFN5bmMgbWF4IHJldHJpZXMgaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFVzaW5nIGRlZmF1bHQgbWF4IHJldHJpZXM6IDMuIikKICAgICAgICAgICAgd29ya3NwYWNlWydzeW5jX21heF9yZXRyaWVzJ10gPSAiMyIKCiAgICAgICAgIyBWYWxpZGF0ZSBncm91cCBuYW1lcyBmb3IgdW5pcXVlbmVzcwogICAgICAgIGdyb3VwX25hbWVzID0gW2dyb3VwLmdldCgnZ3JvdXBfbmFtZScpIGZvciBncm91cCBpbiB3b3Jrc3BhY2VbJ3N5bmNfZ3JvdXBzJ10gaWYgZ3JvdXAuZ2V0KCdncm91cF9uYW1lJyldCiAgICAgICAgaWYgbGVuKGdyb3VwX25hbWVzKSAhPSBsZW4oc2V0KGdyb3VwX25hbWVzKSk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogR3JvdXAgbmFtZXMgbXVzdCBiZSB1bmlxdWUgd2l0aGluIHdvcmtzcGFjZSAne3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXX0nLiBTdG9wcGluZyBqb2IuIikKICAgICAgICAgICAgcmV0dXJuIHt9CgogICAgICAgICMgVmFsaWRhdGUgZWFjaCBzeW5jIGdyb3VwCiAgICAgICAgdmFsaWRhdGVkX2dyb3VwcyA9IFtdCiAgICAgICAgZm9yIGdyb3VwIGluIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXToKICAgICAgICAgICAgZ3JvdXBfbmFtZSA9IGdyb3VwLmdldCgnZ3JvdXBfbmFtZScsICdVbm5hbWVkJykKCiAgICAgICAgICAgIGlmIG5vdCBncm91cF9uYW1lOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIldhcm5pbmc6IFN5bmMgZ3JvdXAgbmFtZSBpcyBub3QgZGVmaW5lZCBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gQ29udGludWluZyB3aXRoIHRoaXMgZ3JvdXAuIikKCiAgICAgICAgICAgICMgRXhjZXB0aW9uIGZvciAnc2NoZWR1bGVkX3N5bmMnIGdyb3VwOiBTa2lwIHdvcmtmbG93IHZhbGlkYXRpb24KICAgICAgICAgICAgaWYgZ3JvdXBfbmFtZSAhPSAnc2NoZWR1bGVkX3N5bmMnIGFuZCBub3QgZ3JvdXAuZ2V0KCd3b3JrZmxvdycpOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIldhcm5pbmc6IFN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScgZG9lcyBub3QgaGF2ZSBhIHdvcmtmbG93IGRlZmluZWQuIikKCiAgICAgICAgICAgIGlmIG5vdCBncm91cC5nZXQoJ3RhYmxlcycpOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIldhcm5pbmc6IFN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScgZG9lcyBub3QgaGF2ZSBhbnkgdGFibGVzIGRlZmluZWQuIikKCiAgICAgICAgICAgIGlmIGdyb3VwX25hbWUgYW5kIChncm91cC5nZXQoJ3dvcmtmbG93Jykgb3IgZ3JvdXAuZ2V0KCd0YWJsZXMnKSBvciBncm91cF9uYW1lID09ICdzY2hlZHVsZWRfc3luYycpOgogICAgICAgICAgICAgICAgdmFsaWRhdGVkX2dyb3Vwcy5hcHBlbmQoZ3JvdXApCgogICAgICAgIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXSA9IHZhbGlkYXRlZF9ncm91cHMKICAgICAgICB2YWxpZGF0ZWRfY29uZmlnWyd3b3Jrc3BhY2VzJ10uYXBwZW5kKHdvcmtzcGFjZSkKCiAgICAjIFByaW50IGEgc3VtbWFyeSBvZiB0aGUgdmFsaWRhdGlvbgogICAgbG9nX21lc3NhZ2UoImRlYnVnIiwiXG5WYWxpZGF0aW9uIFN1bW1hcnk6IikKICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJ7J1dvcmtzcGFjZSBOYW1lJzo8MjV9IHsnR3JvdXBzIFZhbGlkYXRlZCc6PDIwfSB7J0RlZmF1bHQgU2NoZWR1bGUnOjwyMH0geydNYXggUmV0cmllcyc6PDEwfSIpCiAgICBmb3Igd29ya3NwYWNlIGluIHZhbGlkYXRlZF9jb25maWdbJ3dvcmtzcGFjZXMnXToKICAgICAgICBudW1fZ3JvdXBzID0gbGVuKHdvcmtzcGFjZVsnc3luY19ncm91cHMnXSkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYie3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXTo8MjV9IHtudW1fZ3JvdXBzOjwyMH0ge3dvcmtzcGFjZVsnc3luY19pbnRlcnZhbF9taW5zJ106PDIwfSB7d29ya3NwYWNlWydzeW5jX21heF9yZXRyaWVzJ106PDEwfSIpCgogICAgcmV0dXJuIHZhbGlkYXRlZF9jb25maWcKCmRlZiBub3JtYWxpemUodmFsdWUpOgogICAgcmV0dXJuIHZhbHVlIGlmIHZhbHVlIGlzIG5vdCBOb25lIGVsc2UgIiIKCmRlZiB2YWxpZGF0ZV93b3JrZmxvd19hbmRfdGFibGVzKGNvbmZpZzogZGljdCwgc3luY19sb2NhdGlvbl90bzogc3RyID0gInByaW1hcnkiKSAtPiBib29sOgogICAgIiIiCiAgICBUaGlzIGZ1bmN0aW9uIHBlcmZvcm1zIGRldGFpbGVkIHZhbGlkYXRpb24gb2Ygd29ya2Zsb3dzIGFuZCB0YWJsZXMgd2l0aGluIGVhY2ggd29ya3NwYWNlLgoKICAgIC0gVmFsaWRhdGVzIGFjY2VzcyB0byBleHRlcm5hbCBzdG9yYWdlIGxvY2F0aW9ucy4KICAgIC0gRW5zdXJlcyB0aGUgZXhpc3RlbmNlIGFuZCBhY2Nlc3NpYmlsaXR5IG9mIG1ldGFkYXRhIHRhYmxlcyBhdCBzcGVjaWZpYyBzdWJwYXRocyBpbiB0aGUgc3RvcmFnZSBsb2NhdGlvbnMuCiAgICAtIFZhbGlkYXRlcyB3b3JrZmxvd3MgYW5kIHRhYmxlcyB0aGF0IGhhdmVuJ3QgYmVlbiB2YWxpZGF0ZWQgeWV0LCBhY2NvcmRpbmcgdG8gYSBwcmUtZXhpc3RpbmcgbWV0YWRhdGEgdGFibGUuCiAgICAtIENvbGxlY3RzIHZhbGlkYXRpb24gcmVzdWx0cyBhbmQgbWVyZ2VzIHRoZW0gaW50byB0aGUgbWV0YWRhdGEgdGFibGUgaW4gb25lIHNob3QuCiAgICAtIExvZ3MgaXNzdWVzIGFuZCBjb250aW51ZXMgdmFsaWRhdGlvbiBmb3Igb3RoZXIgZ3JvdXBzIGV2ZW4gaWYgc29tZSBmYWlsLgoKICAgIEFyZ3M6CiAgICAtIGNvbmZpZyAoZGljdCk6IFRoZSBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgbG9hZGVkIGZyb20gdGhlIEpTT04gZmlsZS4KICAgIC0gc3luY19sb2NhdGlvbl90byAoc3RyKTogRWl0aGVyICdwcmltYXJ5JyBvciAnc2Vjb25kYXJ5JyB0byBzcGVjaWZ5IHdoaWNoIHN5bmMgbG9jYXRpb24gdG8gdmFsaWRhdGUuCgogICAgUmV0dXJuczoKICAgIC0gYm9vbDogVHJ1ZSBpZiBhbGwgd29ya2Zsb3dzIGFuZCB0YWJsZXMgYXJlIHZhbGlkLCBGYWxzZSBvdGhlcndpc2UuCiAgICAiIiIKICAgIGFsbF92YWxpZCA9IFRydWUKICAgIG5ld19tZXRhZGF0YV9lbnRyaWVzID0gW10gICMgQ29sbGVjdCBuZXcgb3IgdXBkYXRlZCBtZXRhZGF0YSBlbnRyaWVzCgogICAgIyBEZXRlcm1pbmUgd2hldGhlciB0byB1c2UgcHJpbWFyeSBvciBzZWNvbmRhcnkgbG9jYXRpb24KICAgIGlmIHN5bmNfbG9jYXRpb25fdG8gbm90IGluIFsicHJpbWFyeSIsICJzZWNvbmRhcnkiXToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJzeW5jX2xvY2F0aW9uX3RvIG11c3QgYmUgZWl0aGVyICdwcmltYXJ5JyBvciAnc2Vjb25kYXJ5JyIpCgogICAgZm9yIHdvcmtzcGFjZSBpbiBjb25maWdbJ3dvcmtzcGFjZXMnXToKICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsZiJWYWxpZGF0aW5nIHdvcmtzcGFjZToge3dvcmtzcGFjZS5nZXQoJ3dvcmtzcGFjZV9uYW1lJywgJ1VubmFtZWQnKX0iKQoKICAgICAgICAjIERldGVybWluZSBzeW5jIGxvY2F0aW9uIGJhc2VkIG9uIHBhcmFtZXRlcgogICAgICAgIHN5bmNfbG9jYXRpb24gPSB3b3Jrc3BhY2UuZ2V0KGYic3luY19sb2NhdGlvbl97c3luY19sb2NhdGlvbl90b30iKQogICAgICAgIG1ldGFfcGF0aCA9IGYie3N5bmNfbG9jYXRpb259L21ldGEiCgogICAgICAgICMgQ2hlY2sgYWNjZXNzIHRvIHRoZSBzeW5jIGxvY2F0aW9uCiAgICAgICAgaWYgbm90IGNoZWNrX2ZzX3BhdGgobWV0YV9wYXRoKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIixmIk5vIGFjY2VzcyB0byAnbWV0YScgcGF0aCBhdCB7c3luY19sb2NhdGlvbl90b30gc3luYyBsb2NhdGlvbiAne21ldGFfcGF0aH0nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4iKQogICAgICAgICAgICBhbGxfdmFsaWQgPSBGYWxzZQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIExvYWQgbWV0YWRhdGEgZnJvbSB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uCiAgICAgICAgbWV0YWRhdGFfdGFibGVfcGF0aCA9IGYie21ldGFfcGF0aH0vc3luY19tZXRhZGF0YV90YWJsZSIKICAgICAgICBtZXRhZGF0YV90YWJsZSA9IGxvYWRfbWV0YWRhdGFfdGFibGUobWV0YWRhdGFfdGFibGVfcGF0aCkKCiAgICAgICAgZm9yIGdyb3VwIGluIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXToKICAgICAgICAgICAgZ3JvdXBfbmFtZSA9IGdyb3VwLmdldCgnZ3JvdXBfbmFtZScsICdVbm5hbWVkJykKCiAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhpcyBncm91cCBpcyBhbHJlYWR5IHZhbGlkYXRlZCBpbiB0aGUgbWV0YWRhdGEgdGFibGUKICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeSA9IG1ldGFkYXRhX3RhYmxlLmdldCgod29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddLCBncm91cF9uYW1lKSwgTm9uZSkKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmInZhbGlkYXRpbmcgc3luYyBncm91cCAne2dyb3VwX25hbWV9Jy4gZm91bmQgZW50cnkge3ZhbGlkYXRpb25fZW50cnl9IikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgSGFuZGxlIHBvdGVudGlhbCBkZWxldGlvbnMgYW5kIGNoYW5nZXMgaW4gY29uZmlndXJhdGlvbgogICAgICAgICAgICBpZiB2YWxpZGF0aW9uX2VudHJ5OgogICAgICAgICAgICAgICAgIyBJZiB0aGUgZ3JvdXAgaGFzIGJlZW4gZGVsZXRlZCBmcm9tIHRoZSBjb25maWd1cmF0aW9uLCBza2lwIGFkZGluZyBpdCB0byB0aGUgbmV3IGVudHJpZXMKICAgICAgICAgICAgICAgIGlmIG5vdCBhbnkoZ1snZ3JvdXBfbmFtZSddID09IGdyb3VwX25hbWUgZm9yIGcgaW4gd29ya3NwYWNlWydzeW5jX2dyb3VwcyddKToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiU3luYyBncm91cCAne2dyb3VwX25hbWV9JyBubyBsb25nZXIgZXhpc3RzIGluIGNvbmZpZ3VyYXRpb24uIE5vdCBhZGRpbmcgdG8gZW50cnkgc28gdGhhdCBpdCBnZXQgcmVvdmVkIGZyb20gbWV0YWRhdGEgdGFibGUuIikKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnlbJ3dvcmtzcGFjZV9uYW1lJ10gPSB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ10KICAgICAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnlbJ2dyb3VwX25hbWUnXSA9IGdyb3VwX25hbWUgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgQ2hlY2sgZm9yIGNoYW5nZXMgaW4gd29ya2Zsb3cgb3IgdGFibGVzCiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplKHZhbGlkYXRpb25fZW50cnlbJ3dvcmtmbG93X25hbWUnXSkgIT0gbm9ybWFsaXplKGdyb3VwLmdldCgnd29ya2Zsb3cnKSkpIG9yICh2YWxpZGF0aW9uX2VudHJ5Wyd0YWJsZXMnXSAhPSBncm91cC5nZXQoJ3RhYmxlcycpKToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsZiJEZXRlY3RlZCBjaGFuZ2VzIGluIHN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgY29uZmlndXJhdGlvbi4gUmV2YWxpZGF0aW5nLiIpCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeVsndmFsaWRhdGVkJ10gPSBGYWxzZSAgIyBNYXJrIGFzIG5vdCB2YWxpZGF0ZWQgZm9yIHJldmFsaWRhdGlvbgoKICAgICAgICAgICAgaWYgdmFsaWRhdGlvbl9lbnRyeSBhbmQgdmFsaWRhdGlvbl9lbnRyeVsndmFsaWRhdGVkJ106CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsZiJTeW5jIGdyb3VwICd7Z3JvdXBfbmFtZX0nIGluIHdvcmtzcGFjZSAne3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXX0nIGlzIGFscmVhZHkgdmFsaWRhdGVkLiBTa2lwcGluZyB2YWxpZGF0aW9uLiIpCiAgICAgICAgICAgICAgICBuZXdfbWV0YWRhdGFfZW50cmllcy5hcHBlbmQodmFsaWRhdGlvbl9lbnRyeSkKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIFZhbGlkYXRlIHdvcmtmbG93IGV4aXN0ZW5jZQogICAgICAgICAgICBpZiBncm91cC5nZXQoJ3dvcmtmbG93Jyk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIyBGZXRjaCB0aGUgam9iIGluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIG1ldGhvZCwgcmV0cmlldmUgUEFUIHRva2VuIGFuZCBzY29wZSBmcm9tIGNvbmZpZwogICAgICAgICAgICAgICAgICAgIGpvYl9pbmZvID0gZ2V0X2RhdGFicmlja3Nfam9ic19pbmZvKAogICAgICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9pbnN0YW5jZV91cmwnXSwgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5nZXQoJ3NlY3JldF9zY29wZScpLCAgIyBQYXNzIHRoZSBzZWNyZXQgc2NvcGUgZnJvbSBjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlWyd3b3Jrc3BhY2VfcGF0X2tleSddLCAKICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwWyd3b3JrZmxvdyddXQogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGpvYl9pbmZvOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiV29ya2Zsb3cgJ3tncm91cFsnd29ya2Zsb3cnXX0nIGRvZXMgbm90IGV4aXN0IGZvciBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4iKQogICAgICAgICAgICAgICAgICAgICAgICBhbGxfdmFsaWQgPSBGYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X2lkID0gam9iX2luZm8uZ2V0KGdyb3VwWyd3b3JrZmxvdyddLCBOb25lKQogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uX2VudHJ5ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dvcmtzcGFjZV9uYW1lJzogd29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dyb3VwX25hbWUnOiBncm91cF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dvcmtmbG93X25hbWUnOiBncm91cC5nZXQoJ3dvcmtmbG93JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd29ya2Zsb3dfaWQnOiB3b3JrZmxvd19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YWJsZXMnOiBncm91cC5nZXQoJ3RhYmxlcycsIFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWxpZGF0ZWQnOiBGYWxzZSAgIyBNYXJrIGFzIG5vdCB2YWxpZGF0ZWQgdW50aWwgcmUtdmFsaWRhdGlvbiBpcyBkb25lCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiQ291bGQgbm90IHZhbGlkYXRlIHdvcmtmbG93ICd7Z3JvdXBbJ3dvcmtmbG93J119JyBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfSc6IHtlfSIpCiAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3Jrc3BhY2VfbmFtZSc6IHdvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdncm91cF9uYW1lJzogZ3JvdXBfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3JrZmxvd19uYW1lJzogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd29ya2Zsb3dfaWQnOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YWJsZXMnOiBncm91cC5nZXQoJ3RhYmxlcycsIFtdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWxpZGF0ZWQnOiBGYWxzZSAgIyBNYXJrIGFzIG5vdCB2YWxpZGF0ZWQgdW50aWwgcmUtdmFsaWRhdGlvbiBpcyBkb25lCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICMgVmFsaWRhdGUgdGFibGVzIGV4aXN0ZW5jZSBhbmQgcmVhZCBwZXJtaXNzaW9ucwogICAgICAgICAgICBmb3IgdGFibGUgaW4gZ3JvdXBbJ3RhYmxlcyddOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBjaGVja190YWJsZSh0YWJsZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsZiJDYW5ub3QgYWNjZXNzIHRhYmxlICd7dGFibGV9JyBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIikKICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiQ291bGQgbm90IHZhbGlkYXRlIHRhYmxlICd7dGFibGV9JyBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfSc6IHtlfSIpCiAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKCiAgICAgICAgICAgICMgSWYgdmFsaWRhdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgdXBkYXRlIHRoZSBtZXRhZGF0YSBlbnRyeSBhcyB2YWxpZGF0ZWQKICAgICAgICAgICAgaWYgYWxsX3ZhbGlkOgogICAgICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeVsndmFsaWRhdGVkJ10gPSBUcnVlCiAgICAgICAgICAgICAgICBuZXdfbWV0YWRhdGFfZW50cmllcy5hcHBlbmQodmFsaWRhdGlvbl9lbnRyeSkKCiAgICAjIE9uY2UgYWxsIHZhbGlkYXRpb25zIGFyZSBkb25lLCBtZXJnZSBuZXcgZW50cmllcyBpbnRvIHRoZSBtZXRhZGF0YSB0YWJsZSwgb25seSBpZiBuZXcgZW50cmllcyB3ZXJlIGZvdW5kCiAgICBpZiBuZXdfbWV0YWRhdGFfZW50cmllczoKICAgICAgICBtZXJnZV9tZXRhZGF0YV9lbnRyaWVzKG1ldGFkYXRhX3RhYmxlX3BhdGgsIG5ld19tZXRhZGF0YV9lbnRyaWVzKQogICAgZWxzZToKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJObyBuZXcgbWV0YWRhdGEgZW50cmllcyBmb3VuZC4gU2tpcHBpbmcgbWV0YWRhdGEgbWVyZ2UuIikKCiAgICByZXR1cm4gYWxsX3ZhbGlkCg==",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/validator",
            "language": "PYTHON",
            "md5": "9391f0ab44fe0b5eed815fdfb4f92125",
            "object_id": 2603385160998861,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/validator",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/validator"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "file_checker",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIERlZmluZSB0aGUgc291cmNlIGRpcmVjdG9yeSBwYXRoCnN0b3JhZ2VhY2NuYW1lID0gZGJ1dGlscy53aWRnZXRzLmdldCgic3RvcmFnZWFjY25hbWUiKQoKc291cmNlX2RpcmVjdG9yeSA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9LmRmcy5jb3JlLndpbmRvd3MubmV0L2RhdGEvaW5nZXN0aW9uLyIgICMgUmVwbGFjZSB3aXRoIHlvdXIgYWN0dWFsIFMzIHBhdGgKCiMgQ2hlY2sgaWYgYW55IGZpbGVzIGV4aXN0IGluIHRoZSBzb3VyY2UgZGlyZWN0b3J5CmZpbGVzID0gZGJ1dGlscy5mcy5scyhzb3VyY2VfZGlyZWN0b3J5KQoKIyBTZXQgdGhlIHRhc2sgc3RhdHVzIGJhc2VkIG9uIHRoZSBwcmVzZW5jZSBvZiBmaWxlcwppZiBmaWxlczoKICAgIGRidXRpbHMuam9icy50YXNrVmFsdWVzLnNldCgiZmlsZV9jaGVja19zdGF0dXMiLCAidHJ1ZSIpCiAgICBwcmludCgiRmlsZXMgZm91bmQsIHNldHRpbmcgc3RhdHVzIHRvIEZJTEVTX0ZPVU5ELiIpCmVsc2U6CiAgICBkYnV0aWxzLmpvYnMudGFza1ZhbHVlcy5zZXQoImZpbGVfY2hlY2tfc3RhdHVzIiwgImZhbHNlIikKICAgIHByaW50KCJObyBmaWxlcyBmb3VuZCwgc2V0dGluZyBzdGF0dXMgdG8gTk9fRklMRVNfRk9VTkQuIikK",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/file_checker",
            "language": "PYTHON",
            "md5": "8c4534390ba209f93dc3b2b5d363e345",
            "object_id": 2603385160998885,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/file_checker",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/file_checker"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "generate_raw_data",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "aW1wb3J0IHJhbmRvbQppbXBvcnQgc3RyaW5nCgojIEdlbmVyYXRlIHJhbmRvbSBkYXRhCmRhdGEgPSBbKGksICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX2xldHRlcnMgKyBzdHJpbmcuZGlnaXRzLCBrPTEwKSksIHJhbmRvbS5yYW5kaW50KDEsIDEwMCkpIGZvciBpIGluIHJhbmdlKDEwMCldCgojIENyZWF0ZSBEYXRhRnJhbWUKZGYgPSBzcGFyay5jcmVhdGVEYXRhRnJhbWUoZGF0YSwgWyJpZCIsICJuYW1lIiwgInZhbHVlIl0pCgojIFdyaXRlIHRvIHJhdyB0YWJsZQpkZi53cml0ZS5tb2RlKCJvdmVyd3JpdGUiKS5zYXZlQXNUYWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy5yYXdfZGF0YSIpCg==",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/GenerateRawData",
            "language": "PYTHON",
            "md5": "c43c3d3278728a282f1697e530090ed4",
            "object_id": 2603385160998865,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/GenerateRawData",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/GenerateRawData"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "gold",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIGRlbHRhLnRhYmxlcyBpbXBvcnQgRGVsdGFUYWJsZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgZXhwciwgY3VycmVudF90aW1lc3RhbXAsIGNvbCwgbGl0CgojIERlZmluZSBwYXRocyBhbmQgZGF0YWJhc2UKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCmdvbGRfdGFibGVfcGF0aCA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9LmRmcy5jb3JlLndpbmRvd3MubmV0L2RhdGEvbWFpbi93b3JrZmxvd18xX2dvbGQiICAKZGF0YWJhc2VfbmFtZSA9ICJkcl90ZXN0X2NhdGFsb2cubWFpbiIgCnRhYmxlX25hbWUgPSAid29ya2Zsb3dfMV9nb2xkIiAgCgojIENyZWF0ZSBvciByZXBsYWNlIHRoZSBHb2xkIHRhYmxlIGFzIGFuIGV4dGVybmFsIERlbHRhIHRhYmxlIGFuZCByZWdpc3RlciBpdCBpbiBVbml0eSBDYXRhbG9nCnNwYXJrLnNxbChmIiIiCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB7ZGF0YWJhc2VfbmFtZX0ue3RhYmxlX25hbWV9ICgKICAgICAgICBmaWxlX25hbWUgU1RSSU5HLAogICAgICAgIHBhcnNlZF9kYXRhIFNUUklORywKICAgICAgICBwYXJzZWRfdGltZSBUSU1FU1RBTVAsCiAgICAgICAgd29ya3NwYWNlX25hbWUgU1RSSU5HLAogICAgICAgIG1lcmdlX2NvdW50ZXIgQklHSU5ULAogICAgICAgIG1lcmdlX3RpbWUgVElNRVNUQU1QCiAgICApCiAgICBVU0lORyBERUxUQQogICAgTE9DQVRJT04gJ3tnb2xkX3RhYmxlX3BhdGh9JwoiIiIpCgojIExvYWQgdGhlIFNpbHZlciB0YWJsZSBkYXRhCnNpbHZlcl9kZiA9IHNwYXJrLnJlYWQudGFibGUoImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIpCgojIENhbGN1bGF0ZSB0aGUgY3VycmVudCBtYXggdmFsdWUgb2YgbWVyZ2VfY291bnRlciBmcm9tIHRoZSBHb2xkIHRhYmxlCm1heF9jb3VudGVyID0gc3Bhcmsuc3FsKGYiU0VMRUNUIENPQUxFU0NFKE1BWChtZXJnZV9jb3VudGVyKSwgMCkgQVMgbWF4X2NvdW50ZXIgRlJPTSB7ZGF0YWJhc2VfbmFtZX0ue3RhYmxlX25hbWV9IikuY29sbGVjdCgpWzBdWydtYXhfY291bnRlciddCgojIEFkZCBhIG5ldyBtZXJnZSBjb3VudGVyIHN0YXJ0aW5nIGZyb20gdGhlIGN1cnJlbnQgbWF4IGNvdW50ZXIKc2lsdmVyX2RmID0gc2lsdmVyX2RmLndpdGhDb2x1bW4oIm1lcmdlX2NvdW50ZXIiLCBleHByKGYie21heF9jb3VudGVyfSArIG1vbm90b25pY2FsbHlfaW5jcmVhc2luZ19pZCgpICsgMSIpKQpzaWx2ZXJfZGYgPSBzaWx2ZXJfZGYud2l0aENvbHVtbigibWVyZ2VfdGltZSIsIGN1cnJlbnRfdGltZXN0YW1wKCkpCgojIE1lcmdlIHRoZSBTaWx2ZXIgZGF0YSBpbnRvIHRoZSBHb2xkIHRhYmxlCmdvbGRfdGFibGUgPSBEZWx0YVRhYmxlLmZvclBhdGgoc3BhcmssIGdvbGRfdGFibGVfcGF0aCkKCmdvbGRfdGFibGUuYWxpYXMoInRndCIpLm1lcmdlKAogICAgc2lsdmVyX2RmLmFsaWFzKCJzcmMiKSwKICAgICJ0Z3QuZmlsZV9uYW1lID0gc3JjLmZpbGVfbmFtZSIKKS53aGVuTWF0Y2hlZFVwZGF0ZUFsbCgKKS53aGVuTm90TWF0Y2hlZEluc2VydEFsbCgKKS5leGVjdXRlKCkKCiMgVmVyaWZ5IHRoZSBjcmVhdGlvbiBhbmQgbWVyZ2luZwpzcGFyay5zcWwoZiJTRUxFQ1QgKiBGUk9NIHtkYXRhYmFzZV9uYW1lfS57dGFibGVfbmFtZX0iKS5zaG93KCkK",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/gold",
            "language": "PYTHON",
            "md5": "2fd8fda248e349ec8c106fb01df7e765",
            "object_id": 2603385160998879,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/gold",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/gold"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "silver",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgZnJvbV91bml4dGltZSwgY29sCmZyb20gcHlzcGFyay5zcWwudHlwZXMgaW1wb3J0IFN0cnVjdFR5cGUsIFN0cnVjdEZpZWxkLCBTdHJpbmdUeXBlCgojIFJlYWQgZGF0YSBmcm9tIHRoZSBicm9uemUgdGFibGUKYnJvbnplX2RmID0gc3BhcmsucmVhZC50YWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIpCgojIERlZmluZSB0aGUgc2NoZW1hIGZvciB0aGUgcGFyc2VkIGRhdGEKc2NoZW1hID0gU3RydWN0VHlwZShbCiAgICBTdHJ1Y3RGaWVsZCgicGFyc2VkX2RhdGEiLCBTdHJpbmdUeXBlKCksIFRydWUpCl0pCgojIFBhcnNlIHRoZSBiaW5hcnkgY29udGVudApzaWx2ZXJfZGYgPSAoYnJvbnplX2RmLndpdGhDb2x1bW4oInBhcnNlZF9kYXRhIiwgYnJvbnplX2RmWyJjb250ZW50Il0uY2FzdCgic3RyaW5nIikpICAjIENhc3QgY29udGVudCB0byBzdHJpbmcgYXMgYW4gZXhhbXBsZSBvZiBwYXJzaW5nCiAgICAgICAgICAgICAud2l0aENvbHVtbigicGFyc2VkX3RpbWUiLCBmcm9tX3VuaXh0aW1lKGNvbCgiZmlsZV9tb2RpZmllZF90aW1lIikuY2FzdCgibG9uZyIpKSkgICMgQ29udmVydCBmaWxlX21vZGlmaWVkX3RpbWUgdG8gaHVtYW4tcmVhZGFibGUgdGltZQogICAgICAgICAgICAgLnNlbGVjdCgiZmlsZV9uYW1lIiwgInBhcnNlZF9kYXRhIiwgInBhcnNlZF90aW1lIiwgIndvcmtzcGFjZV9uYW1lIikpCgojIFNhdmUgdGhlIHBhcnNlZCBkYXRhIHRvIGEgU2lsdmVyIHRhYmxlCnNpbHZlcl9kZi53cml0ZS5mb3JtYXQoImRlbHRhIikubW9kZSgib3ZlcndyaXRlIikuc2F2ZUFzVGFibGUoImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIpCgojIHNsZWVwIGZvciAyIG1pbnMKaW1wb3J0IHRpbWUKdGltZS5zbGVlcCgyMCkKCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlc3FsCiMgTUFHSUMgc2VsZWN0ICogZnJvbSBkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uud29ya2Zsb3dfMV9zaWx2ZXI=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/silver",
            "language": "PYTHON",
            "md5": "6c5a12e68aaf8515f9ebfe35c95a6265",
            "object_id": 2603385160998878,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/silver",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/silver"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "transform_to_silver",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBSZWFkIGZyb20gcmF3IHRhYmxlCmRmX3JhdyA9IHNwYXJrLnRhYmxlKCJkcl90ZXN0X2NhdGFsb2cucmF3LnJhd19kYXRhIikKCiMgVHJhbnNmb3JtYXRpb24gKGUuZy4sIGZpbHRlciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDUwKQpkZl9zaWx2ZXIgPSBkZl9yYXcuZmlsdGVyKGRmX3Jhdy52YWx1ZSA+IDUwKQoKIyBXcml0ZSB0byBzaWx2ZXIgdGFibGUKZGZfc2lsdmVyLndyaXRlLm1vZGUoIm92ZXJ3cml0ZSIpLnNhdmVBc1RhYmxlKCJkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uuc2lsdmVyX2RhdGEiKQo=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/TransformToSilver",
            "language": "PYTHON",
            "md5": "274511d439cdc454657a34f49a3602b1",
            "object_id": 2603385160998872,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/TransformToSilver",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/TransformToSilver"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for gold data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.main",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "main",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "raw",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for raw data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.raw",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "raw",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "stage",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for silver data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.stage",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "stage",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_storage_credential",
      "name": "dr_cross_westus2_storage_credential",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aws_iam_role": [],
            "azure_managed_identity": [
              {
                "access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_westus2/providers/Microsoft.Databricks/accessConnectors/dr_test_westus2_connector",
                "credential_id": "7d3e66bf-c0ca-4a75-8d12-3c01debb861f",
                "managed_identity_id": ""
              }
            ],
            "azure_service_principal": [],
            "comment": null,
            "databricks_gcp_service_account": [],
            "force_destroy": null,
            "force_update": null,
            "gcp_service_account_key": [],
            "id": "dr_cross_westus2_storage_credential",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_cross_westus2_storage_credential",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "storage_credential_id": "e6ef85d4-4ae8-484c-bafd-d7d829b6b169"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "data.terraform_remote_state.westus2",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_schema.main",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_storage_credential",
      "name": "dr_eastus2_storage_credential",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aws_iam_role": [],
            "azure_managed_identity": [
              {
                "access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
                "credential_id": "0ad42295-1ad1-4003-a551-957a487d33f9",
                "managed_identity_id": ""
              }
            ],
            "azure_service_principal": [],
            "comment": "Managed identity for storage access",
            "databricks_gcp_service_account": [],
            "force_destroy": null,
            "force_update": null,
            "gcp_service_account_key": [],
            "id": "dr_eastus2_storage_credential",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "8ff0add7-16e6-4470-8cb3-5a80dca9bbba",
            "name": "dr_eastus2_storage_credential",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "storage_credential_id": "57bebabf-f9a6-4737-86be-dafa407eeaa3"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_workspace_file",
      "name": "dr_sync_job_config",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "eyAic2VjcmV0X3Njb3BlIiA6ICJkci10ZXN0LXNjb3BlIiwKICAid29ya3NwYWNlcyI6IFsKICAgIHsKICAgICAgIndvcmtzcGFjZV9uYW1lIjogImRyX3Rlc3RfZWFzdHVzMl9kYXRhYnJpY2tzIiwKICAgICAgIndvcmtzcGFjZV9pbnN0YW5jZV91cmwiOiAiaHR0cHM6Ly9hZGItOTE5MzcxNjcyNjE1NDUzLjEzLmF6dXJlZGF0YWJyaWNrcy5uZXQiLAogICAgICAid29ya3NwYWNlX3BhdF9rZXkiIDogImRyLXBhdC1rZXkiLCAKICAgICAgInN5bmNfbG9jYXRpb25fcHJpbWFyeSI6ICJhYmZzczovL2RyLXN5bmNAZWFzdHVzMmRyc3RvcmFnZWFjY3QuZGZzLmNvcmUud2luZG93cy5uZXQiLAogICAgICAic3luY19sb2NhdGlvbl9zZWNvbmRhcnkiOiAiYWJmc3M6Ly9kci1zeW5jQHdlc3R1czJkcnN0b3JhZ2VhY2N0LmRmcy5jb3JlLndpbmRvd3MubmV0IiwKICAgICAgInN5bmNfZmFpbHVyZV9ub3RpZmljYXRpb24iOiAibW9oaXQuc2luZ2hAZGF0YWJyaWNrcy5jb20iLAogICAgICAic3luY19zdWNjZXNzX25vdGlmaWNhdGlvbiI6ICJtb2hpdC5zaW5naEBkYXRhYnJpY2tzLmNvbSIsCiAgICAgICJzeW5jX2ludGVydmFsX21pbnMiOiAxNSwKICAgICAgInN5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucyI6IDEwLAogICAgICAic3luY19tYXhfcmV0cmllcyI6ICIzIiwKICAgICAgInN5bmNfZ3JvdXBzIjogWwogICAgICAgIHsKICAgICAgICAgICJncm91cF9uYW1lIjogInNhbXBsZV93b3JrZmxvd18xIiwKICAgICAgICAgICJncm91cF9vd25lcl9lbWFpbCI6ICJtb2hpdC5zaW5naEBkYXRhYnJpY2tzLmNvbSIsCiAgICAgICAgICAid29ya2Zsb3ciOiAic2FtcGxlX3dvcmtmbG93XzEiLAogICAgICAgICAgInRhYmxlcyI6IFsiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIsImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIsImRyX3Rlc3RfY2F0YWxvZy5tYWluLndvcmtmbG93XzFfZ29sZCJdCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAiZ3JvdXBfbmFtZSI6ICJzY2hlZHVsZWRfc3luYyIsCiAgICAgICAgICAiZ3JvdXBfb3duZXJfZW1haWwiOiAibW9oaXQuc2luZ2hAZGF0YWJyaWNrcy5jb20iLAogICAgICAgICAgInRhYmxlcyI6IFsiZHJfdGVzdF9jYXRhbG9nLnJhdy5yYXdfZGF0YSIsImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS5zaWx2ZXJfZGF0YSIsImRyX3Rlc3RfY2F0YWxvZy5tYWluLmdvbGRfZGF0YSJdCiAgICAgICAgfQogICAgICBdCiAgICB9CiAgXQp9",
            "id": "/Workspace/dr_sync_job/config/config_dev.json",
            "md5": "ac1096fea7dd8750eb11201af4472e98",
            "object_id": 2603385160998868,
            "path": "/Workspace/dr_sync_job/config/config_dev.json",
            "source": null,
            "url": "https://adb-919371672615453.13.azuredatabricks.net/#workspace/Workspace/dr_sync_job/config/config_dev.json",
            "workspace_path": "/Workspace/Workspace/dr_sync_job/config/config_dev.json"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
