{
  "version": 4,
  "terraform_version": "1.9.2",
  "serial": 75,
  "lineage": "76091b4b-5e88-a594-708c-1ac1a86a3581",
  "outputs": {
    "eastus2_access_connector_id": {
      "value": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
      "type": "string"
    },
    "eastus2_databricks_workspace_name": {
      "value": "dr_test_eastus2_databricks",
      "type": "string"
    },
    "eastus2_databricks_workspace_url": {
      "value": "adb-1164204460417135.15.azuredatabricks.net",
      "type": "string"
    },
    "eastus2_dr_sync_container_name": {
      "value": "dr-sync",
      "type": "string"
    },
    "eastus2_external_container_name": {
      "value": "external",
      "type": "string"
    },
    "eastus2_storage_account_name": {
      "value": "eastus2drstorageacct",
      "type": "string"
    },
    "resource_group_eastus2_name": {
      "value": "dr_test_eastus2",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "terraform_remote_state",
      "name": "westus2",
      "provider": "provider[\"terraform.io/builtin/terraform\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "local",
            "config": {
              "value": {
                "path": "../region_secondary/terraform.tfstate"
              },
              "type": [
                "object",
                {
                  "path": "string"
                }
              ]
            },
            "defaults": null,
            "outputs": {
              "value": {
                "resource_group_westus2_name": "dr_test_westus2",
                "westus2_access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_westus2/providers/Microsoft.Databricks/accessConnectors/dr_test_westus2_connector",
                "westus2_databricks_workspace_name": "dr_test_westus2_databricks",
                "westus2_databricks_workspace_url": "adb-3719374699990339.19.azuredatabricks.net",
                "westus2_dr_sync_container_name": "dr-sync",
                "westus2_external_container_name": "external",
                "westus2_storage_account_name": "westus2drstorageacct"
              },
              "type": [
                "object",
                {
                  "resource_group_westus2_name": "string",
                  "westus2_access_connector_id": "string",
                  "westus2_databricks_workspace_name": "string",
                  "westus2_databricks_workspace_url": "string",
                  "westus2_dr_sync_container_name": "string",
                  "westus2_external_container_name": "string",
                  "westus2_storage_account_name": "string"
                }
              ]
            },
            "workspace": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_databricks_access_connector",
      "name": "dr_test_eastus2_connector",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
            "identity": [
              {
                "identity_ids": [],
                "principal_id": "bf992dc6-d832-49b4-8245-ad6708014133",
                "tenant_id": "bf465dc7-3bc8-4944-b018-092572b5c20d",
                "type": "SystemAssigned"
              }
            ],
            "location": "eastus2",
            "name": "dr_test_eastus2_connector",
            "resource_group_name": "dr_test_eastus2",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_databricks_workspace",
      "name": "dr_test_eastus2_databricks",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_connector_id": null,
            "custom_parameters": [
              {
                "machine_learning_workspace_id": "",
                "nat_gateway_name": "nat-gateway",
                "no_public_ip": true,
                "private_subnet_name": "",
                "private_subnet_network_security_group_association_id": "",
                "public_ip_name": "nat-gw-public-ip",
                "public_subnet_name": "",
                "public_subnet_network_security_group_association_id": "",
                "storage_account_name": "dbstoragezttwfdoqfykje",
                "storage_account_sku_name": "Standard_GRS",
                "virtual_network_id": "",
                "vnet_address_prefix": "10.139"
              }
            ],
            "customer_managed_key_enabled": false,
            "default_storage_firewall_enabled": null,
            "disk_encryption_set_id": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/workspaces/dr_test_eastus2_databricks",
            "infrastructure_encryption_enabled": false,
            "load_balancer_backend_address_pool_id": "",
            "location": "eastus2",
            "managed_disk_cmk_key_vault_id": "",
            "managed_disk_cmk_key_vault_key_id": "",
            "managed_disk_cmk_rotation_to_latest_version_enabled": false,
            "managed_disk_identity": [],
            "managed_resource_group_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/databricks-rg-dr_test_eastus2",
            "managed_resource_group_name": "databricks-rg-dr_test_eastus2",
            "managed_services_cmk_key_vault_id": "",
            "managed_services_cmk_key_vault_key_id": "",
            "name": "dr_test_eastus2_databricks",
            "network_security_group_rules_required": null,
            "public_network_access_enabled": true,
            "resource_group_name": "dr_test_eastus2",
            "sku": "premium",
            "storage_account_identity": [],
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null,
            "workspace_id": "1164204460417135",
            "workspace_url": "adb-1164204460417135.15.azuredatabricks.net"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "dr_test_eastus2",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2",
            "location": "eastus2",
            "managed_by": "",
            "name": "dr_test_eastus2",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "eastus2_blob_contributor",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/providers/Microsoft.Authorization/roleAssignments/79e7d767-825f-c85d-6ef9-7b1f12477ed2",
            "name": "79e7d767-825f-c85d-6ef9-7b1f12477ed2",
            "principal_id": "bf992dc6-d832-49b4-8245-ad6708014133",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/providers/Microsoft.Authorization/roleDefinitions/ba92f5b4-2d11-453d-a403-e96b0029c9fe",
            "role_definition_name": "Storage Blob Data Contributor",
            "scope": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "eastus2_queue_contributor",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/providers/Microsoft.Authorization/roleAssignments/7cf2f41d-b5a7-6d2c-15b4-60b3b03ee3a3",
            "name": "7cf2f41d-b5a7-6d2c-15b4-60b3b03ee3a3",
            "principal_id": "bf992dc6-d832-49b4-8245-ad6708014133",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/providers/Microsoft.Authorization/roleDefinitions/974c5e8b-45b9-4653-ba55-5f855dd0fb88",
            "role_definition_name": "Storage Queue Data Contributor",
            "scope": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_account",
      "name": "dr_test_eastus2_storage",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 4,
          "attributes": {
            "access_tier": "Hot",
            "account_kind": "StorageV2",
            "account_replication_type": "LRS",
            "account_tier": "Standard",
            "allow_nested_items_to_be_public": true,
            "allowed_copy_scope": "",
            "azure_files_authentication": [],
            "blob_properties": [
              {
                "change_feed_enabled": false,
                "change_feed_retention_in_days": 0,
                "container_delete_retention_policy": [],
                "cors_rule": [],
                "default_service_version": "",
                "delete_retention_policy": [],
                "last_access_time_enabled": false,
                "restore_policy": [],
                "versioning_enabled": false
              }
            ],
            "cross_tenant_replication_enabled": true,
            "custom_domain": [],
            "customer_managed_key": [],
            "default_to_oauth_authentication": false,
            "dns_endpoint_type": "Standard",
            "edge_zone": "",
            "enable_https_traffic_only": true,
            "https_traffic_only_enabled": true,
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "identity": [],
            "immutability_policy": [],
            "infrastructure_encryption_enabled": false,
            "is_hns_enabled": true,
            "large_file_share_enabled": false,
            "local_user_enabled": true,
            "location": "eastus2",
            "min_tls_version": "TLS1_2",
            "name": "eastus2drstorageacct",
            "network_rules": [],
            "nfsv3_enabled": false,
            "primary_access_key": "l+JY+vUFSC5Vm9BSiX2XcQQvyIHXBqG1on70WXnMckDCjFW3Ch2vuXahpQzdOqr/UDKYbIGsH42T+ASt8umIfQ==",
            "primary_blob_connection_string": "DefaultEndpointsProtocol=https;BlobEndpoint=https://eastus2drstorageacct.blob.core.windows.net/;AccountName=eastus2drstorageacct;AccountKey=l+JY+vUFSC5Vm9BSiX2XcQQvyIHXBqG1on70WXnMckDCjFW3Ch2vuXahpQzdOqr/UDKYbIGsH42T+ASt8umIfQ==",
            "primary_blob_endpoint": "https://eastus2drstorageacct.blob.core.windows.net/",
            "primary_blob_host": "eastus2drstorageacct.blob.core.windows.net",
            "primary_blob_internet_endpoint": "",
            "primary_blob_internet_host": "",
            "primary_blob_microsoft_endpoint": "",
            "primary_blob_microsoft_host": "",
            "primary_connection_string": "DefaultEndpointsProtocol=https;AccountName=eastus2drstorageacct;AccountKey=l+JY+vUFSC5Vm9BSiX2XcQQvyIHXBqG1on70WXnMckDCjFW3Ch2vuXahpQzdOqr/UDKYbIGsH42T+ASt8umIfQ==;EndpointSuffix=core.windows.net",
            "primary_dfs_endpoint": "https://eastus2drstorageacct.dfs.core.windows.net/",
            "primary_dfs_host": "eastus2drstorageacct.dfs.core.windows.net",
            "primary_dfs_internet_endpoint": "",
            "primary_dfs_internet_host": "",
            "primary_dfs_microsoft_endpoint": "",
            "primary_dfs_microsoft_host": "",
            "primary_file_endpoint": "https://eastus2drstorageacct.file.core.windows.net/",
            "primary_file_host": "eastus2drstorageacct.file.core.windows.net",
            "primary_file_internet_endpoint": "",
            "primary_file_internet_host": "",
            "primary_file_microsoft_endpoint": "",
            "primary_file_microsoft_host": "",
            "primary_location": "eastus2",
            "primary_queue_endpoint": "https://eastus2drstorageacct.queue.core.windows.net/",
            "primary_queue_host": "eastus2drstorageacct.queue.core.windows.net",
            "primary_queue_microsoft_endpoint": "",
            "primary_queue_microsoft_host": "",
            "primary_table_endpoint": "https://eastus2drstorageacct.table.core.windows.net/",
            "primary_table_host": "eastus2drstorageacct.table.core.windows.net",
            "primary_table_microsoft_endpoint": "",
            "primary_table_microsoft_host": "",
            "primary_web_endpoint": "https://eastus2drstorageacct.z20.web.core.windows.net/",
            "primary_web_host": "eastus2drstorageacct.z20.web.core.windows.net",
            "primary_web_internet_endpoint": "",
            "primary_web_internet_host": "",
            "primary_web_microsoft_endpoint": "",
            "primary_web_microsoft_host": "",
            "public_network_access_enabled": true,
            "queue_encryption_key_type": "Service",
            "queue_properties": [
              {
                "cors_rule": [],
                "hour_metrics": [
                  {
                    "enabled": true,
                    "include_apis": true,
                    "retention_policy_days": 7,
                    "version": "1.0"
                  }
                ],
                "logging": [
                  {
                    "delete": false,
                    "read": false,
                    "retention_policy_days": 0,
                    "version": "1.0",
                    "write": false
                  }
                ],
                "minute_metrics": [
                  {
                    "enabled": false,
                    "include_apis": false,
                    "retention_policy_days": 0,
                    "version": "1.0"
                  }
                ]
              }
            ],
            "resource_group_name": "dr_test_eastus2",
            "routing": [],
            "sas_policy": [],
            "secondary_access_key": "PHAIFmPSAAtj65+r7QReIA4pxibt4CeHmqerlWw1MsU8/EMnkHooCpYBJZStsGRGQMnLr2xzn/LR+ASt+fwNuw==",
            "secondary_blob_connection_string": "",
            "secondary_blob_endpoint": "",
            "secondary_blob_host": "",
            "secondary_blob_internet_endpoint": "",
            "secondary_blob_internet_host": "",
            "secondary_blob_microsoft_endpoint": "",
            "secondary_blob_microsoft_host": "",
            "secondary_connection_string": "DefaultEndpointsProtocol=https;AccountName=eastus2drstorageacct;AccountKey=PHAIFmPSAAtj65+r7QReIA4pxibt4CeHmqerlWw1MsU8/EMnkHooCpYBJZStsGRGQMnLr2xzn/LR+ASt+fwNuw==;EndpointSuffix=core.windows.net",
            "secondary_dfs_endpoint": "",
            "secondary_dfs_host": "",
            "secondary_dfs_internet_endpoint": "",
            "secondary_dfs_internet_host": "",
            "secondary_dfs_microsoft_endpoint": "",
            "secondary_dfs_microsoft_host": "",
            "secondary_file_endpoint": "",
            "secondary_file_host": "",
            "secondary_file_internet_endpoint": "",
            "secondary_file_internet_host": "",
            "secondary_file_microsoft_endpoint": "",
            "secondary_file_microsoft_host": "",
            "secondary_location": "",
            "secondary_queue_endpoint": "",
            "secondary_queue_host": "",
            "secondary_queue_microsoft_endpoint": "",
            "secondary_queue_microsoft_host": "",
            "secondary_table_endpoint": "",
            "secondary_table_host": "",
            "secondary_table_microsoft_endpoint": "",
            "secondary_table_microsoft_host": "",
            "secondary_web_endpoint": "",
            "secondary_web_host": "",
            "secondary_web_internet_endpoint": "",
            "secondary_web_internet_host": "",
            "secondary_web_microsoft_endpoint": "",
            "secondary_web_microsoft_host": "",
            "sftp_enabled": false,
            "share_properties": [
              {
                "cors_rule": [],
                "retention_policy": [
                  {
                    "days": 7
                  }
                ],
                "smb": []
              }
            ],
            "shared_access_key_enabled": true,
            "static_website": [],
            "table_encryption_key_type": "Service",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secondary_blob_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_blob_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_access_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_access_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_connection_string"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiI0In0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_container",
      "name": "dr_test_eastus2_dr_sync",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "container_access_type": "private",
            "default_encryption_scope": "$account-encryption-key",
            "encryption_scope_override_enabled": true,
            "has_immutability_policy": false,
            "has_legal_hold": false,
            "id": "https://eastus2drstorageacct.blob.core.windows.net/dr-sync",
            "metadata": {},
            "name": "dr-sync",
            "resource_manager_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/blobServices/default/containers/dr-sync",
            "storage_account_name": "eastus2drstorageacct",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_container",
      "name": "dr_test_eastus2_external",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "container_access_type": "private",
            "default_encryption_scope": "$account-encryption-key",
            "encryption_scope_override_enabled": true,
            "has_immutability_policy": false,
            "has_legal_hold": false,
            "id": "https://eastus2drstorageacct.blob.core.windows.net/external",
            "metadata": {},
            "name": "external",
            "resource_manager_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/blobServices/default/containers/external",
            "storage_account_name": "eastus2drstorageacct",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_catalog",
      "name": "dr_test_catalog",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "comment": "Test catalog for data organization",
            "connection_name": null,
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog",
            "isolation_mode": "OPEN",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_test_catalog",
            "options": null,
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "provider_name": null,
            "share_name": null,
            "storage_root": "abfss://external@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_cross_westus2_sync_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "Sync location for data storage in westus2",
            "credential_name": "dr_cross_westus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_cross_westus2_sync_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_cross_westus2_sync_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://dr-sync@westus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "data.terraform_remote_state.westus2",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_schema.main",
            "databricks_storage_credential.dr_cross_westus2_storage_credential",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_eastus2_external_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "External location for data storage in eastus2",
            "credential_name": "dr_eastus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_eastus2_external_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_eastus2_external_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://external@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_eastus2_sync_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "Sync location for data storage in eastus2",
            "credential_name": "dr_eastus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_eastus2_sync_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_eastus2_sync_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://dr-sync@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_dr_sync",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "dr_receiver_job",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "1082540245097670",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "dr_receiver",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "receiver",
                "name": "operation_type"
              },
              {
                "default": "primary",
                "name": "sync_location_to"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "PAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/dr_sync_job/main",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "receive_data",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#job/1082540245097670",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "dr_sender_job",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "936582477533956",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "dr_sender",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "sender",
                "name": "operation_type"
              },
              {
                "default": "secondary",
                "name": "sync_location_to"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "UNPAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/dr_sync_job/main",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "send_data",
                "timeout_seconds": 0,
                "webhook_notifications": [
                  {
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ]
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#job/936582477533956",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "sample_workflow_1",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "46914725038420",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "sample_workflow_1",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "eastus2drstorageacct",
                "name": "storageaccname"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "UNPAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "true",
                    "task_key": "status"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/bronze",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "adls_to_raw",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "raw_to_stage"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/archive",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "archive",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/file_checker",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "file_checker",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "adls_to_raw"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/silver",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "raw_to_stage",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "archive"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/gold",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "stage_to_main",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [
                  {
                    "left": "{{tasks.file_checker.values.file_check_status}}",
                    "op": "EQUAL_TO",
                    "right": "true"
                  }
                ],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "file_checker"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "status",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#job/46914725038420",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "workflow",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "800661416000542",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "sample_workflow_2",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "UNPAUSED",
                "quartz_cron_expression": "0 0/5 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "TransformToSilver"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/AggregateToGold",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "AggregateToGold",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/GenerateRawData",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "GenerateRawData",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "GenerateRawData"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/TransformToSilver",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "TransformToSilver",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#job/800661416000542",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_notebook.aggregate_to_gold",
            "databricks_notebook.generate_raw_data",
            "databricks_notebook.transform_to_silver"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_metastore",
      "name": "dr_eastus2_metastore",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].account",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cloud": "azure",
            "created_at": 1724680563328,
            "created_by": "mohit.singh@databricks.com",
            "default_data_access_config_id": null,
            "delta_sharing_organization_name": null,
            "delta_sharing_recipient_token_lifetime_in_seconds": 0,
            "delta_sharing_scope": "INTERNAL",
            "force_destroy": null,
            "global_metastore_id": "azure:eastus2:a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_eastus2_metastore",
            "owner": "mohit.singh@databricks.com",
            "region": "eastus2",
            "storage_root": null,
            "storage_root_credential_id": null,
            "updated_at": 1724680563328,
            "updated_by": "mohit.singh@databricks.com"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_metastore_assignment",
      "name": "dr_eastus2_metastore_assignment",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "default_catalog_name": "main",
            "id": "1164204460417135|a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "workspace_id": 1164204460417135
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_metastore.dr_eastus2_metastore"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "aggregate_to_gold",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBSZWFkIGZyb20gc2lsdmVyIHRhYmxlCmRmX3NpbHZlciA9IHNwYXJrLnRhYmxlKCJkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uuc2lsdmVyX2RhdGEiKQoKIyBBZ2dyZWdhdGlvbiAoZS5nLiwgY291bnQgYnkgbmFtZSkKZGZfZ29sZCA9IGRmX3NpbHZlci5ncm91cEJ5KCJuYW1lIikuY291bnQoKQoKIyBXcml0ZSB0byBnb2xkIHRhYmxlCmRmX2dvbGQud3JpdGUubW9kZSgib3ZlcndyaXRlIikuc2F2ZUFzVGFibGUoImRyX3Rlc3RfY2F0YWxvZy5tYWluLmdvbGRfZGF0YSIpCgo=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/AggregateToGold",
            "language": "PYTHON",
            "md5": "8582c64e84728db1397b06a97ef57031",
            "object_id": 3574564832210038,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/AggregateToGold",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/AggregateToGold"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "archive",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIFBhdGhzIHdoZXJlIHRoZSBmaWxlIGlzIGN1cnJlbnRseSBzdG9yZWQgYW5kIHdoZXJlIGl0IHdpbGwgYmUgYXJjaGl2ZWQKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCgpzb3VyY2VfcGF0aCA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9LmRmcy5jb3JlLndpbmRvd3MubmV0L2RhdGEvaW5nZXN0aW9uLyIKYXJjaGl2ZV9wYXRoID0gZiJhYmZzczovL2V4dGVybmFsQHtzdG9yYWdlYWNjbmFtZX0uZGZzLmNvcmUud2luZG93cy5uZXQvZGF0YS9hcmNoaXZlLyIKCiMgU3BlY2lmeSB0aGUgZmlsZSBuYW1lIChpZiBrbm93bikgb3IgbGlzdCBhbmQgcHJvY2VzcyBmaWxlcyBkeW5hbWljYWxseQojIEV4YW1wbGU6IGZpbGVfbmFtZSA9ICJzYW1wbGVfZmlsZV8yMDI0MDgxM18xNTQ1MzAudHh0IgoKIyBPcHRpb25hbGx5LCBsaXN0IGZpbGVzIGluIHRoZSBzb3VyY2UgcGF0aCAoaWYgeW91IHdhbnQgdG8gbW92ZSBhbGwgZmlsZXMpCmZpbGVzID0gZGJ1dGlscy5mcy5scyhzb3VyY2VfcGF0aCkKCmZvciBmaWxlX2luZm8gaW4gZmlsZXM6CiAgICBmaWxlX25hbWUgPSBmaWxlX2luZm8ubmFtZSAgIyBFeHRyYWN0IHRoZSBmaWxlIG5hbWUKICAgIHNvdXJjZV9maWxlX3BhdGggPSBmIntzb3VyY2VfcGF0aH17ZmlsZV9uYW1lfSIKICAgIGFyY2hpdmVfZmlsZV9wYXRoID0gZiJ7YXJjaGl2ZV9wYXRofXtmaWxlX25hbWV9IgogICAgCiAgICAjIE1vdmUgdGhlIGZpbGUgYnkgY29weWluZyBpdCB0byB0aGUgYXJjaGl2ZSBwYXRoIGFuZCB0aGVuIGRlbGV0aW5nIGl0IGZyb20gdGhlIHNvdXJjZSBwYXRoCiAgICBkYnV0aWxzLmZzLmNwKHNvdXJjZV9maWxlX3BhdGgsIGFyY2hpdmVfZmlsZV9wYXRoKQogICAgZGJ1dGlscy5mcy5ybShzb3VyY2VfZmlsZV9wYXRoKQoKICAgICMgUHJpbnQgY29uZmlybWF0aW9uCiAgICBwcmludChmIkZpbGUgbW92ZWQgZnJvbSB7c291cmNlX2ZpbGVfcGF0aH0gdG8ge2FyY2hpdmVfZmlsZV9wYXRofSIp",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/archive",
            "language": "PYTHON",
            "md5": "37249011925846bd3079befc2673e90f",
            "object_id": 3574564832210017,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/archive",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/archive"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "bronze",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgY3VycmVudF90aW1lc3RhbXAsIGxpdCwgZXhwciwgY29sCgp3b3Jrc3BhY2VfbmFtZSA9ICJlMi1kZW1vLWZpZWxkLWVuZyIgICMgUmVwbGFjZSB3aXRoIHRoZSBhY3R1YWwgd29ya3NwYWNlIG5hbWUKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCgojIFJlYWQgdGhlIGJpbmFyeSBmaWxlcyBmcm9tIGEgZGlyZWN0b3J5CmJpbmFyeV9kZiA9IChzcGFyay5yZWFkLmZvcm1hdCgiYmluYXJ5RmlsZSIpCiAgICAgICAgICAgICAubG9hZChmImFiZnNzOi8vZXh0ZXJuYWxAe3N0b3JhZ2VhY2NuYW1lfS5kZnMuY29yZS53aW5kb3dzLm5ldC9kYXRhL2luZ2VzdGlvbi8iKQoud2l0aENvbHVtbigiZmlsZV9tb2RpZmllZF90aW1lIiwgY29sKCJtb2RpZmljYXRpb25UaW1lIikpLndpdGhDb2x1bW4oImZpbGVfbmFtZSIsIGV4cHIoIl9tZXRhZGF0YS5maWxlX3BhdGgiKSkgICMgQWRqdXN0ZWQgbGluZQogICAgICAgICAgICAgLndpdGhDb2x1bW4oIndvcmtzcGFjZV9uYW1lIiwgbGl0KHdvcmtzcGFjZV9uYW1lKSkpCgojIFNhdmUgdGhlIGJpbmFyeSBkYXRhLCBmaWxlbmFtZSwgbW9kaWZpZWQgdGltZSwgYW5kIHdvcmtzcGFjZSBuYW1lIHRvIGEgRGVsdGEgdGFibGUKYmluYXJ5X2RmLndyaXRlLmZvcm1hdCgiZGVsdGEiKS5tb2RlKCJvdmVyd3JpdGUiKS5zYXZlQXNUYWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIpCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlc3FsIAojIE1BR0lDIHNlbGVjdCAqIGZyb20gZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZQ==",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/bronze",
            "language": "PYTHON",
            "md5": "ba0d0c443e1cfa795c83ad186500799b",
            "object_id": 3574564832210012,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/bronze",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/bronze"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_main",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIE1BR0lDICVydW4gLi91dGlscwoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXJ1biAuL3ZhbGlkYXRvcgoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXJ1biAuL3N5bmNfdG9fcmVnaW9uCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlcnVuIC4vc3luY19pbl9yZWdpb24KCiMgQ09NTUFORCAtLS0tLS0tLS0tCgojIFNldCB1cCB3aWRnZXRzIGZvciBpbnB1dCBwYXJhbWV0ZXJzCmRidXRpbHMud2lkZ2V0cy50ZXh0KCJvcGVyYXRpb25fdHlwZSIsICJzZW5kZXIiKSAgIyBPcGVyYXRpb246ICJzZW5kZXIiIG9yICJyZWNlaXZlciIKZGJ1dGlscy53aWRnZXRzLnRleHQoInN5bmNfbG9jYXRpb25fdG8iLCAic2Vjb25kYXJ5IikgICMgU3luYyBsb2NhdGlvbjogInByaW1hcnkiIG9yICJzZWNvbmRhcnkiCgojIFJldHJpZXZlIHBhcmFtZXRlciB2YWx1ZXMKb3BlcmF0aW9uX3R5cGUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJvcGVyYXRpb25fdHlwZSIpCnN5bmNfbG9jYXRpb25fdG8gPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzeW5jX2xvY2F0aW9uX3RvIikKCiMgQ09NTUFORCAtLS0tLS0tLS0tCgojIEV4cGxhbmF0aW9uIG9mIFBhcmFtZXRlcnM6CiMgLSBvcGVyYXRpb25fdHlwZTogVGhpcyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5vdGVib29rIHdpbGwgYWN0IGFzIGEgc2VuZGVyIG9yIHJlY2VpdmVyLgojICAgICAgICAgICAgICAgICAgICJzZW5kZXIiIHdpbGwgY2FsbCB0aGUgc3luY190b19yZWdpb24gZnVuY3Rpb24gdG8gc2VuZCBkYXRhIGZyb20gb25lIHJlZ2lvbiB0byBhbm90aGVyLgojICAgICAgICAgICAgICAgICAgICJyZWNlaXZlciIgd2lsbCBjYWxsIHRoZSBzeW5jX2luX3JlZ2lvbiBmdW5jdGlvbiB0byBzeW5jIGRhdGEgaW50byB0aGUgdGFyZ2V0IHJlZ2lvbi4KIyAtIHN5bmNfbG9jYXRpb25fdG86IFRoaXMgZGV0ZXJtaW5lcyB3aGljaCBzeW5jIGxvY2F0aW9uIChwcmltYXJ5IG9yIHNlY29uZGFyeSkgdG8gdXNlIGZvciByZWFkaW5nIGFuZCB3cml0aW5nIHRoZSBkYXRhLgoKTE9HX0xFVkVMID0gImRlYnVnIiAgIyBEZWZhdWx0IGxvZyBsZXZlbAoKIyBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGUKY29uZmlnID0gbG9hZF9jb25maWcoIi4vY29uZmlnL2NvbmZpZ19kZXYuanNvbiIpCnZhbGlkYXRlZF9jb25maWcgPSB2YWxpZGF0ZV9jb25maWcoY29uZmlnKQoKCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBCYXNlZCBvbiB0aGUgb3BlcmF0aW9uIHR5cGUsIGVpdGhlciAic3luY190b19yZWdpb24iIG9yICJzeW5jX2luX3JlZ2lvbiIgd2lsbCBiZSBleGVjdXRlZC4KCmlmIG9wZXJhdGlvbl90eXBlID09ICJzZW5kZXIiOgogICAgIyBTZW5kZXI6IFN5bmMgdG8gcmVnaW9uIChkZWVwIGNsb25lIGZyb20gb25lIGxvY2F0aW9uIHRvIGFub3RoZXIpCiAgICAjIFZhbGlkYXRlIHdvcmtmbG93cyBhbmQgdGFibGVzIGJlZm9yZSBzeW5jaW5nCiAgICB2YWxpZGF0ZV93b3JrZmxvd19hbmRfdGFibGVzKHZhbGlkYXRlZF9jb25maWcsIHN5bmNfbG9jYXRpb25fdG8pICAgIAogICAgc3luY190b19yZWdpb24oCiAgICAgICAgdmFsaWRhdGVkX2NvbmZpZywgICAgICAgICMgVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgY29udGFpbmluZyB3b3Jrc3BhY2UgYW5kIHN5bmMgZGV0YWlscwogICAgICAgIHN5bmNfbG9jYXRpb25fdG89c3luY19sb2NhdGlvbl90bywgICAgICAjIFVzZSB0aGUgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHN5bmMgbG9jYXRpb24KICAgICAgICBtYXhfd29ya2Vycz0xMCAgICAgICAgICAgIyBVc2UgdXAgdG8gMTAgdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZyBvZiB3b3JrZmxvd3MKICAgICkKZWxpZiBvcGVyYXRpb25fdHlwZSA9PSAicmVjZWl2ZXIiOgogICAgIyBSZWNlaXZlcjogU3luYyBkYXRhIGZyb20gdGhlIGV4dGVybmFsIGxvY2F0aW9uIGludG8gVW5pdHkgQ2F0YWxvZwogICAgc3luY19pbl9yZWdpb24oCiAgICAgICAgdmFsaWRhdGVkX2NvbmZpZywgICAgICAgICAgICAgIyBUaGUgdmFsaWRhdGVkIGNvbmZpZ3VyYXRpb24gZGljdGlvbmFyeSBjb250YWluaW5nIHdvcmtzcGFjZSBhbmQgc3luYyBkZXRhaWxzCiAgICAgICAgc3luY19sb2NhdGlvbl9mcm9tPXN5bmNfbG9jYXRpb25fdG8sICAjIFVzZSB0aGUgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHN5bmMgbG9jYXRpb24gdG8gcmVhZCBmcm9tCiAgICAgICAgbWF4X3dvcmtlcnM9MTAgICAgICAgICAgICAgICAgIyBVc2UgdXAgdG8gMTAgdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZwogICAgKQplbHNlOgogICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJJbnZhbGlkIG9wZXJhdGlvbl90eXBlOiB7b3BlcmF0aW9uX3R5cGV9LiBNdXN0IGJlIGVpdGhlciAnc2VuZGVyJyBvciAncmVjZWl2ZXInLiIpCiAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCBvcGVyYXRpb25fdHlwZToge29wZXJhdGlvbl90eXBlfS4gTXVzdCBiZSBlaXRoZXIgJ3NlbmRlcicgb3IgJ3JlY2VpdmVyJy4iKQoKIyBDT01NQU5EIC0tLS0tLS0tLS0=",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/main",
            "language": "PYTHON",
            "md5": "61e1ebd979e755da36551860eede6634",
            "object_id": 3574564832210026,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/main",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/dr_sync_job/main"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_sync_in_region",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpkZWYgc3luY19pbl9yZWdpb24odmFsaWRhdGVkX2NvbmZpZzogZGljdCwgc3luY19sb2NhdGlvbl9mcm9tOiBzdHIgPSAic2Vjb25kYXJ5IiwgbWF4X3dvcmtlcnM6IGludCA9IDEwKToKICAgICIiIgogICAgU3luY3MgRGVsdGEgdGFibGVzIGZyb20gYW4gZXh0ZXJuYWwgbG9jYXRpb24gKGFiZnNzIHBhdGgpIGludG8gVW5pdHkgQ2F0YWxvZyBiYXNlZCBvbiB0aGUgc3luYyB0aW1lcy4KCiAgICBBcmdzOgogICAgLSB2YWxpZGF0ZWRfY29uZmlnIChkaWN0KTogVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGNvbnRhaW5pbmcgd29ya3NwYWNlIGFuZCBzeW5jIGRldGFpbHMuCiAgICAtIHN5bmNfbG9jYXRpb25fZnJvbSAoc3RyKTogU3BlY2lmeSAncHJpbWFyeScgb3IgJ3NlY29uZGFyeScgdG8gY2hvb3NlIHRoZSBzeW5jIGxvY2F0aW9uIHRvIHJlYWQgZnJvbS4KICAgIC0gbWF4X3dvcmtlcnMgKGludCk6IFRoZSBudW1iZXIgb2Ygd29ya2VycyBmb3IgbXVsdGl0aHJlYWRpbmcuCgogICAgUmV0dXJuczoKICAgIC0gTm9uZQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBTdGVwIDE6IEl0ZXJhdGUgdGhyb3VnaCB0aGUgd29ya3NwYWNlcyBpbiB0aGUgdmFsaWRhdGVkIGNvbmZpZwogICAgICAgIGZvciB3b3Jrc3BhY2UgaW4gdmFsaWRhdGVkX2NvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgICAgICB3b3Jrc3BhY2VfbmFtZSA9IHdvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXQoKICAgICAgICAgICAgIyBDaG9vc2UgdGhlIG1ldGFkYXRhIHRhYmxlIHBhdGggYmFzZWQgb24gdGhlIHN5bmNfbG9jYXRpb25fZnJvbQogICAgICAgICAgICBzeW5jX2xvY2F0aW9uID0gd29ya3NwYWNlW2Yic3luY19sb2NhdGlvbl97c3luY19sb2NhdGlvbl9mcm9tfSJdCiAgICAgICAgICAgIG1ldGFkYXRhX3RhYmxlX3BhdGggPSBmIntzeW5jX2xvY2F0aW9ufS9tZXRhL3N5bmNfbWV0YWRhdGFfdGFibGUiCgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiU3RhcnRpbmcgc3luYyBmb3Igd29ya3NwYWNlOiB7d29ya3NwYWNlX25hbWV9IHVzaW5nIHtzeW5jX2xvY2F0aW9uX2Zyb219IHN5bmMgbG9jYXRpb24uIikKCiAgICAgICAgICAgICMgU3RlcCAyOiBMb2FkIHRoZSBtZXRhZGF0YSB0YWJsZSBpbnRvIGEgU3BhcmsgRGF0YUZyYW1lCiAgICAgICAgICAgIG1ldGFkYXRhX2RmID0gc3BhcmsucmVhZC5mb3JtYXQoImRlbHRhIikubG9hZChtZXRhZGF0YV90YWJsZV9wYXRoKQoKICAgICAgICAgICAgIyBTdGVwIDM6IEZpbHRlciByZWNvcmRzIHdoZXJlIHN5bmNfdGltZV90b19yZWdpb24gPj0gc3luY190aW1lX2luX3JlZ2lvbiBvciBzeW5jX3RpbWVfaW5fcmVnaW9uIGlzIG51bGwgKGZpcnN0LXRpbWUgc3luYykKICAgICAgICAgICAgZmlsdGVyZWRfbWV0YWRhdGFfZGYgPSBtZXRhZGF0YV9kZi5maWx0ZXIoCiAgICAgICAgICAgICAgICAobWV0YWRhdGFfZGZbInN5bmNfdGltZV90b19yZWdpb24iXS5pc05vdE51bGwoKSkgJgogICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhX2RmWyJzeW5jX3RpbWVfaW5fcmVnaW9uIl0uaXNOdWxsKCkgfCAgIyBJbmNsdWRlIGZpcnN0LXRpbWUgc3luY3Mgd2hlcmUgc3luY190aW1lX2luX3JlZ2lvbiBpcyBudWxsCiAgICAgICAgICAgICAgICAgICAgKG1ldGFkYXRhX2RmWyJzeW5jX3RpbWVfdG9fcmVnaW9uIl0gPj0gbWV0YWRhdGFfZGZbInN5bmNfdGltZV9pbl9yZWdpb24iXSkgICMgT3Igd2hlcmUgc3luY190aW1lX3RvX3JlZ2lvbiA+PSBzeW5jX3RpbWVfaW5fcmVnaW9uCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGZpbHRlcmVkX21ldGFkYXRhX2RmLmNvdW50KCkgPT0gMDoKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgIk5vIHJlY29yZHMgdG8gc3luYy4iKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgU3RlcCA0OiBDYXB0dXJlIHRoZSBjdXJyZW50IHRpbWVzdGFtcCBmb3Igc3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICAgICBzeW5jX3RpbWVfaW5fcmVnaW9uID0gZGF0ZXRpbWUudXRjbm93KCkuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKCiAgICAgICAgICAgICMgU3RlcCA1OiBDb2xsZWN0IGZpbHRlcmVkIHJvd3MgYW5kIHN5bmMgdGhlbSBpbiBwYXJhbGxlbAogICAgICAgICAgICByZWNvcmRzX3RvX3N5bmMgPSBmaWx0ZXJlZF9tZXRhZGF0YV9kZi5jb2xsZWN0KCkgICMgQ29sbGVjdCB0aGUgZmlsdGVyZWQgcmVjb3JkcyB0byBzeW5jCgogICAgICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz1tYXhfd29ya2VycykgYXMgZXhlY3V0b3I6CiAgICAgICAgICAgICAgICBmdXR1cmVzID0gW10KCiAgICAgICAgICAgICAgICBmb3Igcm93IGluIHJlY29yZHNfdG9fc3luYzoKICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VfbmFtZSA9IHJvd1sid29ya3NwYWNlX25hbWUiXQogICAgICAgICAgICAgICAgICAgIGdyb3VwX25hbWUgPSByb3dbImdyb3VwX25hbWUiXQogICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAidGFibGVzIjogcm93WyJ0YWJsZXMiXSwKICAgICAgICAgICAgICAgICAgICAgICAgInN5bmNfdGltZV90b19yZWdpb24iOiByb3dbInN5bmNfdGltZV90b19yZWdpb24iXSwKICAgICAgICAgICAgICAgICAgICAgICAgInN5bmNfdGltZV9pbl9yZWdpb24iOiByb3dbInN5bmNfdGltZV9pbl9yZWdpb24iXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAjIFN1Ym1pdCBlYWNoIGdyb3VwIHRvIGEgd29ya2VyIHRocmVhZAogICAgICAgICAgICAgICAgICAgIGZ1dHVyZSA9IGV4ZWN1dG9yLnN1Ym1pdCgKICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc19zeW5jX3RvX3JlZ2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICBzeW5jX2xvY2F0aW9uLCAKICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFfdGFibGVfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgc3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBmdXR1cmVzLmFwcGVuZChmdXR1cmUpCgogICAgICAgICAgICAgICAgIyBXYWl0IGZvciBhbGwgdGhyZWFkcyB0byBjb21wbGV0ZQogICAgICAgICAgICAgICAgZm9yIGZ1dHVyZSBpbiBhc19jb21wbGV0ZWQoZnV0dXJlcyk6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBmdXR1cmUucmVzdWx0KCkKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsIGYiRXJyb3IgZHVyaW5nIHN5bmM6IHtlfSIpCgogICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgIlN5bmMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4iKQogICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJGYWlsZWQgdG8gc3luYyB0YWJsZXM6IHtlfSIpCgoKZGVmIHByb2Nlc3Nfc3luY190b19yZWdpb24od29ya3NwYWNlX25hbWU6IHN0ciwgZ3JvdXBfbmFtZTogc3RyLCBtZXRhZGF0YTogZGljdCwgc3luY19sb2NhdGlvbjogc3RyLCBtZXRhZGF0YV90YWJsZV9wYXRoOiBzdHIsIHN5bmNfdGltZV9pbl9yZWdpb246IHN0cik6CiAgICAiIiIKICAgIFByb2Nlc3NlcyB0aGUgc3luYyBmb3IgZWFjaCBncm91cCwgcmVhZGluZyBmcm9tIGFiZnNzIGxvY2F0aW9uIGFuZCBkZWVwIGNsb25pbmcgaW50byBVbml0eSBDYXRhbG9nLgoKICAgIEFyZ3M6CiAgICAtIHdvcmtzcGFjZV9uYW1lIChzdHIpOiBUaGUgd29ya3NwYWNlIG5hbWUuCiAgICAtIGdyb3VwX25hbWUgKHN0cik6IFRoZSBncm91cCBuYW1lLgogICAgLSBtZXRhZGF0YSAoZGljdCk6IFRoZSBtZXRhZGF0YSByZWNvcmQgZm9yIHRoZSBncm91cC4KICAgIC0gc3luY19sb2NhdGlvbiAoc3RyKTogVGhlIHN5bmMgbG9jYXRpb24gKGUuZy4sIHNlY29uZGFyeSkuCiAgICAtIG1ldGFkYXRhX3RhYmxlX3BhdGggKHN0cik6IFRoZSBwYXRoIHRvIHRoZSBtZXRhZGF0YSB0YWJsZSBmb3IgdXBkYXRpbmcuCiAgICAtIHN5bmNfdGltZV9pbl9yZWdpb24gKHN0cik6IFRoZSB0aW1lc3RhbXAgdG8gdXBkYXRlIHN5bmNfdGltZV9pbl9yZWdpb24uCgogICAgUmV0dXJuczoKICAgIC0gTm9uZQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBTdGVwIDE6IEV4dHJhY3QgdGFibGVzIGZyb20gdGhlIG1ldGFkYXRhCiAgICAgICAgdGFibGVzID0gbWV0YWRhdGFbInRhYmxlcyJdCiAgICAgICAgc3luY190aW1lX3RvX3JlZ2lvbiA9IG1ldGFkYXRhLmdldCgic3luY190aW1lX3RvX3JlZ2lvbiIpICAjIEdldCB0aGUgc3luY190aW1lX3RvX3JlZ2lvbiBmb3IgY29tcGFyaXNvbgoKICAgICAgICBpZiBub3Qgc3luY190aW1lX3RvX3JlZ2lvbjoKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCBmIk5vIHN5bmNfdGltZV90b19yZWdpb24gZm91bmQgZm9yIHt3b3Jrc3BhY2VfbmFtZX0ve2dyb3VwX25hbWV9LiBTa2lwcGluZy4iKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZm9yIHRhYmxlIGluIHRhYmxlczoKICAgICAgICAgICAgIyBQYXJzZSB0aGUgY2F0YWxvZywgc2NoZW1hLCBhbmQgdGFibGUgbmFtZSBmcm9tIHRoZSB0YWJsZSBzdHJpbmcKICAgICAgICAgICAgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lID0gdGFibGUuc3BsaXQoIi4iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBTdGVwIDI6IENyZWF0ZSB0aGUgYWJmc3MgcGF0aCBiYXNlZCBvbiB0aGUgZXh0ZXJuYWwgbG9jYXRpb24gKHN5bmNfbG9jYXRpb24pCiAgICAgICAgICAgIGFiZnNzX3BhdGggPSBmIntzeW5jX2xvY2F0aW9ufS97Y2F0YWxvZ30ve3NjaGVtYX0ve3RhYmxlX25hbWV9IgoKICAgICAgICAgICAgIyBTdGVwIDM6IEdldCB0aGUgaGlnaGVzdCB2ZXJzaW9uIGJlZm9yZSBzeW5jX3RpbWVfdG9fcmVnaW9uIHVzaW5nICdERVNDUklCRSBISVNUT1JZJwogICAgICAgICAgICBoaXN0b3J5X3F1ZXJ5ID0gZiJERVNDUklCRSBISVNUT1JZIGRlbHRhLmB7YWJmc3NfcGF0aH1gIgogICAgICAgICAgICBoaXN0b3J5X2RmID0gc3Bhcmsuc3FsKGhpc3RvcnlfcXVlcnkpCgogICAgICAgICAgICAjIEZpbHRlciB0aGUgaGlzdG9yeSB0byBnZXQgdGhlIHZlcnNpb24gYmVmb3JlIHN5bmNfdGltZV90b19yZWdpb24KICAgICAgICAgICAgdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wID0gKGhpc3RvcnlfZGYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZiJ0aW1lc3RhbXAgPD0gJ3tzeW5jX3RpbWVfdG9fcmVnaW9ufSciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9yZGVyQnkoInRpbWVzdGFtcCIsIGFzY2VuZGluZz1GYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoInZlcnNpb24iLCAidGltZXN0YW1wIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5saW1pdCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbGxlY3QoKSkKCiAgICAgICAgICAgIGlmIG5vdCB2ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXA6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiTm8gdmFsaWQgdmVyc2lvbiBmb3VuZCBiZWZvcmUge3N5bmNfdGltZV90b19yZWdpb259IGZvciB7YWJmc3NfcGF0aH0uIFNraXBwaW5nLiIpCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIGxhdGVzdF92ZXJzaW9uX2JlZm9yZV9zeW5jX3RpbWUgPSB2ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXBbMF1bJ3ZlcnNpb24nXQoKICAgICAgICAgICAgIyBTdGVwIDQ6IFBlcmZvcm0gZGVlcCBjbG9uZSB1c2luZyB0aGUgdmVyc2lvbiBpZGVudGlmaWVkCiAgICAgICAgICAgIHRhcmdldF90YWJsZSA9IGYie2NhdGFsb2d9LntzY2hlbWF9Lnt0YWJsZV9uYW1lfSIKCiAgICAgICAgICAgIHNxbF9jb21tYW5kID0gZiIiIgogICAgICAgICAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMge3RhcmdldF90YWJsZX0gCiAgICAgICAgICAgICAgICBERUVQIENMT05FIGRlbHRhLmB7YWJmc3NfcGF0aH1gIFZFUlNJT04gQVMgT0Yge2xhdGVzdF92ZXJzaW9uX2JlZm9yZV9zeW5jX3RpbWV9CiAgICAgICAgICAgICIiIgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIkV4ZWN1dGluZyBTUUw6IHtzcWxfY29tbWFuZH0iKQogICAgICAgICAgICBzcGFyay5zcWwoc3FsX2NvbW1hbmQpCgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiVGFibGUge3RhYmxlfSBkZWVwIGNsb25lZCBpbnRvIFVuaXR5IENhdGFsb2cgYXQge3RhcmdldF90YWJsZX0gdXNpbmcgdmVyc2lvbiB7bGF0ZXN0X3ZlcnNpb25fYmVmb3JlX3N5bmNfdGltZX0iKQoKICAgICAgICAjIFN0ZXAgNTogVXBkYXRlIHRoZSBtZXRhZGF0YSB3aXRoIHRoZSBzeW5jX3RpbWVfaW5fcmVnaW9uCiAgICAgICAgdXBkYXRlX21ldGFkYXRhX3N0YXR1cygKICAgICAgICAgICAgbWV0YWRhdGFfdGFibGVfcGF0aCwgCiAgICAgICAgICAgIHdvcmtzcGFjZV9uYW1lLCAKICAgICAgICAgICAgZ3JvdXBfbmFtZSwgCiAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb249c3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlVwZGF0ZWQgc3luY190aW1lX2luX3JlZ2lvbiBmb3Ige3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX0iKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkVycm9yIHN5bmNpbmcge3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX06IHtlfSIpCgoK",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/sync_in_region",
            "language": "PYTHON",
            "md5": "40a0431eabac1134d309e34436c25b90",
            "object_id": 3574564832210006,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/sync_in_region",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/dr_sync_job/sync_in_region"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_sync_to_region",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IsIGFzX2NvbXBsZXRlZApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgcHl0egpmcm9tIHB5c3Bhcmsuc3FsIGltcG9ydCBmdW5jdGlvbnMgYXMgRgoKIyBHbG9iYWwgdmFyaWFibGUgdG8gY29sbGVjdCBpbmZvLWxldmVsIGxvZ3MgZm9yIHN1Y2Nlc3NmdWwgd29ya2Zsb3dzCnN1Y2Nlc3NmdWxfd29ya2Zsb3dzID0gW10KCmRlZiBwcm9jZXNzX3dvcmtmbG93X3RvX3JlZ2lvbih3b3JrZmxvd19kYXRhLCBpbnN0YW5jZV91cmwsIHBhdF90b2tlbiwgdGFyZ2V0X2xvY2F0aW9uLCBtZXRhZGF0YV90YWJsZV9wYXRoLCBzeW5jX2ludGVydmFsX21pbnMsIHN5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucyk6CiAgICAiIiIKICAgIFByb2Nlc3MgYSBzaW5nbGUgd29ya2Zsb3c6IENoZWNrIGZvciBuZXcgY29tbWl0cywgdGhlbiBkbyBBUEkgY2FsbCBhbmQgZGVlcCBjbG9uZSBpZiByZXF1aXJlZC4KICAgIEFsc28sIHVwZGF0ZSB0aGUgbWV0YWRhdGEgdGFibGUgd2l0aCBzeW5jIHN0YXR1cyBvbmx5IHdoZW4gdGhlcmUgaXMgYSBkZWVwIGNsb25lIHBlcmZvcm1lZC4KICAgICIiIgogICAgCiAgICAod29ya3NwYWNlX25hbWUsIGdyb3VwX25hbWUpLCBtZXRhZGF0YSA9IHdvcmtmbG93X2RhdGEKICAgIHRhYmxlcyA9IG1ldGFkYXRhWyJ0YWJsZXMiXQogICAgdmFsaWRhdGVkID0gbWV0YWRhdGEuZ2V0KCJ2YWxpZGF0ZWQiLCBOb25lKSAgIyBDYW4gYmUgTm9uZSBpZiBub3QgYXZhaWxhYmxlCiAgICB3b3JrZmxvd19pZCA9IG1ldGFkYXRhLmdldCgid29ya2Zsb3dfaWQiLCBOb25lKQogICAgbGFzdF9zeW5jX3RpbWUgPSBtZXRhZGF0YS5nZXQoImxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSIsIE5vbmUpCiAgICBzeW5jX3N0YXR1cyA9IG1ldGFkYXRhLmdldCgic3luY19zdGF0dXMiLCBOb25lKQoKICAgICMgU3RlcCAxOiBQYXJzZSBhbGwgdGFibGVzIGludG8gYSBsaXN0IG9mIChjYXRhbG9nLCBzY2hlbWEsIHRhYmxlX25hbWUpCiAgICBwYXJzZWRfdGFibGVzID0gW10KICAgIGZvciB0YWJsZSBpbiB0YWJsZXM6CiAgICAgICAgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lID0gdGFibGUuc3BsaXQoIi4iKQogICAgICAgIHBhcnNlZF90YWJsZXMuYXBwZW5kKChjYXRhbG9nLCBzY2hlbWEsIHRhYmxlX25hbWUpKQoKICAgICMgU3RlcCAyOiBDaGVjayBmb3IgbmV3IGNvbW1pdHMgaW4gYW55IG9mIHRoZSB0YWJsZXMKICAgIG5ld19jb21taXRzX2ZvdW5kID0gRmFsc2UKICAgIHRyeToKICAgICAgICBmb3IgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lIGluIHBhcnNlZF90YWJsZXM6CiAgICAgICAgICAgIHNvdXJjZV90YWJsZSA9IGYie2NhdGFsb2d9LntzY2hlbWF9Lnt0YWJsZV9uYW1lfSIKCiAgICAgICAgICAgICMgUXVlcnkgdGhlIGhpc3Rvcnkgb2YgdGhlIHRhYmxlIHRvIGNoZWNrIGZvciBjb21taXRzIGFmdGVyIHRoZSBsYXN0IHN5bmMKICAgICAgICAgICAgaGlzdG9yeV9kZiA9IHNwYXJrLnNxbChmIkRFU0NSSUJFIEhJU1RPUlkge3NvdXJjZV90YWJsZX0iKQoKICAgICAgICAgICAgIyBJZiBsYXN0X3N5bmNfdGltZSBpcyBOb25lLCBhc3N1bWUgaXQncyB0aGUgZmlyc3Qgc3luYyBhbmQgcHJvY2VlZAogICAgICAgICAgICBpZiBsYXN0X3N5bmNfdGltZSBpcyBOb25lIG9yIHN5bmNfc3RhdHVzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIkZpcnN0IHRpbWUgc3luYyBmb3Ige2dyb3VwX25hbWV9LCBwcm9jZWVkaW5nIHdpdGggc3luYy4iKQogICAgICAgICAgICAgICAgbmV3X2NvbW1pdHNfZm91bmQgPSBUcnVlCiAgICAgICAgICAgICAgICBicmVhayAgIyBObyBuZWVkIHRvIGNoZWNrIGZ1cnRoZXIgdGFibGVzLCBidXQgdGhleSB3aWxsIHN0aWxsIGJlIHBhcnQgb2YgdGhlIGRlZXAgY2xvbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgSWYgbGFzdF9zeW5jX3RpbWUgaXMgYXZhaWxhYmxlLCBjaGVjayBmb3IgbmV3IGNvbW1pdHMKICAgICAgICAgICAgICAgIGxhc3Rfc3luY19kYXRldGltZSA9IGxhc3Rfc3luY190aW1lIGlmIGlzaW5zdGFuY2UobGFzdF9zeW5jX3RpbWUsIGRhdGV0aW1lKSBlbHNlIGRhdGV0aW1lLnN0cnB0aW1lKGxhc3Rfc3luY190aW1lLCAiJVktJW0tJWQgJUg6JU06JVMiKS5yZXBsYWNlKHR6aW5mbz1weXR6LlVUQykKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiTGFzdCBzdWNjZXNzZnVsIHN5bmMgZm9yIHdvcmtmbG93IHtncm91cF9uYW1lfSwgdGFibGUge3NvdXJjZV90YWJsZX0gd2FzIHtsYXN0X3N5bmNfZGF0ZXRpbWV9LiIpCiAgICAgICAgICAgICAgICBuZXdfY29tbWl0cyA9IGhpc3RvcnlfZGYuZmlsdGVyKGhpc3RvcnlfZGZbJ3RpbWVzdGFtcCddID4gbGFzdF9zeW5jX2RhdGV0aW1lKS5jb3VudCgpCgogICAgICAgICAgICAgICAgaWYgbmV3X2NvbW1pdHMgPiAwOgogICAgICAgICAgICAgICAgICAgIG5ld19jb21taXRzX2ZvdW5kID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrICAjIFN0b3AgY2hlY2tpbmcgZnVydGhlciB0YWJsZXMgb25jZSB3ZSBmaW5kIG5ldyBjb21taXRzCgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiQ2hlY2tlZCBjb21taXRzIGZvciB7Z3JvdXBfbmFtZX0sIG5ldyBjb21taXRzIGZvdW5kOiB7bmV3X2NvbW1pdHNfZm91bmR9IikKCiAgICAgICAgIyBJZiBubyBuZXcgY29tbWl0cyBhbmQgbm90IHRoZSBmaXJzdCBzeW5jLCBza2lwIHRoZSB3b3JrZmxvdyB3aXRob3V0IHVwZGF0aW5nIG1ldGFkYXRhCiAgICAgICAgaWYgbm90IG5ld19jb21taXRzX2ZvdW5kOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIk5vIG5ldyBjb21taXRzIGZvdW5kIGZvciBncm91cCB7Z3JvdXBfbmFtZX0sIHNraXBwaW5nLiIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIFN0ZXAgMzogSWYgd29ya2Zsb3dfaWQgZXhpc3RzIGFuZCB2YWxpZGF0ZWQsIGNoZWNrIHRoZSB3b3JrZmxvdyBydW4KICAgICAgICBpZiB3b3JrZmxvd19pZDoKICAgICAgICAgICAgaWYgdmFsaWRhdGVkOgogICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bF9ydW5zID0gam9iX3N1Y2Nlc3NmdWxfcnVuX2FmdGVyX2xhc3RfcnVuKGluc3RhbmNlX3VybCwgcGF0X3Rva2VuLCBbd29ya2Zsb3dfaWRdLCBsYXN0X3N5bmNfdGltZSkKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiRm91bmQgc3VjY2Vzc2Z1bCBydW5zIGZvciB3b3JrZmxvdyB7d29ya2Zsb3dfaWR9IGFmdGVyIHtsYXN0X3N5bmNfdGltZX0gYXMge3N1Y2Nlc3NmdWxfcnVuc30iKQogICAgICAgICAgICAgICAgaWYgd29ya2Zsb3dfaWQgbm90IGluIHN1Y2Nlc3NmdWxfcnVucyBvciBub3Qgc3VjY2Vzc2Z1bF9ydW5zW3dvcmtmbG93X2lkXToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIk5vIHN1Y2Nlc3NmdWwgcnVucyBmb3VuZCBmb3Igd29ya2Zsb3cge3dvcmtmbG93X2lkfSBhZnRlciB7bGFzdF9zeW5jX3RpbWV9LiBTa2lwcGluZyBzeW5jLiIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIyBDaGVjayBpZiB0aGUgY3VycmVudCB0aW1lIG1pbnVzIGxhc3Rfc3luY190aW1lIGV4Y2VlZHMgc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF90aW1lID0gZGF0ZXRpbWUudXRjbm93KCkucmVwbGFjZSh0emluZm89cHl0ei5VVEMpCiAgICAgICAgICAgICAgICAgICAgbGFzdF9zeW5jX2RhdGV0aW1lID0gbGFzdF9zeW5jX3RpbWUgaWYgaXNpbnN0YW5jZShsYXN0X3N5bmNfdGltZSwgZGF0ZXRpbWUpIGVsc2UgZGF0ZXRpbWUuc3RycHRpbWUobGFzdF9zeW5jX3RpbWUsICIlWS0lbS0lZCAlSDolTTolUyIpLnJlcGxhY2UodHppbmZvPXB5dHouVVRDKQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3RpbWUgLSBsYXN0X3N5bmNfZGF0ZXRpbWUpLnRvdGFsX3NlY29uZHMoKSAvIDYwID4gc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgid2FybmluZyIsIGYiU3luYyBmYWlsb3ZlciBpbnRlcnZhbCBleGNlZWRlZCBmb3Ige2dyb3VwX25hbWV9LCBwcm9jZWVkaW5nIHdpdGggc3luYy4iKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXAgPSBzdWNjZXNzZnVsX3J1bnNbd29ya2Zsb3dfaWRdIGlmIHN1Y2Nlc3NmdWxfcnVuc1t3b3JrZmxvd19pZF0gZWxzZSAobGFzdF9zeW5jX2RhdGV0aW1lICsgdGltZWRlbHRhKG1pbnV0ZXM9c3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zKSkKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiVXNpbmcgbGFzdCBzdWNjZXNzZnVsIHJ1biB0aW1lc3RhbXA6IHtsYXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wfSIpCgogICAgICAgICAgICAgICAgIyBTdGVwIDQ6IFVwZGF0ZSBzdGF0dXMgdG8gJ0luIFByb2dyZXNzJyBhZnRlciB3b3JrZmxvdyBjaGVjayBhbmQgYmVmb3JlIGRlZXAgY2xvbmluZwogICAgICAgICAgICAgICAgdXBkYXRlX21ldGFkYXRhX3N0YXR1cyhtZXRhZGF0YV90YWJsZV9wYXRoLCB3b3Jrc3BhY2VfbmFtZSwgZ3JvdXBfbmFtZSwgIkluIFByb2dyZXNzIikKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiU2V0ICdJbiBQcm9ncmVzcycgc3RhdHVzIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfSIpCgogICAgICAgICAgICAgICAgIyBTdGVwIDU6IFBlcmZvcm0gZGVlcCBjbG9uZSBmb3IgZWFjaCB0YWJsZSwgdXNpbmcgdGhlIGhpZ2hlc3QgdmVyc2lvbiBiZWZvcmUgbGFzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcAogICAgICAgICAgICAgICAgZm9yIGNhdGFsb2csIHNjaGVtYSwgdGFibGVfbmFtZSBpbiBwYXJzZWRfdGFibGVzOgogICAgICAgICAgICAgICAgICAgIHNvdXJjZV90YWJsZSA9IGYie2NhdGFsb2d9LntzY2hlbWF9Lnt0YWJsZV9uYW1lfSIKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXAgPSAoc3Bhcmsuc3FsKGYiREVTQ1JJQkUgSElTVE9SWSB7c291cmNlX3RhYmxlfSIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZiJ0aW1lc3RhbXAgPD0gJ3tsYXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wfSciKQogICAgICAgICAgICAgICAgICAgICAgICAub3JkZXJCeSgidGltZXN0YW1wIiwgYXNjZW5kaW5nPUZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCJ2ZXJzaW9uIiwgInRpbWVzdGFtcCIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5saW1pdCgxKQogICAgICAgICAgICAgICAgICAgICAgICAuY29sbGVjdCgpKQoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiTm8gdmFsaWQgdmVyc2lvbiBmb3VuZCBiZWZvcmUge2xhc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXB9IGZvciB0YWJsZSB7c291cmNlX3RhYmxlfS4gU2tpcHBpbmcuIikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0X3ZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcCA9IHZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcFswXVsndmVyc2lvbiddCgogICAgICAgICAgICAgICAgICAgICMgUnVuIHRoZSBkZWVwIGNsb25lIFNRTCBjb21tYW5kIHdpdGggVkVSU0lPTiBBUyBPRiBmb3IgZWFjaCB0YWJsZQogICAgICAgICAgICAgICAgICAgIHRhcmdldF90YWJsZV9wYXRoID0gZiJ7dGFyZ2V0X2xvY2F0aW9ufS97Y2F0YWxvZ30ve3NjaGVtYX0ve3RhYmxlX25hbWV9IgoKICAgICAgICAgICAgICAgICAgICBzcWxfY29tbWFuZCA9IGYiIiIKICAgICAgICAgICAgICAgICAgICAgICAgQ1JFQVRFIE9SIFJFUExBQ0UgVEFCTEUgZGVsdGEuYHt0YXJnZXRfdGFibGVfcGF0aH1gIAogICAgICAgICAgICAgICAgICAgICAgICBERUVQIENMT05FIHtzb3VyY2VfdGFibGV9IFZFUlNJT04gQVMgT0Yge2xhdGVzdF92ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXB9CiAgICAgICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJFeGVjdXRpbmcgU1FMIGNvbW1hbmQ6IHtzcWxfY29tbWFuZH0iKQogICAgICAgICAgICAgICAgICAgIHNwYXJrLnNxbChzcWxfY29tbWFuZCkKCiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJEZWVwIGNsb25lZCB0YWJsZSB7c291cmNlX3RhYmxlfSB0byB7dGFyZ2V0X3RhYmxlX3BhdGh9IGFzIG9mIHZlcnNpb24ge2xhdGVzdF92ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXB9IikKCiAgICAgICAgIyBTdGVwIDQ6IElmIHRoZXJlIGlzIG5vIHdvcmtmbG93X2lkLCBwcm9jZWVkIGRpcmVjdGx5IHdpdGggZGVlcCBjbG9uZSBmb3IgdGhlIHRhYmxlcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgSGFuZGxlIGdyb3VwcyB3aXRob3V0IHdvcmtmbG93cywgcGVyZm9ybSBkZWVwIGNsb25lIGZvciBlYWNoIHRhYmxlCiAgICAgICAgICAgIHByb2NlZWQgPSBGYWxzZQogICAgICAgICAgICBjdXJyZW50X3RpbWUgPSBkYXRldGltZS51dGNub3coKS5yZXBsYWNlKHR6aW5mbz1weXR6LlVUQykKICAgICAgICAgICAgaWYgbGFzdF9zeW5jX3RpbWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBsYXN0X3N5bmNfZGF0ZXRpbWUgPSBsYXN0X3N5bmNfdGltZSBpZiBpc2luc3RhbmNlKGxhc3Rfc3luY190aW1lLCBkYXRldGltZSkgZWxzZSBkYXRldGltZS5zdHJwdGltZShsYXN0X3N5bmNfdGltZSwgIiVZLSVtLSVkICVIOiVNOiVTIikucmVwbGFjZSh0emluZm89cHl0ei5VVEMpCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90aW1lIC0gbGFzdF9zeW5jX2RhdGV0aW1lKS50b3RhbF9zZWNvbmRzKCkgLyA2MCA+IHN5bmNfaW50ZXJ2YWxfbWluczoKICAgICAgICAgICAgICAgICAgICBwcm9jZWVkID0gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJvY2VlZCA9IFRydWUgICAgICAgIAogICAgICAgICAgICAjIFBlcmZvcm0gc3luYyBvbmx5IGlmIGN1cnJlbnQgdGltZXN0YW1wIC0gbGFzdF9zeW5jX3RpbWUgPiBzeW5jX2ludGVydmFsX21pbnMKICAgICAgICAgICAgaWYgcHJvY2VlZDoKICAgICAgICAgICAgICAgIGZvciBjYXRhbG9nLCBzY2hlbWEsIHRhYmxlX25hbWUgaW4gcGFyc2VkX3RhYmxlczoKICAgICAgICAgICAgICAgICAgICBzb3VyY2VfdGFibGUgPSBmIntjYXRhbG9nfS57c2NoZW1hfS57dGFibGVfbmFtZX0iCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3RhYmxlX3BhdGggPSBmInt0YXJnZXRfbG9jYXRpb259L3tjYXRhbG9nfS97c2NoZW1hfS97dGFibGVfbmFtZX0iCgogICAgICAgICAgICAgICAgICAgICMgUGVyZm9ybSBkZWVwIGNsb25lIG9ubHkgaWYgdGFibGUgZG9lcyBub3QgZXhpc3QKICAgICAgICAgICAgICAgICAgICBzcWxfY29tbWFuZCA9IGYiIiIKICAgICAgICAgICAgICAgICAgICAgICAgQ1JFQVRFIE9SIFJFUExBQ0UgVEFCTEUgZGVsdGEuYHt0YXJnZXRfdGFibGVfcGF0aH1gIAogICAgICAgICAgICAgICAgICAgICAgICBERUVQIENMT05FIHtzb3VyY2VfdGFibGV9CiAgICAgICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJFeGVjdXRpbmcgU1FMIGNvbW1hbmQ6IHtzcWxfY29tbWFuZH0iKQogICAgICAgICAgICAgICAgICAgIHNwYXJrLnNxbChzcWxfY29tbWFuZCkKCiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJEZWVwIGNsb25lZCB0YWJsZSB7c291cmNlX3RhYmxlfSB0byB7dGFyZ2V0X3RhYmxlX3BhdGh9IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcCA9IGN1cnJlbnRfdGltZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJTeW5jIGludGVydmFsIG5vdCBtZXQgZm9yIGdyb3VwIHtncm91cF9uYW1lfSwgc2tpcHBpbmcuIikKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIFN0ZXAgNTogQWZ0ZXIgc3VjY2Vzc2Z1bCBjbG9uaW5nLCB1cGRhdGUgbWV0YWRhdGEgdG8gJ1N1Y2Nlc3MnIGFuZCBzZXQgc3luYyB0aW1lCiAgICAgICAgc3luY190aW1lID0gZGF0ZXRpbWUudXRjbm93KCkuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICB1cGRhdGVfbWV0YWRhdGFfc3RhdHVzKG1ldGFkYXRhX3RhYmxlX3BhdGgsIHdvcmtzcGFjZV9uYW1lLCBncm91cF9uYW1lLCAiU3VjY2VzcyIsIGxhc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXAsIHN5bmNfdGltZSkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIlNldCAnU3VjY2Vzcycgc3RhdHVzIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfSIpCgogICAgICAgICMgTG9nIHN1bW1hcnkgaW5mbwogICAgICAgIHN1Y2Nlc3NmdWxfd29ya2Zsb3dzLmFwcGVuZCh7CiAgICAgICAgICAgICd3b3Jrc3BhY2VfbmFtZSc6IHdvcmtzcGFjZV9uYW1lLAogICAgICAgICAgICAnZ3JvdXBfbmFtZSc6IGdyb3VwX25hbWUsCiAgICAgICAgICAgICd3b3JrZmxvd19uYW1lJzogbWV0YWRhdGFbJ3dvcmtmbG93X25hbWUnXSwKICAgICAgICAgICAgJ3dvcmtmbG93X2lkJzogbWV0YWRhdGFbJ3dvcmtmbG93X2lkJ10sCiAgICAgICAgICAgICd0YWJsZXMnOiBtZXRhZGF0YVsndGFibGVzJ10sCiAgICAgICAgICAgICdsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUnOiBsYXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wLAogICAgICAgICAgICAnc3luY19zdGF0dXMnOiAnU3VjY2VzcycKICAgICAgICB9KQogICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJFcnJvciBwcm9jZXNzaW5nIHdvcmtmbG93IHt3b3Jrc3BhY2VfbmFtZX0ve2dyb3VwX25hbWV9OiB7ZX0iKQoKCgpkZWYgc3luY190b19yZWdpb24odmFsaWRhdGVkX2NvbmZpZzogZGljdCwgc3luY19sb2NhdGlvbl90bzogc3RyID0gInByaW1hcnkiLCBtYXhfd29ya2VyczogaW50ID0gMTApOgogICAgIiIiCiAgICBTeW5jcyBEZWx0YSB0YWJsZXMgZnJvbSBtZXRhZGF0YSB3aXRoIG11bHRpLXRocmVhZGluZyBhbmQgdHdvIGxldmVscyBvZiBsb2dnaW5nOiBkZWJ1ZyBhbmQgaW5mby4KCiAgICBBcmdzOgogICAgLSB2YWxpZGF0ZWRfY29uZmlnIChkaWN0KTogVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGNvbnRhaW5pbmcgd29ya3NwYWNlIGFuZCBzeW5jIGRldGFpbHMuCiAgICAtIHN5bmNfbG9jYXRpb25fdG8gKHN0cik6IFNwZWNpZnkgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHRvIGNob29zZSB0aGUgc3luYyBsb2NhdGlvbi4KICAgIC0gc3luY19pbnRlcnZhbF9taW5zIChpbnQpOiBOdW1iZXIgb2YgbWlucyBiZWZvcmUgcmVjaGVja2luZyBncm91cHMgd2l0aG91dCB3b3JrZmxvd3MuCiAgICAtIHN5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucyAoaW50KTogTnVtYmVyIG9mIG1pbnMgYWZ0ZXIgd2hpY2ggYSB0YWJsZSB3b3VsZCBiZSBzeW5jZWQgaXJyZXNwZWN0aXZlIG9mIHdvcmtmbG93IGNvbXBsaXRpb24uCiAgICAtIG1heF93b3JrZXJzIChpbnQpOiBNYXggdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZy4KICAgIC0gbG9nZ2luZ19sZXZlbCAoc3RyKTogRWl0aGVyICdpbmZvJyBmb3Igc3VtbWFyeSBvciAnZGVidWcnIGZvciBkZXRhaWxlZCBsb2dnaW5nLgoKICAgIFJldHVybnM6CiAgICAtIE5vbmUKICAgICIiIgoKICAgIGdsb2JhbCBzdWNjZXNzZnVsX3dvcmtmbG93cwogICAgc3VjY2Vzc2Z1bF93b3JrZmxvd3MgPSBbXSAgIyBSZXNldCB0aGUgZ2xvYmFsIHN1Y2Nlc3NmdWwgd29ya2Zsb3cgbGlzdAoKICAgICMgVmFsaWRhdGUgc3luY19sb2NhdGlvbl90bwogICAgaWYgc3luY19sb2NhdGlvbl90byBub3QgaW4gWyJwcmltYXJ5IiwgInNlY29uZGFyeSJdOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN5bmNfbG9jYXRpb25fdG8gbXVzdCBiZSBlaXRoZXIgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIikKCiAgICB0cnk6CiAgICAgICAgIyBTdGVwIDE6IFNldCB1cCBhIHRocmVhZCBwb29sIGV4ZWN1dG9yIHRvIGhhbmRsZSB0aGUgd29ya2Zsb3dzIGNvbmN1cnJlbnRseQogICAgICAgIHdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPW1heF93b3JrZXJzKSBhcyBleGVjdXRvcjoKICAgICAgICAgICAgZnV0dXJlcyA9IFtdCgogICAgICAgICAgICAjIFN0ZXAgMjogSXRlcmF0ZSB0aHJvdWdoIHRoZSB3b3Jrc3BhY2VzIGluIHRoZSB2YWxpZGF0ZWQgY29uZmlnCiAgICAgICAgICAgIGZvciB3b3Jrc3BhY2UgaW4gdmFsaWRhdGVkX2NvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgICAgICAgICAgd29ya3NwYWNlX25hbWUgPSB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ10KCiAgICAgICAgICAgICAgICAjIFJldHJpZXZlIHRoZSBhY3R1YWwgUEFUIHRva2VuIHVzaW5nIHRoZSBzY29wZSBhbmQga2V5CiAgICAgICAgICAgICAgICBzZWNyZXRfc2NvcGUgPSB2YWxpZGF0ZWRfY29uZmlnLmdldCgic2VjcmV0X3Njb3BlIikKICAgICAgICAgICAgICAgIHBhdF9rZXkgPSB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9wYXRfa2V5J10KICAgICAgICAgICAgICAgIHN5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucyA9IHdvcmtzcGFjZVsnc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zJ10KICAgICAgICAgICAgICAgIHN5bmNfaW50ZXJ2YWxfbWlucyA9IHdvcmtzcGFjZVsnc3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zJ10KICAgICAgICAgICAgICAgIHBhdF90b2tlbiA9IHJldHJpZXZlX3BhdF90b2tlbihzZWNyZXRfc2NvcGUsIHBhdF9rZXkpCiAgICAgICAgICAgICAgICBpZiBwYXRfdG9rZW4gaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiRXJyb3IgcmV0cmlldmluZyBQQVQgdG9rZW4gZm9yIHdvcmtzcGFjZToge3dvcmtzcGFjZV9uYW1lfSwgc2tpcHBpbmcgc3luYy4iKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgIyBDaG9vc2UgdGhlIG1ldGFkYXRhIHRhYmxlIHBhdGggYmFzZWQgb24gdGhlIHN5bmNfbG9jYXRpb25fdG8KICAgICAgICAgICAgICAgIHN5bmNfbG9jYXRpb24gPSB3b3Jrc3BhY2VbZiJzeW5jX2xvY2F0aW9uX3tzeW5jX2xvY2F0aW9uX3RvfSJdCiAgICAgICAgICAgICAgICBtZXRhZGF0YV90YWJsZV9wYXRoID0gZiJ7c3luY19sb2NhdGlvbn0vbWV0YS9zeW5jX21ldGFkYXRhX3RhYmxlIgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJtZXRhZGF0YSB0YWJsZSBwYXRoIHttZXRhZGF0YV90YWJsZV9wYXRofSIpCiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiU3RhcnRpbmcgc3luYyBmb3Igd29ya3NwYWNlOiB7d29ya3NwYWNlX25hbWV9IHVzaW5nIHtzeW5jX2xvY2F0aW9uX3RvfSBzeW5jIGxvY2F0aW9uLiIpCgogICAgICAgICAgICAgICAgIyBTdGVwIDM6IExvYWQgdGhlIG1ldGFkYXRhIHRhYmxlIGZyb20gdGhlIHNlbGVjdGVkIHN5bmMgbG9jYXRpb24KICAgICAgICAgICAgICAgIG1ldGFkYXRhX2RpY3QgPSBsb2FkX21ldGFkYXRhX3RhYmxlKG1ldGFkYXRhX3RhYmxlX3BhdGgpCgogICAgICAgICAgICAgICAgIyBTdGVwIDQ6IEl0ZXJhdGUgdGhyb3VnaCB0aGUgbWV0YWRhdGEgYW5kIHN1Ym1pdCBlYWNoIHdvcmtmbG93IGZvciBjb25jdXJyZW50IHByb2Nlc3NpbmcKICAgICAgICAgICAgICAgIGZvciB3b3JrZmxvd19kYXRhIGluIG1ldGFkYXRhX2RpY3QuaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICBncm91cF9uYW1lID0gd29ya2Zsb3dfZGF0YVswXVsxXSAgIyBFeHRyYWN0IHRoZSBncm91cF9uYW1lIGZyb20gdGhlIHdvcmtmbG93X2RhdGEKCiAgICAgICAgICAgICAgICAgICAgIyBFeHRyYWN0IGluc3RhbmNlX3VybCBmcm9tIHRoZSB2YWxpZGF0ZWQgY29uZmlnCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfdXJsID0gd29ya3NwYWNlWyd3b3Jrc3BhY2VfaW5zdGFuY2VfdXJsJ10KCiAgICAgICAgICAgICAgICAgICAgIyBTdWJtaXQgZWFjaCB3b3JrZmxvdyBmb3IgY29uY3VycmVudCBwcm9jZXNzaW5nCiAgICAgICAgICAgICAgICAgICAgZnV0dXJlID0gZXhlY3V0b3Iuc3VibWl0KHByb2Nlc3Nfd29ya2Zsb3dfdG9fcmVnaW9uLCB3b3JrZmxvd19kYXRhLCBpbnN0YW5jZV91cmwsIHBhdF90b2tlbiwgc3luY19sb2NhdGlvbiwgbWV0YWRhdGFfdGFibGVfcGF0aCwgc3luY19pbnRlcnZhbF9taW5zLCBzeW5jX2ZhaWxvdmVyX2ludGVydmFsX21pbnMpCiAgICAgICAgICAgICAgICAgICAgZnV0dXJlcy5hcHBlbmQoZnV0dXJlKQoKICAgICAgICAgICAgIyBTdGVwIDU6IFdhaXQgZm9yIGFsbCBmdXR1cmVzIHRvIGNvbXBsZXRlCiAgICAgICAgICAgIGZvciBmdXR1cmUgaW4gYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGZ1dHVyZS5yZXN1bHQoKSAgIyBHZXQgdGhlIHJlc3VsdCBmcm9tIHRoZSBmdXR1cmUKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiRXJyb3IgcHJvY2Vzc2luZyB3b3JrZmxvdzoge2V9IikKCiAgICAgICAgIyBTdGVwIDY6IERpc3BsYXkgc3VtbWFyeSBpbiBpbmZvIG1vZGUKICAgICAgICBzdW1tYXJ5X2RmID0gcGQuRGF0YUZyYW1lKHN1Y2Nlc3NmdWxfd29ya2Zsb3dzKQogICAgICAgIHN1bW1hcnlfZGYgPSBzdW1tYXJ5X2RmLmRyb3AoY29sdW1ucz1bJ3ZhbGlkYXRlZCddLCBlcnJvcnM9J2lnbm9yZScpICAjIERyb3BwaW5nICd2YWxpZGF0ZWQnIGlmIGV4aXN0cwogICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgIlN1bW1hcnkgb2Ygc3VjY2Vzc2Z1bGx5IHN5bmNlZCB3b3JrZmxvd3M6IikKICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIHN1bW1hcnlfZGYudG9fc3RyaW5nKGluZGV4PUZhbHNlKSkgICMgUHJpbnQgdGhlIGRhdGFmcmFtZSB3aXRob3V0IGluZGV4CiAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCAiU3luYyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsIGYiRXJyb3IgZHVyaW5nIHN5bmMgcHJvY2Vzczoge2V9IikK",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/sync_to_region",
            "language": "PYTHON",
            "md5": "9c40086b6bcaa4907f6642ea965d1ae2",
            "object_id": 3574564832210024,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/sync_to_region",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/dr_sync_job/sync_to_region"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_utils",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHB5dHoKaW1wb3J0IGpzb24KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSBweXNwYXJrLnNxbC50eXBlcyBpbXBvcnQgU3RydWN0VHlwZSwgU3RydWN0RmllbGQsIFN0cmluZ1R5cGUsIEFycmF5VHlwZSwgQm9vbGVhblR5cGUsIFRpbWVzdGFtcFR5cGUKZnJvbSBweXNwYXJrLnNxbCBpbXBvcnQgRGF0YUZyYW1lCgoKZGVmIGxvZ19tZXNzYWdlKGxldmVsOiBzdHIsIG1lc3NhZ2U6IHN0cik6CiAgICAiIiIKICAgIExvZ3MgYSBtZXNzYWdlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgbGV2ZWwuCgogICAgQXJnczoKICAgIC0gbGV2ZWwgKHN0cik6IFRoZSBsZXZlbCBvZiB0aGUgbWVzc2FnZSAoJ2RlYnVnJywgJ2luZm8nLCBvciAnZXJyb3InKS4KICAgIC0gbWVzc2FnZSAoc3RyKTogVGhlIG1lc3NhZ2UgdG8gYmUgbG9nZ2VkLgogICAgIiIiCiAgICBnbG9iYWwgTE9HX0xFVkVMCiAgICBsZXZlbHMgPSB7ImRlYnVnIjogMSwgImluZm8iOiAyLCAiZXJyb3IiOiAzfSAgIyBMb2dnaW5nIGxldmVscyBwcmlvcml0eQoKICAgICMgTG9nIHRoZSBtZXNzYWdlIG9ubHkgaWYgdGhlIGxldmVsIGlzIGVxdWFsIHRvIG9yIGhpZ2hlciB0aGFuIHRoZSBjdXJyZW50IGxvZyBsZXZlbAogICAgaWYgbGV2ZWxzLmdldChsZXZlbCwgMCkgPj0gbGV2ZWxzLmdldChMT0dfTEVWRUwsIDApOgogICAgICAgIHByaW50KGYie2xldmVsLnVwcGVyKCl9OiB7bWVzc2FnZX0iKQoKZGVmIGxvYWRfY29uZmlnKGZpbGVfcGF0aDogc3RyKSAtPiBkaWN0OgogICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InKSBhcyBmaWxlOgogICAgICAgIGNvbmZpZyA9IGpzb24ubG9hZChmaWxlKQogICAgcmV0dXJuIGNvbmZpZwoKZGVmIGZpbmRfd29ya3NwYWNlX2NvbmZpZyh3b3Jrc3BhY2VfbmFtZTogc3RyLCB2YWxpZGF0ZWRfY29uZmlnOiBkaWN0KSAtPiBkaWN0OgogICAgIiIiCiAgICBGaW5kcyBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyB3b3Jrc3BhY2UgY29uZmlndXJhdGlvbiBmcm9tIHRoZSB2YWxpZGF0ZWQgY29uZmlnLgoKICAgIEFyZ3M6CiAgICAtIHdvcmtzcGFjZV9uYW1lIChzdHIpOiBUaGUgbmFtZSBvZiB0aGUgd29ya3NwYWNlLgogICAgLSB2YWxpZGF0ZWRfY29uZmlnIChkaWN0KTogVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGNvbnRhaW5pbmcgd29ya3NwYWNlIGRldGFpbHMuCgogICAgUmV0dXJuczoKICAgIC0gZGljdDogVGhlIHdvcmtzcGFjZSBjb25maWd1cmF0aW9uIGlmIGZvdW5kLCBvdGhlcndpc2UgTm9uZS4KICAgICIiIgogICAgZm9yIHdvcmtzcGFjZSBpbiB2YWxpZGF0ZWRfY29uZmlnWyd3b3Jrc3BhY2VzJ106CiAgICAgICAgaWYgd29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddID09IHdvcmtzcGFjZV9uYW1lOgogICAgICAgICAgICByZXR1cm4gd29ya3NwYWNlCiAgICByZXR1cm4gTm9uZQogICAgCmRlZiB1cGRhdGVfbWV0YWRhdGFfc3RhdHVzKG1ldGFkYXRhX3RhYmxlX3BhdGg6IHN0ciwgd29ya3NwYWNlX25hbWU6IHN0ciwgZ3JvdXBfbmFtZTogc3RyLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdHIgPSBOb25lLCBzeW5jX3RpbWU6IHN0ciA9IE5vbmUsIHN5bmNfdGltZV90b19yZWdpb246IHN0ciA9IE5vbmUsIHN5bmNfdGltZV9pbl9yZWdpb246IHN0ciA9IE5vbmUpOgogICAgIiIiCiAgICBVcGRhdGVzIHRoZSBtZXRhZGF0YSB0YWJsZSB3aXRoIHRoZSBjdXJyZW50IHN0YXR1cyBhbmQgc3luYyB0aW1lc3RhbXBzIGZvciB0aGUgcmVnaW9ucy4KCiAgICBBcmdzOgogICAgLSBtZXRhZGF0YV90YWJsZV9wYXRoIChzdHIpOiBQYXRoIHRvIHRoZSBtZXRhZGF0YSBEZWx0YSB0YWJsZS4KICAgIC0gd29ya3NwYWNlX25hbWUgKHN0cik6IFRoZSB3b3Jrc3BhY2UgbmFtZSBvZiB0aGUgZ3JvdXAuCiAgICAtIGdyb3VwX25hbWUgKHN0cik6IFRoZSBncm91cCBuYW1lLgogICAgLSBzdGF0dXMgKHN0ciwgb3B0aW9uYWwpOiBUaGUgc3luYyBzdGF0dXMgKCdJbiBQcm9ncmVzcycgb3IgJ1N1Y2Nlc3MnKS4KICAgIC0gc3luY190aW1lIChzdHIsIG9wdGlvbmFsKTogVGhlIGxhc3Qgc3luYyB0aW1lLgogICAgLSBzeW5jX3RpbWVfdG9fcmVnaW9uIChzdHIsIG9wdGlvbmFsKTogVGhlIHN5bmMgdGltZXN0YW1wIGZvciB0aGUgInRvIiByZWdpb24uCiAgICAtIHN5bmNfdGltZV9pbl9yZWdpb24gKHN0ciwgb3B0aW9uYWwpOiBUaGUgc3luYyB0aW1lc3RhbXAgZm9yIHRoZSAiaW4iIHJlZ2lvbi4KCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIFN0YXJ0IGNvbnN0cnVjdGluZyB0aGUgU1FMIHF1ZXJ5CiAgICAgICAgdXBkYXRlX3F1ZXJ5ID0gZiJVUERBVEUgZGVsdGEuYHttZXRhZGF0YV90YWJsZV9wYXRofWAgU0VUICIKICAgICAgICAKICAgICAgICAjIExpc3QgdG8gaG9sZCBjb2x1bW4gdXBkYXRlIGV4cHJlc3Npb25zCiAgICAgICAgdXBkYXRlX2NvbHVtbnMgPSBbXQogICAgICAgIAogICAgICAgICMgQWRkIG5vbi1Ob25lIHZhbHVlcyB0byB0aGUgdXBkYXRlIHF1ZXJ5CiAgICAgICAgaWYgc3RhdHVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICB1cGRhdGVfY29sdW1ucy5hcHBlbmQoZiJzeW5jX3N0YXR1cyA9ICd7c3RhdHVzfSciKQogICAgICAgIGlmIHN5bmNfdGltZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lID0gJ3tzeW5jX3RpbWV9JyIpCiAgICAgICAgaWYgc3luY190aW1lX3RvX3JlZ2lvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYic3luY190aW1lX3RvX3JlZ2lvbiA9ICd7c3luY190aW1lX3RvX3JlZ2lvbn0nIikKICAgICAgICBpZiBzeW5jX3RpbWVfaW5fcmVnaW9uIGlzIG5vdCBOb25lOgogICAgICAgICAgICB1cGRhdGVfY29sdW1ucy5hcHBlbmQoZiJzeW5jX3RpbWVfaW5fcmVnaW9uID0gJ3tzeW5jX3RpbWVfaW5fcmVnaW9ufSciKQogICAgICAgIAogICAgICAgICMgSm9pbiBhbGwgdXBkYXRlIGNvbHVtbnMgdG8gZm9ybSB0aGUgU0VUIHBhcnQgb2YgdGhlIFNRTCBxdWVyeQogICAgICAgIHVwZGF0ZV9xdWVyeSArPSAiLCAiLmpvaW4odXBkYXRlX2NvbHVtbnMpCiAgICAgICAgCiAgICAgICAgIyBBZGQgV0hFUkUgY2xhdXNlIHRvIGZpbHRlciBieSB3b3Jrc3BhY2VfbmFtZSBhbmQgZ3JvdXBfbmFtZQogICAgICAgIHVwZGF0ZV9xdWVyeSArPSBmIiBXSEVSRSB3b3Jrc3BhY2VfbmFtZSA9ICd7d29ya3NwYWNlX25hbWV9JyBBTkQgZ3JvdXBfbmFtZSA9ICd7Z3JvdXBfbmFtZX0nIgogICAgICAgIAogICAgICAgICMgRXhlY3V0ZSB0aGUgdXBkYXRlIHF1ZXJ5CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJFeGVjdXRpbmcgU1FMIHVwZGF0ZToge3VwZGF0ZV9xdWVyeX0iKQogICAgICAgIHNwYXJrLnNxbCh1cGRhdGVfcXVlcnkpCiAgICAgICAgCiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJNZXRhZGF0YSB1cGRhdGVkIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfSB3aXRoIHRoZSBmb2xsb3dpbmc6IHt1cGRhdGVfY29sdW1uc30iKQogICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJGYWlsZWQgdG8gdXBkYXRlIG1ldGFkYXRhIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfToge2V9IikKCmRlZiBjaGVja19mc19wYXRoKHBhdGg6IHN0cikgLT4gYm9vbDoKICAgICIiIgogICAgQ2hlY2sgaWYgdGhlIHByb2dyYW0gaGFzIGFjY2VzcyB0byBjcmVhdGUgYW5kIGRlbGV0ZSBhIGZpbGUgYXQgdGhlIGdpdmVuIHN0b3JhZ2UgcGF0aC4KCiAgICBBcmdzOgogICAgLSBwYXRoIChzdHIpOiBUaGUgc3RvcmFnZSBwYXRoIHRvIGNoZWNrLgoKICAgIFJldHVybnM6CiAgICAtIGJvb2w6IFRydWUgaWYgdGhlIHByb2dyYW0gaGFzIHdyaXRlIGFjY2VzcywgRmFsc2Ugb3RoZXJ3aXNlLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBHZW5lcmF0ZSBhIHRlbXBvcmFyeSBmaWxlIG5hbWUKICAgICAgICB0ZW1wX2ZpbGVfcGF0aCA9IGYie3BhdGh9L3RlbXBfYWNjZXNzX2NoZWNrLnR4dCIKCiAgICAgICAgIyBXcml0ZSBhIHRlbXBvcmFyeSBmaWxlIHRvIHRoZSBzdG9yYWdlIHBhdGgKICAgICAgICBkYnV0aWxzLmZzLnB1dCh0ZW1wX2ZpbGVfcGF0aCwgInRlc3QiLCBvdmVyd3JpdGU9VHJ1ZSkKCiAgICAgICAgIyBDb25maXJtIHRoZSBmaWxlIHdhcyB3cml0dGVuIGJ5IGNoZWNraW5nIGl0cyBleGlzdGVuY2UKICAgICAgICBpZiBkYnV0aWxzLmZzLmxzKHBhdGgpOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiQWNjZXNzIGNoZWNrIHN1Y2Nlc3NmdWwgYXQgcGF0aDoge3BhdGh9IikKCiAgICAgICAgICAgICMgQ2xlYW4gdXAgYnkgZGVsZXRpbmcgdGhlIHRlbXBvcmFyeSBmaWxlCiAgICAgICAgICAgIGRidXRpbHMuZnMucm0odGVtcF9maWxlX3BhdGgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkNvdWxkIG5vdCBjb25maXJtIHRoZSBjcmVhdGlvbiBvZiB0aGUgZmlsZSBhdCBwYXRoOiB7cGF0aH0iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiQWNjZXNzIGNoZWNrIGZhaWxlZCBhdCBwYXRoOiB7cGF0aH0uIEVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIGxvYWRfbWV0YWRhdGFfdGFibGUocGF0aDogc3RyKSAtPiBkaWN0OgogICAgIiIiCiAgICBMb2FkIHRoZSBtZXRhZGF0YSB0YWJsZSBmcm9tIHRoZSBnaXZlbiBwYXRoIGFuZCBjb252ZXJ0IGl0IGludG8gYSBkaWN0aW9uYXJ5LgoKICAgIEFyZ3M6CiAgICAtIHBhdGggKHN0cik6IFRoZSBwYXRoIHdoZXJlIHRoZSBtZXRhZGF0YSB0YWJsZSBpcyBzdG9yZWQuCgogICAgUmV0dXJuczoKICAgIC0gZGljdDogVGhlIG1ldGFkYXRhIHRhYmxlIGFzIGEgZGljdGlvbmFyeSwgc3RydWN0dXJlZCBhczoKICAgICAgewogICAgICAgICh3b3Jrc3BhY2VfbmFtZSwgZ3JvdXBfbmFtZSk6IHsKICAgICAgICAgICAgIndvcmtmbG93X25hbWUiOiA8d29ya2Zsb3dfbmFtZT4sCiAgICAgICAgICAgICJ3b3JrZmxvd19pZCI6IDx3b3JrZmxvd19pZD4sCiAgICAgICAgICAgICJ0YWJsZXMiOiBbPHRhYmxlMT4sIDx0YWJsZTI+LCAuLi5dLAogICAgICAgICAgICAidmFsaWRhdGVkIjogPHZhbGlkYXRlZF9zdGF0dXM+LAogICAgICAgICAgICAibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lIjogPGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZT4sCiAgICAgICAgICAgICJzeW5jX3N0YXR1cyI6IDxzeW5jX3N0YXR1cz4sCiAgICAgICAgICAgICJzeW5jX3RpbWVfdG9fcmVnaW9uIjogPHN5bmNfdGltZV90b19yZWdpb24+LAogICAgICAgICAgICAic3luY190aW1lX2luX3JlZ2lvbiI6IDxzeW5jX3RpbWVfaW5fcmVnaW9uPgogICAgICAgIH0KICAgICAgfQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBpZiB0aGUgcGF0aCBleGlzdHMKICAgICAgICBkYnV0aWxzLmZzLmxzKHBhdGgpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJQYXRoIGRvZXMgbm90IGV4aXN0OiB7cGF0aH0uIENyZWF0aW5nIGEgbmV3IG1ldGFkYXRhIHRhYmxlLiIpCiAgICAgICAgY3JlYXRlX2VtcHR5X21ldGFkYXRhX3RhYmxlKHBhdGgpCiAgICAgICAgcmV0dXJuIHt9CiAgICAKICAgIHRyeToKICAgICAgICAjIExvYWQgdGhlIERlbHRhIHRhYmxlIGludG8gYSBEYXRhRnJhbWUKICAgICAgICBkZiA9IHNwYXJrLnJlYWQuZm9ybWF0KCJkZWx0YSIpLmxvYWQocGF0aCkKCiAgICAgICAgIyBJbml0aWFsaXplIGFuIGVtcHR5IGRpY3Rpb25hcnkgdG8gaG9sZCB0aGUgbWV0YWRhdGEKICAgICAgICBtZXRhZGF0YV9kaWN0ID0ge30KCiAgICAgICAgIyBJdGVyYXRlIG92ZXIgdGhlIERhdGFGcmFtZSByb3dzIGFuZCBwb3B1bGF0ZSB0aGUgZGljdGlvbmFyeQogICAgICAgIGZvciByb3cgaW4gZGYuY29sbGVjdCgpOgogICAgICAgICAgICB3b3Jrc3BhY2VfbmFtZSA9IHJvd1snd29ya3NwYWNlX25hbWUnXQogICAgICAgICAgICBncm91cF9uYW1lID0gcm93Wydncm91cF9uYW1lJ10KICAgICAgICAgICAgd29ya2Zsb3dfbmFtZSA9IHJvd1snd29ya2Zsb3dfbmFtZSddCiAgICAgICAgICAgIHdvcmtmbG93X2lkID0gcm93Wyd3b3JrZmxvd19pZCddCiAgICAgICAgICAgIHRhYmxlcyA9IHJvd1sndGFibGVzJ10KICAgICAgICAgICAgdmFsaWRhdGVkID0gcm93Wyd2YWxpZGF0ZWQnXQogICAgICAgICAgICBsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUgPSByb3dbJ2xhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSddCiAgICAgICAgICAgIHN5bmNfc3RhdHVzID0gcm93WydzeW5jX3N0YXR1cyddCiAgICAgICAgICAgIHN5bmNfdGltZV90b19yZWdpb24gPSByb3coJ3N5bmNfdGltZV90b19yZWdpb24nLCBOb25lKSAgCiAgICAgICAgICAgIHN5bmNfdGltZV9pbl9yZWdpb24gPSByb3coJ3N5bmNfdGltZV9pbl9yZWdpb24nLCBOb25lKSAKCiAgICAgICAgICAgICMgQWRkIHRoZSBtZXRhZGF0YSB0byB0aGUgZGljdGlvbmFyeQogICAgICAgICAgICBtZXRhZGF0YV9kaWN0Wyh3b3Jrc3BhY2VfbmFtZSwgZ3JvdXBfbmFtZSldID0gewogICAgICAgICAgICAgICAgIndvcmtmbG93X25hbWUiOiB3b3JrZmxvd19uYW1lLAogICAgICAgICAgICAgICAgIndvcmtmbG93X2lkIjogd29ya2Zsb3dfaWQsCiAgICAgICAgICAgICAgICAidGFibGVzIjogdGFibGVzLAogICAgICAgICAgICAgICAgInZhbGlkYXRlZCI6IHZhbGlkYXRlZCwKICAgICAgICAgICAgICAgICJsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUiOiBsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUsCiAgICAgICAgICAgICAgICAic3luY19zdGF0dXMiOiBzeW5jX3N0YXR1cywKICAgICAgICAgICAgICAgICJzeW5jX3RpbWVfdG9fcmVnaW9uIjogc3luY190aW1lX3RvX3JlZ2lvbiwKICAgICAgICAgICAgICAgICJzeW5jX3RpbWVfaW5fcmVnaW9uIjogc3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICAgICB9CgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJNZXRhZGF0YSB0YWJsZSBsb2FkZWQgc3VjY2Vzc2Z1bGx5IGZyb206IHtwYXRofSIpCiAgICAgICAgcmV0dXJuIG1ldGFkYXRhX2RpY3QKCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yIGxvYWRpbmcgbWV0YWRhdGEgdGFibGUgZnJvbSBwYXRoOiB7cGF0aH0uIEVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiB7fQoKZGVmIGNyZWF0ZV9lbXB0eV9tZXRhZGF0YV90YWJsZShwYXRoOiBzdHIpOgogICAgIiIiCiAgICBDcmVhdGVzIGFuIGVtcHR5IG1ldGFkYXRhIERlbHRhIHRhYmxlIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4KCiAgICBBcmdzOgogICAgLSBwYXRoIChzdHIpOiBUaGUgcGF0aCB3aGVyZSB0aGUgRGVsdGEgdGFibGUgd2lsbCBiZSBjcmVhdGVkLgogICAgIiIiCiAgICAjIERlZmluZSB0aGUgc2NoZW1hIG9mIHRoZSBtZXRhZGF0YSB0YWJsZSwgaW5jbHVkaW5nIG5ldyBjb2x1bW5zCiAgICBzY2hlbWEgPSBTdHJ1Y3RUeXBlKFsKICAgICAgICBTdHJ1Y3RGaWVsZCgid29ya3NwYWNlX25hbWUiLCBTdHJpbmdUeXBlKCksIEZhbHNlKSwKICAgICAgICBTdHJ1Y3RGaWVsZCgiZ3JvdXBfbmFtZSIsIFN0cmluZ1R5cGUoKSwgRmFsc2UpLAogICAgICAgIFN0cnVjdEZpZWxkKCJ3b3JrZmxvd19uYW1lIiwgU3RyaW5nVHlwZSgpLCBGYWxzZSksCiAgICAgICAgU3RydWN0RmllbGQoIndvcmtmbG93X2lkIiwgU3RyaW5nVHlwZSgpLCBGYWxzZSksCiAgICAgICAgU3RydWN0RmllbGQoInRhYmxlcyIsIEFycmF5VHlwZShTdHJpbmdUeXBlKCkpLCBGYWxzZSksCiAgICAgICAgU3RydWN0RmllbGQoInZhbGlkYXRlZCIsIEJvb2xlYW5UeXBlKCksIEZhbHNlKSwKICAgICAgICBTdHJ1Y3RGaWVsZCgibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lIiwgVGltZXN0YW1wVHlwZSgpLCBUcnVlKSwKICAgICAgICBTdHJ1Y3RGaWVsZCgic3luY19zdGF0dXMiLCBTdHJpbmdUeXBlKCksIFRydWUpLAogICAgICAgIFN0cnVjdEZpZWxkKCJzeW5jX3RpbWVfdG9fcmVnaW9uIiwgVGltZXN0YW1wVHlwZSgpLCBUcnVlKSwgCiAgICAgICAgU3RydWN0RmllbGQoInN5bmNfdGltZV9pbl9yZWdpb24iLCBUaW1lc3RhbXBUeXBlKCksIFRydWUpCiAgICBdKQoKICAgICMgQ3JlYXRlIGFuIGVtcHR5IERhdGFGcmFtZSB3aXRoIHRoZSBkZWZpbmVkIHNjaGVtYQogICAgZW1wdHlfZGYgPSBzcGFyay5jcmVhdGVEYXRhRnJhbWUoW10sIHNjaGVtYSkKCiAgICAjIFdyaXRlIHRoZSBlbXB0eSBEYXRhRnJhbWUgYXMgYSBEZWx0YSB0YWJsZQogICAgZW1wdHlfZGYud3JpdGUuZm9ybWF0KCJkZWx0YSIpLm1vZGUoIm92ZXJ3cml0ZSIpLnNhdmUocGF0aCkKICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFbXB0eSBtZXRhZGF0YSB0YWJsZSBjcmVhdGVkIGF0OiB7cGF0aH0iKQoKZGVmIGdldF9kYXRhYnJpY2tzX2pvYnNfaW5mbyhpbnN0YW5jZV91cmw6IHN0ciwgcGF0X3Njb3BlOiBzdHIsIHBhdF90b2tlbjogc3RyLCB3b3JrZmxvd19uYW1lczogbGlzdCkgLT4gZGljdDoKICAgICIiIgogICAgUmV0cmlldmVzIGpvYiBpbmZvcm1hdGlvbiBmcm9tIERhdGFicmlja3MgUkVTVCBBUEkgZm9yIGEgbGlzdCBvZiB3b3JrZmxvd3MgdXNpbmcgQVBJIHZlcnNpb24gMi4xIHdpdGggcGFnaW5hdGlvbi4KCiAgICBBcmdzOgogICAgLSBpbnN0YW5jZV91cmwgKHN0cik6IFRoZSBVUkwgb2YgdGhlIERhdGFicmlja3MgaW5zdGFuY2UuCiAgICAtIHBhdF90b2tlbiAoc3RyKTogVGhlIFBBVCB0b2tlbiBmb3IgYXV0aGVudGljYXRpb24uCiAgICAtIHdvcmtmbG93X25hbWVzIChsaXN0KTogQSBsaXN0IG9mIHdvcmtmbG93L2pvYiBuYW1lcyB0byByZXRyaWV2ZSBpbmZvcm1hdGlvbiBmb3IuCgogICAgUmV0dXJuczoKICAgIC0gZGljdDogQSBkaWN0aW9uYXJ5IHdpdGggd29ya2Zsb3cgbmFtZXMgYXMga2V5cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBqb2IgSURzIGFzIHZhbHVlcy4KICAgICIiIgogICAgdHJ5OgogICAgICAgIHBhdCA9IHJldHJpZXZlX3BhdF90b2tlbihwYXRfc2NvcGUsIHBhdF90b2tlbikKICAgICAgICAjIENvbnN0cnVjdCB0aGUgQVBJIGVuZHBvaW50IFVSTCBmb3IgSm9icyBBUEkgMi4xCiAgICAgICAgZW5kcG9pbnQgPSBmIntpbnN0YW5jZV91cmx9L2FwaS8yLjEvam9icy9saXN0IgoKICAgICAgICAjIFNldCB1cCB0aGUgaGVhZGVycyBmb3IgdGhlIEFQSSByZXF1ZXN0CiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7cGF0fSIKICAgICAgICB9CgogICAgICAgICMgSW5pdGlhbGl6ZSB2YXJpYWJsZXMgZm9yIHBhZ2luYXRpb24KICAgICAgICBqb2JzX2luZm8gPSB7fQogICAgICAgIGhhc19tb3JlID0gVHJ1ZQogICAgICAgIG9mZnNldCA9IDAKCiAgICAgICAgIyBQYWdpbmF0ZSB0aHJvdWdoIGFsbCBqb2JzCiAgICAgICAgd2hpbGUgaGFzX21vcmUgYW5kIGxlbihqb2JzX2luZm8pIDwgbGVuKHdvcmtmbG93X25hbWVzKToKICAgICAgICAgICAgIyBJbmNsdWRlIHRoZSBvZmZzZXQgcGFyYW1ldGVyIHRvIGhhbmRsZSBwYWdpbmF0aW9uCiAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICJsaW1pdCI6IDI1LCAgIyBBZGp1c3QgbGltaXQgdG8gbWF0Y2ggQVBJIHJlcXVpcmVtZW50cwogICAgICAgICAgICAgICAgIm9mZnNldCI6IG9mZnNldAogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGVuZHBvaW50LCBoZWFkZXJzPWhlYWRlcnMsIHBhcmFtcz1wYXJhbXMpCiAgICAgICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQoKICAgICAgICAgICAgIyBQYXJzZSB0aGUgSlNPTiByZXNwb25zZQogICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZS5qc29uKCkKICAgICAgICAgICAgam9icyA9IHJlc3VsdC5nZXQoImpvYnMiLCBbXSkKCiAgICAgICAgICAgICMgU2VhcmNoIGZvciB0aGUgam9icyBieSBuYW1lIGFuZCBjb2xsZWN0IGluZm9ybWF0aW9uCiAgICAgICAgICAgIGZvciBqb2IgaW4gam9iczoKICAgICAgICAgICAgICAgIGpvYl9uYW1lID0gam9iLmdldCgic2V0dGluZ3MiLCB7fSkuZ2V0KCJuYW1lIikKICAgICAgICAgICAgICAgIGlmIGpvYl9uYW1lIGluIHdvcmtmbG93X25hbWVzIGFuZCBqb2JfbmFtZSBub3QgaW4gam9ic19pbmZvOgogICAgICAgICAgICAgICAgICAgIGpvYnNfaW5mb1tqb2JfbmFtZV0gPSBqb2IuZ2V0KCJqb2JfaWQiKQogICAgICAgICAgICAgICAgICAgICMgSWYgd2UndmUgZm91bmQgYWxsIHJlcXVlc3RlZCBqb2JzLCByZXR1cm4gZWFybHkKICAgICAgICAgICAgICAgICAgICBpZiBsZW4oam9ic19pbmZvKSA9PSBsZW4od29ya2Zsb3dfbmFtZXMpOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9ic19pbmZvCgogICAgICAgICAgICAjIENoZWNrIGlmIHRoZXJlIGFyZSBtb3JlIGpvYnMgdG8gcmV0cmlldmUKICAgICAgICAgICAgaGFzX21vcmUgPSBsZW4oam9icykgPT0gMjUgICMgQWRqdXN0IHRvIHRoZSBsaW1pdCB1c2VkCiAgICAgICAgICAgIG9mZnNldCArPSAyNSAgIyBJbmNyZW1lbnQgdGhlIG9mZnNldCBmb3IgdGhlIG5leHQgcGFnZQoKICAgICAgICAjIFJldHVybiB0aGUgY29sbGVjdGVkIGpvYiBpbmZvcm1hdGlvbgogICAgICAgIHJldHVybiBqb2JzX2luZm8KCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIixmIkVycm9yIGZldGNoaW5nIGpvYiBpbmZvIGZvciB3b3JrZmxvd3MgJ3t3b3JrZmxvd19uYW1lc30nOiB7ZX0iKQogICAgICAgIHJldHVybiB7fQoKZGVmIGpvYl9zdWNjZXNzZnVsX3J1bl9hZnRlcl9sYXN0X3J1bihpbnN0YW5jZV91cmw6IHN0ciwgcGF0X3Rva2VuOiBzdHIsIGpvYl9pZHM6IGxpc3QsIGxhc3RfcnVuX3RpbWVzdGFtcD1Ob25lKSAtPiBkaWN0OgogICAgIiIiCiAgICBDaGVja3MgaWYgYW55IG9mIHRoZSBnaXZlbiBEYXRhYnJpY2tzIGpvYnMgaGF2ZSBoYWQgc3VjY2Vzc2Z1bCBydW5zIGFmdGVyIHRoZSBsYXN0IHJlY29yZGVkIHJ1biB0aW1lc3RhbXAuCgogICAgQXJnczoKICAgIC0gaW5zdGFuY2VfdXJsIChzdHIpOiBUaGUgVVJMIG9mIHRoZSBEYXRhYnJpY2tzIGluc3RhbmNlLgogICAgLSBwYXRfdG9rZW4gKHN0cik6IFRoZSBQQVQgdG9rZW4gZm9yIGF1dGhlbnRpY2F0aW9uLgogICAgLSBqb2JfaWRzIChsaXN0KTogQSBsaXN0IG9mIGpvYiBJRHMgdG8gY2hlY2suCiAgICAtIGxhc3RfcnVuX3RpbWVzdGFtcCAoc3RyIG9yIGRhdGV0aW1lLCBvcHRpb25hbCk6IFRoZSB0aW1lc3RhbXAgb2YgdGhlIGxhc3QgcmVjb3JkZWQgcnVuIGluIGVpdGhlciBVVEMgc3RyaW5nIAogICAgICBmb3JtYXQgInl5eXktbW0tZGQgaGg6bW06c3MiIG9yIGFzIGEgZGF0ZXRpbWUgb2JqZWN0LiBJZiBOb25lLCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIGxhdGVzdCBzdWNjZXNzZnVsIAogICAgICBydW4gd2l0aG91dCBjb21wYXJpc29uLgoKICAgIFJldHVybnM6CiAgICAtIGRpY3Q6IEEgZGljdGlvbmFyeSB3aGVyZSB0aGUga2V5cyBhcmUgam9iIElEcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGxhc3Qgc3VjY2Vzc2Z1bCBydW4gZW5kIHRpbWVzdGFtcHMuCiAgICAgICAgICAgIElmIG5vIHN1Y2Nlc3NmdWwgcnVuIGlzIGZvdW5kIGFmdGVyIHRoZSBnaXZlbiB0aW1lc3RhbXAsIHRoZSB2YWx1ZSB3aWxsIGJlIE5vbmUuCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEhhbmRsZSBjb252ZXJzaW9uIG9mIGxhc3RfcnVuX3RpbWVzdGFtcCBpZiBpdCdzIGEgc3RyaW5nCiAgICAgICAgaWYgaXNpbnN0YW5jZShsYXN0X3J1bl90aW1lc3RhbXAsIHN0cik6CiAgICAgICAgICAgIGxhc3RfcnVuX3RpbWVzdGFtcCA9IGRhdGV0aW1lLnN0cnB0aW1lKGxhc3RfcnVuX3RpbWVzdGFtcCwgIiVZLSVtLSVkICVIOiVNOiVTIikucmVwbGFjZSh0emluZm89cHl0ei5VVEMpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGxhc3RfcnVuX3RpbWVzdGFtcCwgZGF0ZXRpbWUpOgogICAgICAgICAgICBsYXN0X3J1bl90aW1lc3RhbXAgPSBsYXN0X3J1bl90aW1lc3RhbXAucmVwbGFjZSh0emluZm89cHl0ei5VVEMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGFzdF9ydW5fdGltZXN0YW1wID0gTm9uZQoKICAgICAgICAjIFNldCB1cCB0aGUgaGVhZGVycyBmb3IgdGhlIEFQSSByZXF1ZXN0CiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7cGF0X3Rva2VufSIKICAgICAgICB9CgogICAgICAgIHN1Y2Nlc3NmdWxfcnVucyA9IHt9CgogICAgICAgICMgSXRlcmF0ZSBvdmVyIGVhY2ggam9iX2lkCiAgICAgICAgZm9yIGpvYl9pZCBpbiBqb2JfaWRzOgogICAgICAgICAgICAjIENvbnN0cnVjdCB0aGUgQVBJIGVuZHBvaW50IFVSTCBmb3IgbGlzdGluZyBydW5zIG9mIHRoZSBzcGVjaWZpYyBqb2IKICAgICAgICAgICAgZW5kcG9pbnQgPSBmIntpbnN0YW5jZV91cmx9L2FwaS8yLjEvam9icy9ydW5zL2xpc3QiCgogICAgICAgICAgICAjIERlZmluZSB0aGUgcGFyYW1ldGVycyBmb3IgZmlsdGVyaW5nIGpvYiBydW5zCiAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICJqb2JfaWQiOiBqb2JfaWQsCiAgICAgICAgICAgICAgICAiY29tcGxldGVkX29ubHkiOiAidHJ1ZSIsCiAgICAgICAgICAgICAgICAibGltaXQiOiAyNSAgIyBMaW1pdCB0aGUgbnVtYmVyIG9mIHJ1bnMgdG8gcmV0cmlldmUgKGFkanVzdCBhcyBuZWVkZWQpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgTWFrZSB0aGUgcmVxdWVzdCB0byB0aGUgRGF0YWJyaWNrcyBKb2JzIEFQSSB0byBsaXN0IGpvYiBydW5zCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGVuZHBvaW50LCBoZWFkZXJzPWhlYWRlcnMsIHBhcmFtcz1wYXJhbXMpCiAgICAgICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKSAgIyBSYWlzZSBhbiBleGNlcHRpb24gZm9yIEhUVFAgZXJyb3JzCgogICAgICAgICAgICAjIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlCiAgICAgICAgICAgIHJ1bnMgPSByZXNwb25zZS5qc29uKCkuZ2V0KCJydW5zIiwgW10pCgogICAgICAgICAgICAjIFZhcmlhYmxlIHRvIHN0b3JlIHRoZSBsYXN0IHN1Y2Nlc3NmdWwgcnVuIGVuZCB0aW1lCiAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fZW5kX3RpbWUgPSBOb25lCgogICAgICAgICAgICAjIEl0ZXJhdGUgb3ZlciB0aGUgcnVucyBhbmQgY2hlY2sgaWYgdGhlcmUgaXMgYSBzdWNjZXNzZnVsIHJ1biBhZnRlciB0aGUgbGFzdCBydW4KICAgICAgICAgICAgZm9yIHJ1biBpbiBydW5zOgogICAgICAgICAgICAgICAgcnVuX2VuZF90aW1lID0gcnVuLmdldCgiZW5kX3RpbWUiLCAwKSAvIDEwMDAgICMgQ29udmVydCBmcm9tIG1pbGxpc2Vjb25kcyB0byBzZWNvbmRzCiAgICAgICAgICAgICAgICBydW5fZW5kX2RhdGV0aW1lID0gZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChydW5fZW5kX3RpbWUsIHR6PXB5dHouVVRDKQogICAgICAgICAgICAgICAgcnVuX3Jlc3VsdF9zdGF0ZSA9IHJ1bi5nZXQoInN0YXRlIiwge30pLmdldCgicmVzdWx0X3N0YXRlIikKCiAgICAgICAgICAgICAgICBydW5fZW5kX2RhdGV0aW1lID0gcnVuX2VuZF9kYXRldGltZS5yZXBsYWNlKG1pY3Jvc2Vjb25kPTApCgogICAgICAgICAgICAgICAgaWYgbGFzdF9ydW5fdGltZXN0YW1wIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgIyBJZiBubyBsYXN0IHJ1biB0aW1lc3RhbXAgaXMgcHJvdmlkZWQsIHJldHVybiB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgcnVuCiAgICAgICAgICAgICAgICAgICAgaWYgcnVuX3Jlc3VsdF9zdGF0ZSA9PSAiU1VDQ0VTUyI6CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fZW5kX3RpbWUgPSBydW5fZW5kX2RhdGV0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbGlmIHJ1bl9lbmRfZGF0ZXRpbWUgPiBsYXN0X3J1bl90aW1lc3RhbXAgYW5kIHJ1bl9yZXN1bHRfc3RhdGUgPT0gIlNVQ0NFU1MiOgogICAgICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYicnVuX2VuZF9kYXRldGltZSBpcyB7cnVuX2VuZF9kYXRldGltZX0gYW5kIGxhc3RfcnVuX3RpbWVzdGFtcCBpcyB7bGFzdF9ydW5fdGltZXN0YW1wfSIpCiAgICAgICAgICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3J1bl9lbmRfdGltZSA9IHJ1bl9lbmRfZGF0ZXRpbWUuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICAgICAgICAgICAgICBicmVhayAgIyBFeGl0IHRoZSBsb29wIGVhcmx5IGFzIHdlIGZvdW5kIGEgc3VjY2Vzc2Z1bCBydW4KCiAgICAgICAgICAgICMgQWRkIHRoZSByZXN1bHQgdG8gdGhlIGRpY3Rpb25hcnkKICAgICAgICAgICAgc3VjY2Vzc2Z1bF9ydW5zW2pvYl9pZF0gPSBsYXN0X3N1Y2Nlc3NmdWxfcnVuX2VuZF90aW1lCgogICAgICAgIHJldHVybiBzdWNjZXNzZnVsX3J1bnMKCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJFcnJvciBjaGVja2luZyBqb2IgcnVuczoge2V9IikKICAgICAgICByZXR1cm4ge30KCmRlZiByZXRyaWV2ZV9wYXRfdG9rZW4oc2VjcmV0X3Njb3BlOiBzdHIsIHBhdF9rZXk6IHN0cikgLT4gc3RyOgogICAgIiIiCiAgICBSZXRyaWV2ZXMgdGhlIFBlcnNvbmFsIEFjY2VzcyBUb2tlbiAoUEFUKSBmb3IgYSBzcGVjaWZpYyB3b3Jrc3BhY2UgZnJvbSB0aGUgRGF0YWJyaWNrcyBzZWNyZXQgc3RvcmUuCgogICAgQXJnczoKICAgIC0gc2VjcmV0X3Njb3BlIChzdHIpOiBUaGUgc2NvcGUgd2l0aGluIHRoZSBzZWNyZXQgc3RvcmUgd2hlcmUgdGhlIFBBVCBpcyBzdG9yZWQuCiAgICAtIHBhdF9rZXkgKHN0cik6IFRoZSBrZXkgaWRlbnRpZnlpbmcgdGhlIFBBVCB3aXRoaW4gdGhlIHNlY3JldCBzY29wZS4KCiAgICBSZXR1cm5zOgogICAgLSBzdHI6IFRoZSByZXRyaWV2ZWQgUEFUIHRva2VuLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBVc2UgRGF0YWJyaWNrcyB1dGlsaXRpZXMgdG8gZmV0Y2ggdGhlIFBBVCB0b2tlbgogICAgICAgIHBhdF90b2tlbiA9IGRidXRpbHMuc2VjcmV0cy5nZXQoImRyLXRlc3Qtc2NvcGUiLCBrZXk9cGF0X2tleSkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBQQVQgdG9rZW4gZm9yIHNlY3JldCBzY29wZToge3NlY3JldF9zY29wZX0sIGtleToge3BhdF9rZXl9IikKICAgICAgICByZXR1cm4gcGF0X3Rva2VuCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIixmIkVycm9yIHJldHJpZXZpbmcgUEFUIHRva2VuIGZyb20gc2VjcmV0IHNjb3BlOiB7c2VjcmV0X3Njb3BlfSwga2V5OiB7cGF0X2tleX0uIEVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBOb25lCiAgICAKZGVmIGNoZWNrX3RhYmxlKHRhYmxlOiBzdHIpIC0+IGJvb2w6CiAgICAiIiIKICAgIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIHJlYWQgcGVybWlzc2lvbiBvbiBhIHRhYmxlIGJ5IGNoZWNraW5nIGlmIHRoZSB0YWJsZSBleGlzdHMgYW5kIGNhbiBiZSBkZXNjcmliZWQuCgogICAgQXJnczoKICAgIC0gdGFibGUgKHN0cik6IFRoZSBmdWxseSBxdWFsaWZpZWQgbmFtZSBvZiB0aGUgdGFibGUgKGNhdGFsb2cuc2NoZW1hLnRhYmxlX25hbWUpLgoKICAgIFJldHVybnM6CiAgICAtIGJvb2w6IFRydWUgaWYgdGhlIHVzZXIgaGFzIHJlYWQgcGVybWlzc2lvbiwgRmFsc2Ugb3RoZXJ3aXNlLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBpZiB0aGUgdGFibGUgZXhpc3RzIHVzaW5nIFNwYXJrIGNhdGFsb2cKICAgICAgICBpZiBzcGFyay5jYXRhbG9nLnRhYmxlRXhpc3RzKHRhYmxlKToKICAgICAgICAgICAgIyBUcnkgdG8gZGVzY3JpYmUgdGhlIHRhYmxlJ3MgbWV0YWRhdGEgdG8gZW5zdXJlIHJlYWQgYWNjZXNzCiAgICAgICAgICAgIHNwYXJrLmNhdGFsb2cubGlzdENvbHVtbnModGFibGUpCiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJSZWFkIHBlcm1pc3Npb24gY29uZmlybWVkIGZvciB0YWJsZSB7dGFibGV9LiIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIlRhYmxlICd7dGFibGV9JyBkb2VzIG5vdCBleGlzdC4iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiRXJyb3IgY2hlY2tpbmcgcmVhZCBwZXJtaXNzaW9uIGZvciB0YWJsZSAne3RhYmxlfSc6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKZGVmIG1lcmdlX21ldGFkYXRhX2VudHJpZXMobWV0YWRhdGFfdGFibGVfcGF0aDogc3RyLCBuZXdfZW50cmllczogbGlzdCkgLT4gTm9uZToKICAgICIiIgogICAgTWVyZ2UgbmV3IGVudHJpZXMgaW50byB0aGUgRGVsdGEgbWV0YWRhdGEgdGFibGUgdXNpbmcgdGhlIE1FUkdFIElOVE8gU1FMIGNvbW1hbmQuCiAgICBJbnNlcnQgbmV3IGVudHJpZXMsIHVwZGF0ZSBleGlzdGluZyBlbnRyaWVzIG9ubHkgd2hlbiBzcGVjaWZpYyBjb2x1bW5zIGRpZmZlciwgYW5kIGRlbGV0ZSBlbnRyaWVzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0IGluIHRoZSBzb3VyY2UuCgogICAgQXJnczoKICAgIC0gbWV0YWRhdGFfdGFibGVfcGF0aCAoc3RyKTogVGhlIERlbHRhIHRhYmxlIHBhdGggaW4gdGhlIHByaW1hcnkgc3luYyBsb2NhdGlvbi4KICAgIC0gbmV3X2VudHJpZXMgKGxpc3QpOiBBIGxpc3Qgb2YgbmV3IG1ldGFkYXRhIGVudHJpZXMsIGVhY2ggY29udGFpbmluZzoKICAgICAgLSB3b3Jrc3BhY2VfbmFtZSAoc3RyKQogICAgICAtIGdyb3VwX25hbWUgKHN0cikKICAgICAgLSB3b3JrZmxvd19uYW1lIChzdHIpCiAgICAgIC0gd29ya2Zsb3dfaWQgKHN0cikKICAgICAgLSB0YWJsZXMgKGxpc3Qgb2Ygc3RyKQogICAgICAtIHZhbGlkYXRlZCAoYm9vbCkKCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIENvbnZlcnQgdGhlIG5ldyBlbnRyaWVzIGxpc3QgaW50byBhIERhdGFGcmFtZQogICAgICAgIG5ld19lbnRyaWVzX2RmID0gc3BhcmsuY3JlYXRlRGF0YUZyYW1lKG5ld19lbnRyaWVzKQoKICAgICAgICAjIFN0ZXAgMTogQ3JlYXRlIGEgdGVtcG9yYXJ5IHZpZXcgZnJvbSBuZXdfZW50cmllcwogICAgICAgIG5ld19lbnRyaWVzX2RmLmNyZWF0ZU9yUmVwbGFjZVRlbXBWaWV3KCJuZXdfbWV0YWRhdGEiKQoKICAgICAgICAjIFN0ZXAgMjogVXNlIHRoZSBNRVJHRSBJTlRPIGNvbW1hbmQgdG8gbWVyZ2UgdGhlIG5ldyBlbnRyaWVzIGludG8gdGhlIERlbHRhIHRhYmxlCiAgICAgICAgbWVyZ2Vfc3FsID0gZiIiIgogICAgICAgICAgICBNRVJHRSBJTlRPIGRlbHRhLmB7bWV0YWRhdGFfdGFibGVfcGF0aH1gIEFTIHRhcmdldAogICAgICAgICAgICBVU0lORyBuZXdfbWV0YWRhdGEgQVMgc291cmNlCiAgICAgICAgICAgIE9OIHRhcmdldC53b3Jrc3BhY2VfbmFtZSA9IHNvdXJjZS53b3Jrc3BhY2VfbmFtZQogICAgICAgICAgICBBTkQgdGFyZ2V0Lmdyb3VwX25hbWUgPSBzb3VyY2UuZ3JvdXBfbmFtZQogICAgICAgICAgICBXSEVOIE1BVENIRUQgQU5EIAogICAgICAgICAgICAgICAgKHRhcmdldC53b3JrZmxvd19uYW1lICE9IHNvdXJjZS53b3JrZmxvd19uYW1lCiAgICAgICAgICAgICAgICBPUiB0YXJnZXQudGFibGVzICE9IHNvdXJjZS50YWJsZXMKICAgICAgICAgICAgICAgIE9SIHRhcmdldC52YWxpZGF0ZWQgIT0gc291cmNlLnZhbGlkYXRlZCkgCiAgICAgICAgICAgIFRIRU4gCiAgICAgICAgICAgICAgICBVUERBVEUgU0VUIAogICAgICAgICAgICAgICAgICAgIHRhcmdldC53b3JrZmxvd19uYW1lID0gc291cmNlLndvcmtmbG93X25hbWUsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnRhYmxlcyA9IHNvdXJjZS50YWJsZXMsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbGlkYXRlZCA9IHNvdXJjZS52YWxpZGF0ZWQsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lmxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSA9IE5VTEwsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN5bmNfc3RhdHVzID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3luY190aW1lX3RvX3JlZ2lvbiA9IE5VTEwsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN5bmNfdGltZV9pbl9yZWdpb24gPSBOVUxMCiAgICAgICAgICAgIFdIRU4gTk9UIE1BVENIRUQgVEhFTgogICAgICAgICAgICAgICAgSU5TRVJUICgKICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dfaWQsIAogICAgICAgICAgICAgICAgICAgIHRhYmxlcywgCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkLCAKICAgICAgICAgICAgICAgICAgICBsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUsIAogICAgICAgICAgICAgICAgICAgIHN5bmNfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgIHN5bmNfdGltZV90b19yZWdpb24sCiAgICAgICAgICAgICAgICAgICAgc3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICAgICAgICAgKSBWQUxVRVMgKAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS53b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgc291cmNlLmdyb3VwX25hbWUsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS53b3JrZmxvd19uYW1lLCAKICAgICAgICAgICAgICAgICAgICBzb3VyY2Uud29ya2Zsb3dfaWQsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS50YWJsZXMsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS52YWxpZGF0ZWQsIAogICAgICAgICAgICAgICAgICAgIE5VTEwsIAogICAgICAgICAgICAgICAgICAgIE5VTEwsCiAgICAgICAgICAgICAgICAgICAgTlVMTCwKICAgICAgICAgICAgICAgICAgICBOVUxMCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIFdIRU4gTk9UIE1BVENIRUQgQlkgU09VUkNFIFRIRU4KICAgICAgICAgICAgICAgIERFTEVURQogICAgICAgICIiIgoKICAgICAgICAjIFN0ZXAgMzogRXhlY3V0ZSB0aGUgbWVyZ2UgU1FMCiAgICAgICAgc3Bhcmsuc3FsKG1lcmdlX3NxbCkKCiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIk1ldGFkYXRhIHRhYmxlIG1lcmdlZCBzdWNjZXNzZnVsbHkgYXQ6IHttZXRhZGF0YV90YWJsZV9wYXRofSIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsZiJFcnJvciBkdXJpbmcgbWV0YWRhdGEgbWVyZ2U6IHtlfSIp",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/utils",
            "language": "PYTHON",
            "md5": "8b50ca4cd93f64832426642abd99724a",
            "object_id": 3574564832210008,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/utils",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/dr_sync_job/utils"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_validator",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpkZWYgdmFsaWRhdGVfY29uZmlnKGNvbmZpZzogZGljdCkgLT4gZGljdDoKICAgICIiIgogICAgVGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBiYXNpYyB2YWxpZGF0aW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIEpTT04uCgogICAgLSBFbnN1cmVzIHRoYXQgY3JpdGljYWwgZmllbGRzIGFyZSBub3QgZW1wdHkgYW5kIHN0b3BzIHRoZSBqb2IgaWYgdGhleSBhcmUuCiAgICAtIEVuc3VyZXMgdGhhdCBncm91cCBuYW1lcyB3aXRoaW4gZWFjaCB3b3Jrc3BhY2UgYXJlIHVuaXF1ZS4KICAgIC0gUHJvdmlkZXMgZGVmYXVsdCB2YWx1ZXMgZm9yIG9wdGlvbmFsIGZpZWxkcyBpZiB0aGV5IGFyZSBtaXNzaW5nLgogICAgLSBXYXJucyBhbmQgY29udGludWVzIGlmIG9wdGlvbmFsIGZpZWxkcyBvciBjb25kaXRpb25zIGFyZSBub3QgbWV0LgogICAgLSBSZW1vdmVzIGludmFsaWQgc3luYyBncm91cHMgZnJvbSB0aGUgY29uZmlndXJhdGlvbi4KICAgIC0gUHJpbnRzIGEgc3VtbWFyeSBpbiBhIHRhYnVsYXIgZm9ybWF0LgoKICAgIEFyZ3M6CiAgICAtIGNvbmZpZyAoZGljdCk6IFRoZSBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgbG9hZGVkIGZyb20gdGhlIEpTT04gZmlsZS4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBUaGUgdmFsaWRhdGVkIGFuZCBwb3RlbnRpYWxseSBtb2RpZmllZCBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkuCiAgICAiIiIKICAgIHZhbGlkYXRlZF9jb25maWcgPSB7IndvcmtzcGFjZXMiOiBbXX0KCiAgICAjIEVuc3VyZSAnc2VjcmV0X3Njb3BlJyBpcyBwcmVzZW50CiAgICBzZWNyZXRfc2NvcGUgPSBjb25maWcuZ2V0KCJzZWNyZXRfc2NvcGUiKQogICAgaWYgbm90IHNlY3JldF9zY29wZToKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJFcnJvcjogJ3NlY3JldF9zY29wZScgaXMgbWlzc2luZy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgcmV0dXJuIHt9CiAgICAKICAgIHZhbGlkYXRlZF9jb25maWdbInNlY3JldF9zY29wZSJdID0gc2VjcmV0X3Njb3BlCiAgICAKICAgIGZvciB3b3Jrc3BhY2UgaW4gY29uZmlnWyd3b3Jrc3BhY2VzJ106CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIlZhbGlkYXRpbmcgd29ya3NwYWNlOiB7d29ya3NwYWNlLmdldCgnd29ya3NwYWNlX25hbWUnLCAnVW5uYW1lZCcpfSIpCgogICAgICAgICMgQ2hlY2sgY3JpdGljYWwgZmllbGRzCiAgICAgICAgaWYgbm90IHdvcmtzcGFjZS5nZXQoJ3dvcmtzcGFjZV9uYW1lJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIkVycm9yOiBXb3Jrc3BhY2UgbmFtZSBpcyBtaXNzaW5nLiBTdG9wcGluZyBqb2IuIikKICAgICAgICAgICAgcmV0dXJuIHt9CgogICAgICAgIGlmIG5vdCB3b3Jrc3BhY2UuZ2V0KCd3b3Jrc3BhY2VfaW5zdGFuY2VfdXJsJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogV29ya3NwYWNlIGluc3RhbmNlIFVSTCBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnd29ya3NwYWNlX3BhdF9rZXknKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBXb3Jrc3BhY2UgUEFUIGtleSBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19sb2NhdGlvbl9wcmltYXJ5Jyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogcHJpbWFyeSByZWdpb24gc3luYyBsb2NhdGlvbiBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19sb2NhdGlvbl9zZWNvbmRhcnknKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBzZWNvbmRhcnkgcmVnaW9uIHN5bmMgbG9jYXRpb24gaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFN0b3BwaW5nIGpvYi4iKQogICAgICAgICAgICByZXR1cm4ge30KCiAgICAgICAgIyBIYW5kbGUgb3B0aW9uYWwgZmllbGRzIHdpdGggZGVmYXVsdHMKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19pbnRlcnZhbF9taW5zJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJXYXJuaW5nOiBTeW5jIGRlZmF1bHQgc2NoZWR1bGUgaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFVzaW5nIGRlZmF1bHQgc2NoZWR1bGU6IGV2ZXJ5IDEyIGhvdXJzLiIpCiAgICAgICAgICAgIHdvcmtzcGFjZVsnc3luY19pbnRlcnZhbF9taW5zJ10gPSA3MjAKCiAgICAgICAgaWYgbm90IHdvcmtzcGFjZS5nZXQoJ3N5bmNfZmFpbG92ZXJfaW50ZXJ2YWxfbWlucycpOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBkZWZhdWx0IHNjaGVkdWxlIGlzIG1pc3NpbmcgZm9yIHdvcmtzcGFjZSAne3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXX0nLiBVc2luZyBkZWZhdWx0IHNjaGVkdWxlOiBldmVyeSAxMiBob3Vycy4iKQogICAgICAgICAgICB3b3Jrc3BhY2VbJ3N5bmNfaW50ZXJ2YWxfbWlucyddID0gMjE2MAoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19tYXhfcmV0cmllcycpOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBtYXggcmV0cmllcyBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gVXNpbmcgZGVmYXVsdCBtYXggcmV0cmllczogMy4iKQogICAgICAgICAgICB3b3Jrc3BhY2VbJ3N5bmNfbWF4X3JldHJpZXMnXSA9ICIzIgoKICAgICAgICAjIFZhbGlkYXRlIGdyb3VwIG5hbWVzIGZvciB1bmlxdWVuZXNzCiAgICAgICAgZ3JvdXBfbmFtZXMgPSBbZ3JvdXAuZ2V0KCdncm91cF9uYW1lJykgZm9yIGdyb3VwIGluIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXSBpZiBncm91cC5nZXQoJ2dyb3VwX25hbWUnKV0KICAgICAgICBpZiBsZW4oZ3JvdXBfbmFtZXMpICE9IGxlbihzZXQoZ3JvdXBfbmFtZXMpKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBHcm91cCBuYW1lcyBtdXN0IGJlIHVuaXF1ZSB3aXRoaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFN0b3BwaW5nIGpvYi4iKQogICAgICAgICAgICByZXR1cm4ge30KCiAgICAgICAgIyBWYWxpZGF0ZSBlYWNoIHN5bmMgZ3JvdXAKICAgICAgICB2YWxpZGF0ZWRfZ3JvdXBzID0gW10KICAgICAgICBmb3IgZ3JvdXAgaW4gd29ya3NwYWNlWydzeW5jX2dyb3VwcyddOgogICAgICAgICAgICBncm91cF9uYW1lID0gZ3JvdXAuZ2V0KCdncm91cF9uYW1lJywgJ1VubmFtZWQnKQoKICAgICAgICAgICAgaWYgbm90IGdyb3VwX25hbWU6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBncm91cCBuYW1lIGlzIG5vdCBkZWZpbmVkIGluIHdvcmtzcGFjZSAne3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXX0nLiBDb250aW51aW5nIHdpdGggdGhpcyBncm91cC4iKQoKICAgICAgICAgICAgIyBFeGNlcHRpb24gZm9yICdzY2hlZHVsZWRfc3luYycgZ3JvdXA6IFNraXAgd29ya2Zsb3cgdmFsaWRhdGlvbgogICAgICAgICAgICBpZiBncm91cF9uYW1lICE9ICdzY2hlZHVsZWRfc3luYycgYW5kIG5vdCBncm91cC5nZXQoJ3dvcmtmbG93Jyk6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119JyBkb2VzIG5vdCBoYXZlIGEgd29ya2Zsb3cgZGVmaW5lZC4iKQoKICAgICAgICAgICAgaWYgbm90IGdyb3VwLmdldCgndGFibGVzJyk6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119JyBkb2VzIG5vdCBoYXZlIGFueSB0YWJsZXMgZGVmaW5lZC4iKQoKICAgICAgICAgICAgaWYgZ3JvdXBfbmFtZSBhbmQgKGdyb3VwLmdldCgnd29ya2Zsb3cnKSBvciBncm91cC5nZXQoJ3RhYmxlcycpIG9yIGdyb3VwX25hbWUgPT0gJ3NjaGVkdWxlZF9zeW5jJyk6CiAgICAgICAgICAgICAgICB2YWxpZGF0ZWRfZ3JvdXBzLmFwcGVuZChncm91cCkKCiAgICAgICAgd29ya3NwYWNlWydzeW5jX2dyb3VwcyddID0gdmFsaWRhdGVkX2dyb3VwcwogICAgICAgIHZhbGlkYXRlZF9jb25maWdbJ3dvcmtzcGFjZXMnXS5hcHBlbmQod29ya3NwYWNlKQoKICAgICMgUHJpbnQgYSBzdW1tYXJ5IG9mIHRoZSB2YWxpZGF0aW9uCiAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJcblZhbGlkYXRpb24gU3VtbWFyeToiKQogICAgbG9nX21lc3NhZ2UoImRlYnVnIixmInsnV29ya3NwYWNlIE5hbWUnOjwyNX0geydHcm91cHMgVmFsaWRhdGVkJzo8MjB9IHsnRGVmYXVsdCBTY2hlZHVsZSc6PDIwfSB7J01heCBSZXRyaWVzJzo8MTB9IikKICAgIGZvciB3b3Jrc3BhY2UgaW4gdmFsaWRhdGVkX2NvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgIG51bV9ncm91cHMgPSBsZW4od29ya3NwYWNlWydzeW5jX2dyb3VwcyddKQogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJ7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddOjwyNX0ge251bV9ncm91cHM6PDIwfSB7d29ya3NwYWNlWydzeW5jX2ludGVydmFsX21pbnMnXTo8MjB9IHt3b3Jrc3BhY2VbJ3N5bmNfbWF4X3JldHJpZXMnXTo8MTB9IikKCiAgICByZXR1cm4gdmFsaWRhdGVkX2NvbmZpZwoKZGVmIHZhbGlkYXRlX3dvcmtmbG93X2FuZF90YWJsZXMoY29uZmlnOiBkaWN0LCBzeW5jX2xvY2F0aW9uX3RvOiBzdHIgPSAicHJpbWFyeSIpIC0+IGJvb2w6CiAgICAiIiIKICAgIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgZGV0YWlsZWQgdmFsaWRhdGlvbiBvZiB3b3JrZmxvd3MgYW5kIHRhYmxlcyB3aXRoaW4gZWFjaCB3b3Jrc3BhY2UuCgogICAgLSBWYWxpZGF0ZXMgYWNjZXNzIHRvIGV4dGVybmFsIHN0b3JhZ2UgbG9jYXRpb25zLgogICAgLSBFbnN1cmVzIHRoZSBleGlzdGVuY2UgYW5kIGFjY2Vzc2liaWxpdHkgb2YgbWV0YWRhdGEgdGFibGVzIGF0IHNwZWNpZmljIHN1YnBhdGhzIGluIHRoZSBzdG9yYWdlIGxvY2F0aW9ucy4KICAgIC0gVmFsaWRhdGVzIHdvcmtmbG93cyBhbmQgdGFibGVzIHRoYXQgaGF2ZW4ndCBiZWVuIHZhbGlkYXRlZCB5ZXQsIGFjY29yZGluZyB0byBhIHByZS1leGlzdGluZyBtZXRhZGF0YSB0YWJsZS4KICAgIC0gQ29sbGVjdHMgdmFsaWRhdGlvbiByZXN1bHRzIGFuZCBtZXJnZXMgdGhlbSBpbnRvIHRoZSBtZXRhZGF0YSB0YWJsZSBpbiBvbmUgc2hvdC4KICAgIC0gTG9ncyBpc3N1ZXMgYW5kIGNvbnRpbnVlcyB2YWxpZGF0aW9uIGZvciBvdGhlciBncm91cHMgZXZlbiBpZiBzb21lIGZhaWwuCgogICAgQXJnczoKICAgIC0gY29uZmlnIChkaWN0KTogVGhlIGNvbmZpZ3VyYXRpb24gZGljdGlvbmFyeSBsb2FkZWQgZnJvbSB0aGUgSlNPTiBmaWxlLgogICAgLSBzeW5jX2xvY2F0aW9uX3RvIChzdHIpOiBFaXRoZXIgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHRvIHNwZWNpZnkgd2hpY2ggc3luYyBsb2NhdGlvbiB0byB2YWxpZGF0ZS4KCiAgICBSZXR1cm5zOgogICAgLSBib29sOiBUcnVlIGlmIGFsbCB3b3JrZmxvd3MgYW5kIHRhYmxlcyBhcmUgdmFsaWQsIEZhbHNlIG90aGVyd2lzZS4KICAgICIiIgogICAgYWxsX3ZhbGlkID0gVHJ1ZQogICAgbmV3X21ldGFkYXRhX2VudHJpZXMgPSBbXSAgIyBDb2xsZWN0IG5ldyBvciB1cGRhdGVkIG1ldGFkYXRhIGVudHJpZXMKCiAgICAjIERldGVybWluZSB3aGV0aGVyIHRvIHVzZSBwcmltYXJ5IG9yIHNlY29uZGFyeSBsb2NhdGlvbgogICAgaWYgc3luY19sb2NhdGlvbl90byBub3QgaW4gWyJwcmltYXJ5IiwgInNlY29uZGFyeSJdOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN5bmNfbG9jYXRpb25fdG8gbXVzdCBiZSBlaXRoZXIgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIikKCiAgICBmb3Igd29ya3NwYWNlIGluIGNvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJWYWxpZGF0aW5nIHdvcmtzcGFjZToge3dvcmtzcGFjZS5nZXQoJ3dvcmtzcGFjZV9uYW1lJywgJ1VubmFtZWQnKX0iKQoKICAgICAgICAjIERldGVybWluZSBzeW5jIGxvY2F0aW9uIGJhc2VkIG9uIHBhcmFtZXRlcgogICAgICAgIHN5bmNfbG9jYXRpb24gPSB3b3Jrc3BhY2UuZ2V0KGYic3luY19sb2NhdGlvbl97c3luY19sb2NhdGlvbl90b30iKQogICAgICAgIG1ldGFfcGF0aCA9IGYie3N5bmNfbG9jYXRpb259L21ldGEiCgogICAgICAgICMgQ2hlY2sgYWNjZXNzIHRvIHRoZSBzeW5jIGxvY2F0aW9uCiAgICAgICAgaWYgbm90IGNoZWNrX2ZzX3BhdGgobWV0YV9wYXRoKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBObyBhY2Nlc3MgdG8gJ21ldGEnIHBhdGggYXQge3N5bmNfbG9jYXRpb25fdG99IHN5bmMgbG9jYXRpb24gJ3ttZXRhX3BhdGh9JyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIikKICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyBMb2FkIG1ldGFkYXRhIGZyb20gdGhlIHNwZWNpZmllZCBsb2NhdGlvbgogICAgICAgIG1ldGFkYXRhX3RhYmxlX3BhdGggPSBmInttZXRhX3BhdGh9L3N5bmNfbWV0YWRhdGFfdGFibGUiCiAgICAgICAgbWV0YWRhdGFfdGFibGUgPSBsb2FkX21ldGFkYXRhX3RhYmxlKG1ldGFkYXRhX3RhYmxlX3BhdGgpCgogICAgICAgIGZvciBncm91cCBpbiB3b3Jrc3BhY2VbJ3N5bmNfZ3JvdXBzJ106CiAgICAgICAgICAgIGdyb3VwX25hbWUgPSBncm91cC5nZXQoJ2dyb3VwX25hbWUnLCAnVW5uYW1lZCcpCgogICAgICAgICAgICAjIENoZWNrIGlmIHRoaXMgZ3JvdXAgaXMgYWxyZWFkeSB2YWxpZGF0ZWQgaW4gdGhlIG1ldGFkYXRhIHRhYmxlCiAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnkgPSBtZXRhZGF0YV90YWJsZS5nZXQoKHdvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXSwgZ3JvdXBfbmFtZSksIE5vbmUpCgogICAgICAgICAgICAjIEhhbmRsZSBwb3RlbnRpYWwgZGVsZXRpb25zIGFuZCBjaGFuZ2VzIGluIGNvbmZpZ3VyYXRpb24KICAgICAgICAgICAgaWYgdmFsaWRhdGlvbl9lbnRyeToKICAgICAgICAgICAgICAgICMgSWYgdGhlIGdyb3VwIGhhcyBiZWVuIGRlbGV0ZWQgZnJvbSB0aGUgY29uZmlndXJhdGlvbiwgc2tpcCBhZGRpbmcgaXQgdG8gdGhlIG5ldyBlbnRyaWVzCiAgICAgICAgICAgICAgICBpZiBub3QgYW55KGdbJ2dyb3VwX25hbWUnXSA9PSBncm91cF9uYW1lIGZvciBnIGluIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXSk6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkluZm86IFN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgbm8gbG9uZ2VyIGV4aXN0cyBpbiBjb25maWd1cmF0aW9uLiBSZW1vdmluZyBmcm9tIG1ldGFkYXRhIHRhYmxlLiIpCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAjIENoZWNrIGZvciBjaGFuZ2VzIGluIHdvcmtmbG93IG9yIHRhYmxlcwogICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25fZW50cnlbJ3dvcmtmbG93X25hbWUnXSAhPSBncm91cC5nZXQoJ3dvcmtmbG93JykpIG9yICh2YWxpZGF0aW9uX2VudHJ5Wyd0YWJsZXMnXSAhPSBncm91cC5nZXQoJ3RhYmxlcycpKToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiSW5mbzogRGV0ZWN0ZWQgY2hhbmdlcyBpbiBzeW5jIGdyb3VwICd7Z3JvdXBfbmFtZX0nIGNvbmZpZ3VyYXRpb24uIFJldmFsaWRhdGluZy4iKQogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnlbJ3ZhbGlkYXRlZCddID0gRmFsc2UgICMgTWFyayBhcyBub3QgdmFsaWRhdGVkIGZvciByZXZhbGlkYXRpb24KCiAgICAgICAgICAgIGlmIHZhbGlkYXRpb25fZW50cnkgYW5kIHZhbGlkYXRpb25fZW50cnlbJ3ZhbGlkYXRlZCddOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkluZm86IFN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScgaXMgYWxyZWFkeSB2YWxpZGF0ZWQuIFNraXBwaW5nIHZhbGlkYXRpb24uIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIFZhbGlkYXRlIHdvcmtmbG93IGV4aXN0ZW5jZQogICAgICAgICAgICBpZiBncm91cC5nZXQoJ3dvcmtmbG93Jyk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIyBGZXRjaCB0aGUgam9iIGluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIG1ldGhvZCwgcmV0cmlldmUgUEFUIHRva2VuIGFuZCBzY29wZSBmcm9tIGNvbmZpZwogICAgICAgICAgICAgICAgICAgIGpvYl9pbmZvID0gZ2V0X2RhdGFicmlja3Nfam9ic19pbmZvKAogICAgICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9pbnN0YW5jZV91cmwnXSwgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5nZXQoJ3NlY3JldF9zY29wZScpLCAgIyBQYXNzIHRoZSBzZWNyZXQgc2NvcGUgZnJvbSBjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlWyd3b3Jrc3BhY2VfcGF0X2tleSddLCAKICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwWyd3b3JrZmxvdyddXQogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGpvYl9pbmZvOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiRXJyb3I6IFdvcmtmbG93ICd7Z3JvdXBbJ3dvcmtmbG93J119JyBkb2VzIG5vdCBleGlzdCBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIikKICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19pZCA9IGpvYl9pbmZvLmdldChncm91cFsnd29ya2Zsb3cnXSwgTm9uZSkKICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3Jrc3BhY2VfbmFtZSc6IHdvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdncm91cF9uYW1lJzogZ3JvdXBfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3JrZmxvd19uYW1lJzogZ3JvdXAuZ2V0KCd3b3JrZmxvdycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dvcmtmbG93X2lkJzogd29ya2Zsb3dfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFibGVzJzogZ3JvdXAuZ2V0KCd0YWJsZXMnLCBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsaWRhdGVkJzogRmFsc2UgICMgTWFyayBhcyBub3QgdmFsaWRhdGVkIHVudGlsIHJlLXZhbGlkYXRpb24gaXMgZG9uZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBDb3VsZCBub3QgdmFsaWRhdGUgd29ya2Zsb3cgJ3tncm91cFsnd29ya2Zsb3cnXX0nIGZvciBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jzoge2V9IikKICAgICAgICAgICAgICAgICAgICBhbGxfdmFsaWQgPSBGYWxzZQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uX2VudHJ5ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dvcmtzcGFjZV9uYW1lJzogd29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dyb3VwX25hbWUnOiBncm91cF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dvcmtmbG93X25hbWUnOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3JrZmxvd19pZCc6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhYmxlcyc6IGdyb3VwLmdldCgndGFibGVzJywgW10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbGlkYXRlZCc6IEZhbHNlICAjIE1hcmsgYXMgbm90IHZhbGlkYXRlZCB1bnRpbCByZS12YWxpZGF0aW9uIGlzIGRvbmUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIyBWYWxpZGF0ZSB0YWJsZXMgZXhpc3RlbmNlIGFuZCByZWFkIHBlcm1pc3Npb25zCiAgICAgICAgICAgIGZvciB0YWJsZSBpbiBncm91cFsndGFibGVzJ106CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGNoZWNrX3RhYmxlKHRhYmxlKToKICAgICAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBDYW5ub3QgYWNjZXNzIHRhYmxlICd7dGFibGV9JyBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIikKICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiRXJyb3I6IENvdWxkIG5vdCB2YWxpZGF0ZSB0YWJsZSAne3RhYmxlfScgZm9yIGdyb3VwICd7Z3JvdXBfbmFtZX0nIGluIHdvcmtzcGFjZSAne3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXX0nOiB7ZX0iKQogICAgICAgICAgICAgICAgICAgIGFsbF92YWxpZCA9IEZhbHNlCgogICAgICAgICAgICAjIElmIHZhbGlkYXRpb24gd2FzIHN1Y2Nlc3NmdWwsIHVwZGF0ZSB0aGUgbWV0YWRhdGEgZW50cnkgYXMgdmFsaWRhdGVkCiAgICAgICAgICAgIGlmIGFsbF92YWxpZDoKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnlbJ3ZhbGlkYXRlZCddID0gVHJ1ZQogICAgICAgICAgICAgICAgbmV3X21ldGFkYXRhX2VudHJpZXMuYXBwZW5kKHZhbGlkYXRpb25fZW50cnkpCgogICAgIyBPbmNlIGFsbCB2YWxpZGF0aW9ucyBhcmUgZG9uZSwgbWVyZ2UgbmV3IGVudHJpZXMgaW50byB0aGUgbWV0YWRhdGEgdGFibGUsIG9ubHkgaWYgbmV3IGVudHJpZXMgd2VyZSBmb3VuZAogICAgaWYgbmV3X21ldGFkYXRhX2VudHJpZXM6CiAgICAgICAgbWVyZ2VfbWV0YWRhdGFfZW50cmllcyhtZXRhZGF0YV90YWJsZV9wYXRoLCBuZXdfbWV0YWRhdGFfZW50cmllcykKICAgIGVsc2U6CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwiTm8gbmV3IG1ldGFkYXRhIGVudHJpZXMgZm91bmQuIFNraXBwaW5nIG1ldGFkYXRhIG1lcmdlLiIpCgogICAgcmV0dXJuIGFsbF92YWxpZAo=",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/validator",
            "language": "PYTHON",
            "md5": "bea6a7529f00161b8a91b6d1d81151ca",
            "object_id": 3574564832210019,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/validator",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/dr_sync_job/validator"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "file_checker",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIERlZmluZSB0aGUgc291cmNlIGRpcmVjdG9yeSBwYXRoCnN0b3JhZ2VhY2NuYW1lID0gZGJ1dGlscy53aWRnZXRzLmdldCgic3RvcmFnZWFjY25hbWUiKQoKc291cmNlX2RpcmVjdG9yeSA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9LmRmcy5jb3JlLndpbmRvd3MubmV0L2RhdGEvaW5nZXN0aW9uLyIgICMgUmVwbGFjZSB3aXRoIHlvdXIgYWN0dWFsIFMzIHBhdGgKCiMgQ2hlY2sgaWYgYW55IGZpbGVzIGV4aXN0IGluIHRoZSBzb3VyY2UgZGlyZWN0b3J5CmZpbGVzID0gZGJ1dGlscy5mcy5scyhzb3VyY2VfZGlyZWN0b3J5KQoKIyBTZXQgdGhlIHRhc2sgc3RhdHVzIGJhc2VkIG9uIHRoZSBwcmVzZW5jZSBvZiBmaWxlcwppZiBmaWxlczoKICAgIGRidXRpbHMuam9icy50YXNrVmFsdWVzLnNldCgiZmlsZV9jaGVja19zdGF0dXMiLCAidHJ1ZSIpCiAgICBwcmludCgiRmlsZXMgZm91bmQsIHNldHRpbmcgc3RhdHVzIHRvIEZJTEVTX0ZPVU5ELiIpCmVsc2U6CiAgICBkYnV0aWxzLmpvYnMudGFza1ZhbHVlcy5zZXQoImZpbGVfY2hlY2tfc3RhdHVzIiwgImZhbHNlIikKICAgIHByaW50KCJObyBmaWxlcyBmb3VuZCwgc2V0dGluZyBzdGF0dXMgdG8gTk9fRklMRVNfRk9VTkQuIikK",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/file_checker",
            "language": "PYTHON",
            "md5": "8c4534390ba209f93dc3b2b5d363e345",
            "object_id": 3574564832210004,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/file_checker",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/file_checker"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "generate_raw_data",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "aW1wb3J0IHJhbmRvbQppbXBvcnQgc3RyaW5nCgojIEdlbmVyYXRlIHJhbmRvbSBkYXRhCmRhdGEgPSBbKGksICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX2xldHRlcnMgKyBzdHJpbmcuZGlnaXRzLCBrPTEwKSksIHJhbmRvbS5yYW5kaW50KDEsIDEwMCkpIGZvciBpIGluIHJhbmdlKDEwMCldCgojIENyZWF0ZSBEYXRhRnJhbWUKZGYgPSBzcGFyay5jcmVhdGVEYXRhRnJhbWUoZGF0YSwgWyJpZCIsICJuYW1lIiwgInZhbHVlIl0pCgojIFdyaXRlIHRvIHJhdyB0YWJsZQpkZi53cml0ZS5tb2RlKCJvdmVyd3JpdGUiKS5zYXZlQXNUYWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy5yYXdfZGF0YSIpCg==",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/GenerateRawData",
            "language": "PYTHON",
            "md5": "c43c3d3278728a282f1697e530090ed4",
            "object_id": 3574564832210036,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/GenerateRawData",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/GenerateRawData"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "gold",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIGRlbHRhLnRhYmxlcyBpbXBvcnQgRGVsdGFUYWJsZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgZXhwciwgY3VycmVudF90aW1lc3RhbXAsIGNvbCwgbGl0CgojIERlZmluZSBwYXRocyBhbmQgZGF0YWJhc2UKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCmdvbGRfdGFibGVfcGF0aCA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9LmRmcy5jb3JlLndpbmRvd3MubmV0L2RhdGEvbWFpbi93b3JrZmxvd18xX2dvbGQiICAKZGF0YWJhc2VfbmFtZSA9ICJkcl90ZXN0X2NhdGFsb2cubWFpbiIgCnRhYmxlX25hbWUgPSAid29ya2Zsb3dfMV9nb2xkIiAgCgojIENyZWF0ZSBvciByZXBsYWNlIHRoZSBHb2xkIHRhYmxlIGFzIGFuIGV4dGVybmFsIERlbHRhIHRhYmxlIGFuZCByZWdpc3RlciBpdCBpbiBVbml0eSBDYXRhbG9nCnNwYXJrLnNxbChmIiIiCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB7ZGF0YWJhc2VfbmFtZX0ue3RhYmxlX25hbWV9ICgKICAgICAgICBmaWxlX25hbWUgU1RSSU5HLAogICAgICAgIHBhcnNlZF9kYXRhIFNUUklORywKICAgICAgICBwYXJzZWRfdGltZSBUSU1FU1RBTVAsCiAgICAgICAgd29ya3NwYWNlX25hbWUgU1RSSU5HLAogICAgICAgIG1lcmdlX2NvdW50ZXIgQklHSU5ULAogICAgICAgIG1lcmdlX3RpbWUgVElNRVNUQU1QCiAgICApCiAgICBVU0lORyBERUxUQQogICAgTE9DQVRJT04gJ3tnb2xkX3RhYmxlX3BhdGh9JwoiIiIpCgojIExvYWQgdGhlIFNpbHZlciB0YWJsZSBkYXRhCnNpbHZlcl9kZiA9IHNwYXJrLnJlYWQudGFibGUoImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIpCgojIENhbGN1bGF0ZSB0aGUgY3VycmVudCBtYXggdmFsdWUgb2YgbWVyZ2VfY291bnRlciBmcm9tIHRoZSBHb2xkIHRhYmxlCm1heF9jb3VudGVyID0gc3Bhcmsuc3FsKGYiU0VMRUNUIENPQUxFU0NFKE1BWChtZXJnZV9jb3VudGVyKSwgMCkgQVMgbWF4X2NvdW50ZXIgRlJPTSB7ZGF0YWJhc2VfbmFtZX0ue3RhYmxlX25hbWV9IikuY29sbGVjdCgpWzBdWydtYXhfY291bnRlciddCgojIEFkZCBhIG5ldyBtZXJnZSBjb3VudGVyIHN0YXJ0aW5nIGZyb20gdGhlIGN1cnJlbnQgbWF4IGNvdW50ZXIKc2lsdmVyX2RmID0gc2lsdmVyX2RmLndpdGhDb2x1bW4oIm1lcmdlX2NvdW50ZXIiLCBleHByKGYie21heF9jb3VudGVyfSArIG1vbm90b25pY2FsbHlfaW5jcmVhc2luZ19pZCgpICsgMSIpKQpzaWx2ZXJfZGYgPSBzaWx2ZXJfZGYud2l0aENvbHVtbigibWVyZ2VfdGltZSIsIGN1cnJlbnRfdGltZXN0YW1wKCkpCgojIE1lcmdlIHRoZSBTaWx2ZXIgZGF0YSBpbnRvIHRoZSBHb2xkIHRhYmxlCmdvbGRfdGFibGUgPSBEZWx0YVRhYmxlLmZvclBhdGgoc3BhcmssIGdvbGRfdGFibGVfcGF0aCkKCmdvbGRfdGFibGUuYWxpYXMoInRndCIpLm1lcmdlKAogICAgc2lsdmVyX2RmLmFsaWFzKCJzcmMiKSwKICAgICJ0Z3QuZmlsZV9uYW1lID0gc3JjLmZpbGVfbmFtZSIKKS53aGVuTWF0Y2hlZFVwZGF0ZUFsbCgKKS53aGVuTm90TWF0Y2hlZEluc2VydEFsbCgKKS5leGVjdXRlKCkKCiMgVmVyaWZ5IHRoZSBjcmVhdGlvbiBhbmQgbWVyZ2luZwpzcGFyay5zcWwoZiJTRUxFQ1QgKiBGUk9NIHtkYXRhYmFzZV9uYW1lfS57dGFibGVfbmFtZX0iKS5zaG93KCkK",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/gold",
            "language": "PYTHON",
            "md5": "2fd8fda248e349ec8c106fb01df7e765",
            "object_id": 3574564832210010,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/gold",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/gold"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "silver",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgZnJvbV91bml4dGltZSwgY29sCmZyb20gcHlzcGFyay5zcWwudHlwZXMgaW1wb3J0IFN0cnVjdFR5cGUsIFN0cnVjdEZpZWxkLCBTdHJpbmdUeXBlCgojIFJlYWQgZGF0YSBmcm9tIHRoZSBicm9uemUgdGFibGUKYnJvbnplX2RmID0gc3BhcmsucmVhZC50YWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIpCgojIERlZmluZSB0aGUgc2NoZW1hIGZvciB0aGUgcGFyc2VkIGRhdGEKc2NoZW1hID0gU3RydWN0VHlwZShbCiAgICBTdHJ1Y3RGaWVsZCgicGFyc2VkX2RhdGEiLCBTdHJpbmdUeXBlKCksIFRydWUpCl0pCgojIFBhcnNlIHRoZSBiaW5hcnkgY29udGVudApzaWx2ZXJfZGYgPSAoYnJvbnplX2RmLndpdGhDb2x1bW4oInBhcnNlZF9kYXRhIiwgYnJvbnplX2RmWyJjb250ZW50Il0uY2FzdCgic3RyaW5nIikpICAjIENhc3QgY29udGVudCB0byBzdHJpbmcgYXMgYW4gZXhhbXBsZSBvZiBwYXJzaW5nCiAgICAgICAgICAgICAud2l0aENvbHVtbigicGFyc2VkX3RpbWUiLCBmcm9tX3VuaXh0aW1lKGNvbCgiZmlsZV9tb2RpZmllZF90aW1lIikuY2FzdCgibG9uZyIpKSkgICMgQ29udmVydCBmaWxlX21vZGlmaWVkX3RpbWUgdG8gaHVtYW4tcmVhZGFibGUgdGltZQogICAgICAgICAgICAgLnNlbGVjdCgiZmlsZV9uYW1lIiwgInBhcnNlZF9kYXRhIiwgInBhcnNlZF90aW1lIiwgIndvcmtzcGFjZV9uYW1lIikpCgojIFNhdmUgdGhlIHBhcnNlZCBkYXRhIHRvIGEgU2lsdmVyIHRhYmxlCnNpbHZlcl9kZi53cml0ZS5mb3JtYXQoImRlbHRhIikubW9kZSgib3ZlcndyaXRlIikuc2F2ZUFzVGFibGUoImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIpCgojIHNsZWVwIGZvciAyIG1pbnMKaW1wb3J0IHRpbWUKdGltZS5zbGVlcCgyMCkKCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlc3FsCiMgTUFHSUMgc2VsZWN0ICogZnJvbSBkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uud29ya2Zsb3dfMV9zaWx2ZXI=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/silver",
            "language": "PYTHON",
            "md5": "6c5a12e68aaf8515f9ebfe35c95a6265",
            "object_id": 3574564832210021,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/silver",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/silver"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "transform_to_silver",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBSZWFkIGZyb20gcmF3IHRhYmxlCmRmX3JhdyA9IHNwYXJrLnRhYmxlKCJkcl90ZXN0X2NhdGFsb2cucmF3LnJhd19kYXRhIikKCiMgVHJhbnNmb3JtYXRpb24gKGUuZy4sIGZpbHRlciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDUwKQpkZl9zaWx2ZXIgPSBkZl9yYXcuZmlsdGVyKGRmX3Jhdy52YWx1ZSA+IDUwKQoKIyBXcml0ZSB0byBzaWx2ZXIgdGFibGUKZGZfc2lsdmVyLndyaXRlLm1vZGUoIm92ZXJ3cml0ZSIpLnNhdmVBc1RhYmxlKCJkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uuc2lsdmVyX2RhdGEiKQo=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/TransformToSilver",
            "language": "PYTHON",
            "md5": "274511d439cdc454657a34f49a3602b1",
            "object_id": 3574564832210034,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/TransformToSilver",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/TransformToSilver"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for gold data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.main",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "main",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "raw",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for raw data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.raw",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "raw",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "stage",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for silver data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.stage",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "stage",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_storage_credential",
      "name": "dr_cross_westus2_storage_credential",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aws_iam_role": [],
            "azure_managed_identity": [
              {
                "access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_westus2/providers/Microsoft.Databricks/accessConnectors/dr_test_westus2_connector",
                "credential_id": "59221016-8bce-4970-afd7-9b74642603c9",
                "managed_identity_id": ""
              }
            ],
            "azure_service_principal": [],
            "comment": null,
            "databricks_gcp_service_account": [],
            "force_destroy": null,
            "force_update": null,
            "gcp_service_account_key": [],
            "id": "dr_cross_westus2_storage_credential",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_cross_westus2_storage_credential",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "storage_credential_id": "852fe600-48a2-4c53-b2f0-d72e8cf22428"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "data.terraform_remote_state.westus2",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_schema.main",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_storage_credential",
      "name": "dr_eastus2_storage_credential",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aws_iam_role": [],
            "azure_managed_identity": [
              {
                "access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
                "credential_id": "c3b0baef-3b25-44f5-8ae9-aa91a447e27f",
                "managed_identity_id": ""
              }
            ],
            "azure_service_principal": [],
            "comment": "Managed identity for storage access",
            "databricks_gcp_service_account": [],
            "force_destroy": null,
            "force_update": null,
            "gcp_service_account_key": [],
            "id": "dr_eastus2_storage_credential",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "a1d9d2a5-35bc-48be-8472-3e98154312a5",
            "name": "dr_eastus2_storage_credential",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "storage_credential_id": "4d2bcba0-c828-41b6-abe1-b12a786cbdf3"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_workspace_file",
      "name": "dr_sync_job_config",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "eyAic2VjcmV0X3Njb3BlIiA6ICJkci10ZXN0LXNjb3BlIiwKICAid29ya3NwYWNlcyI6IFsKICAgIHsKICAgICAgIndvcmtzcGFjZV9uYW1lIjogImRyX3Rlc3RfZWFzdHVzMl9kYXRhYnJpY2tzIiwKICAgICAgIndvcmtzcGFjZV9pbnN0YW5jZV91cmwiOiAiaHR0cHM6Ly9hZGItMTE2NDIwNDQ2MDQxNzEzNS4xNS5henVyZWRhdGFicmlja3MubmV0IiwKICAgICAgIndvcmtzcGFjZV9wYXRfa2V5IiA6ICJkci1wYXQta2V5IiwgCiAgICAgICJzeW5jX2xvY2F0aW9uX3ByaW1hcnkiOiAiYWJmc3M6Ly9kci1zeW5jQGVhc3R1czJkcnN0b3JhZ2VhY2N0LmRmcy5jb3JlLndpbmRvd3MubmV0LyIsCiAgICAgICJzeW5jX2xvY2F0aW9uX3NlY29uZGFyeSI6ICJhYmZzczovL2RyLXN5bmNAd2VzdHVzMmRyc3RvcmFnZWFjY3QuZGZzLmNvcmUud2luZG93cy5uZXQvIiwKICAgICAgInN5bmNfZmFpbHVyZV9ub3RpZmljYXRpb24iOiAibW9oaXQuc2luZ2hAZGF0YWJyaWNrcy5jb20iLAogICAgICAic3luY19zdWNjZXNzX25vdGlmaWNhdGlvbiI6ICJtb2hpdC5zaW5naEBkYXRhYnJpY2tzLmNvbSIsCiAgICAgICJzeW5jX2ludGVydmFsX21pbnMiOiA1LAogICAgICAic3luY19mYWlsb3Zlcl9pbnRlcnZhbF9taW5zIjogMTAsCiAgICAgICJzeW5jX21heF9yZXRyaWVzIjogIjMiLAogICAgICAic3luY19ncm91cHMiOiBbCiAgICAgICAgewogICAgICAgICAgImdyb3VwX25hbWUiOiAic2FtcGxlX3dvcmtmbG93XzEiLAogICAgICAgICAgImdyb3VwX293bmVyX2VtYWlsIjogIm1vaGl0LnNpbmdoQGRhdGFicmlja3MuY29tIiwKICAgICAgICAgICJ3b3JrZmxvdyI6ICJzYW1wbGVfd29ya2Zsb3dfMSIsCiAgICAgICAgICAidGFibGVzIjogWyJkcl90ZXN0X2NhdGFsb2cucmF3LndvcmtmbG93XzFfYnJvbnplIiwiZHJfdGVzdF9jYXRhbG9nLnN0YWdlLndvcmtmbG93XzFfc2lsdmVyIiwiZHJfdGVzdF9jYXRhbG9nLm1haW4ud29ya2Zsb3dfMV9nb2xkIl0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICJncm91cF9uYW1lIjogInNjaGVkdWxlZF9zeW5jIiwKICAgICAgICAgICJncm91cF9vd25lcl9lbWFpbCI6ICJtb2hpdC5zaW5naEBkYXRhYnJpY2tzLmNvbSIsCiAgICAgICAgICAidGFibGVzIjogWyJkcl90ZXN0X2NhdGFsb2cucmF3LnJhd19kYXRhIiwiZHJfdGVzdF9jYXRhbG9nLnN0YWdlLnNpbHZlcl9kYXRhIiwiZHJfdGVzdF9jYXRhbG9nLm1haW4uZ29sZF9kYXRhIl0KICAgICAgICB9CiAgICAgIF0KICAgIH0KICBdCn0=",
            "id": "/Workspace/dr_sync_job/config/config_dev.json",
            "md5": "83442b9c0c02eff9ef303324ab2034aa",
            "object_id": 3574564832210016,
            "path": "/Workspace/dr_sync_job/config/config_dev.json",
            "source": null,
            "url": "https://adb-1164204460417135.15.azuredatabricks.net/#workspace/Workspace/dr_sync_job/config/config_dev.json",
            "workspace_path": "/Workspace/Workspace/dr_sync_job/config/config_dev.json"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
