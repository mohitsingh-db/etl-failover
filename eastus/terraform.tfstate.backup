{
  "version": 4,
  "terraform_version": "1.9.2",
  "serial": 85,
  "lineage": "2c3ea6ec-7a9b-c61e-269d-9255dcd9cbc3",
  "outputs": {
    "eastus2_access_connector_id": {
      "value": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
      "type": "string"
    },
    "eastus2_databricks_workspace_name": {
      "value": "dr_test_eastus2_databricks",
      "type": "string"
    },
    "eastus2_databricks_workspace_url": {
      "value": "adb-3942378291930718.18.azuredatabricks.net",
      "type": "string"
    },
    "eastus2_dr_sync_container_name": {
      "value": "dr-sync",
      "type": "string"
    },
    "eastus2_external_container_name": {
      "value": "external",
      "type": "string"
    },
    "eastus2_storage_account_name": {
      "value": "eastus2drstorageacct",
      "type": "string"
    },
    "resource_group_eastus2_name": {
      "value": "dr_test_eastus2",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "azurerm_databricks_access_connector",
      "name": "dr_test_eastus2_connector",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
            "identity": [
              {
                "identity_ids": [],
                "principal_id": "20ce0ac0-549b-4901-b3e1-1ed2c61a5532",
                "tenant_id": "bf465dc7-3bc8-4944-b018-092572b5c20d",
                "type": "SystemAssigned"
              }
            ],
            "location": "eastus2",
            "name": "dr_test_eastus2_connector",
            "resource_group_name": "dr_test_eastus2",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_databricks_workspace",
      "name": "dr_test_eastus2_databricks",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_connector_id": null,
            "custom_parameters": [
              {
                "machine_learning_workspace_id": "",
                "nat_gateway_name": "nat-gateway",
                "no_public_ip": true,
                "private_subnet_name": "",
                "private_subnet_network_security_group_association_id": "",
                "public_ip_name": "nat-gw-public-ip",
                "public_subnet_name": "",
                "public_subnet_network_security_group_association_id": "",
                "storage_account_name": "dbstoragezttwfdoqfykje",
                "storage_account_sku_name": "Standard_GRS",
                "virtual_network_id": "",
                "vnet_address_prefix": "10.139"
              }
            ],
            "customer_managed_key_enabled": false,
            "default_storage_firewall_enabled": null,
            "disk_encryption_set_id": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/workspaces/dr_test_eastus2_databricks",
            "infrastructure_encryption_enabled": false,
            "load_balancer_backend_address_pool_id": "",
            "location": "eastus2",
            "managed_disk_cmk_key_vault_id": "",
            "managed_disk_cmk_key_vault_key_id": "",
            "managed_disk_cmk_rotation_to_latest_version_enabled": false,
            "managed_disk_identity": [],
            "managed_resource_group_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/databricks-rg-dr_test_eastus2",
            "managed_resource_group_name": "databricks-rg-dr_test_eastus2",
            "managed_services_cmk_key_vault_id": "",
            "managed_services_cmk_key_vault_key_id": "",
            "name": "dr_test_eastus2_databricks",
            "network_security_group_rules_required": null,
            "public_network_access_enabled": true,
            "resource_group_name": "dr_test_eastus2",
            "sku": "premium",
            "storage_account_identity": [],
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null,
            "workspace_id": "3942378291930718",
            "workspace_url": "adb-3942378291930718.18.azuredatabricks.net"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "dr_test_eastus2",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2",
            "location": "eastus2",
            "managed_by": "",
            "name": "dr_test_eastus2",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "eastus2_blob_contributor",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/providers/Microsoft.Authorization/roleAssignments/321f7ae1-694a-85b1-f1d5-21a1907512d1",
            "name": "321f7ae1-694a-85b1-f1d5-21a1907512d1",
            "principal_id": "20ce0ac0-549b-4901-b3e1-1ed2c61a5532",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/providers/Microsoft.Authorization/roleDefinitions/ba92f5b4-2d11-453d-a403-e96b0029c9fe",
            "role_definition_name": "Storage Blob Data Contributor",
            "scope": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "eastus2_queue_contributor",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/providers/Microsoft.Authorization/roleAssignments/d96a61a8-6d90-abea-a56a-da75f947fe3d",
            "name": "d96a61a8-6d90-abea-a56a-da75f947fe3d",
            "principal_id": "20ce0ac0-549b-4901-b3e1-1ed2c61a5532",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/providers/Microsoft.Authorization/roleDefinitions/974c5e8b-45b9-4653-ba55-5f855dd0fb88",
            "role_definition_name": "Storage Queue Data Contributor",
            "scope": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_account",
      "name": "dr_test_eastus2_storage",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 4,
          "attributes": {
            "access_tier": "Hot",
            "account_kind": "StorageV2",
            "account_replication_type": "LRS",
            "account_tier": "Standard",
            "allow_nested_items_to_be_public": true,
            "allowed_copy_scope": "",
            "azure_files_authentication": [],
            "blob_properties": [
              {
                "change_feed_enabled": false,
                "change_feed_retention_in_days": 0,
                "container_delete_retention_policy": [],
                "cors_rule": [],
                "default_service_version": "",
                "delete_retention_policy": [],
                "last_access_time_enabled": false,
                "restore_policy": [],
                "versioning_enabled": false
              }
            ],
            "cross_tenant_replication_enabled": true,
            "custom_domain": [],
            "customer_managed_key": [],
            "default_to_oauth_authentication": false,
            "dns_endpoint_type": "Standard",
            "edge_zone": "",
            "enable_https_traffic_only": true,
            "https_traffic_only_enabled": true,
            "id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct",
            "identity": [],
            "immutability_policy": [],
            "infrastructure_encryption_enabled": false,
            "is_hns_enabled": true,
            "large_file_share_enabled": false,
            "local_user_enabled": true,
            "location": "eastus2",
            "min_tls_version": "TLS1_2",
            "name": "eastus2drstorageacct",
            "network_rules": [],
            "nfsv3_enabled": false,
            "primary_access_key": "yww2/C3aStfu7O+BSSoS0CSjTJhp/oKrblGw5aC3pgAvH91vKfvLE4DFth647d7Mrvbg/nxSVvyD+AStRYgw5w==",
            "primary_blob_connection_string": "DefaultEndpointsProtocol=https;BlobEndpoint=https://eastus2drstorageacct.blob.core.windows.net/;AccountName=eastus2drstorageacct;AccountKey=yww2/C3aStfu7O+BSSoS0CSjTJhp/oKrblGw5aC3pgAvH91vKfvLE4DFth647d7Mrvbg/nxSVvyD+AStRYgw5w==",
            "primary_blob_endpoint": "https://eastus2drstorageacct.blob.core.windows.net/",
            "primary_blob_host": "eastus2drstorageacct.blob.core.windows.net",
            "primary_blob_internet_endpoint": "",
            "primary_blob_internet_host": "",
            "primary_blob_microsoft_endpoint": "",
            "primary_blob_microsoft_host": "",
            "primary_connection_string": "DefaultEndpointsProtocol=https;AccountName=eastus2drstorageacct;AccountKey=yww2/C3aStfu7O+BSSoS0CSjTJhp/oKrblGw5aC3pgAvH91vKfvLE4DFth647d7Mrvbg/nxSVvyD+AStRYgw5w==;EndpointSuffix=core.windows.net",
            "primary_dfs_endpoint": "https://eastus2drstorageacct.dfs.core.windows.net/",
            "primary_dfs_host": "eastus2drstorageacct.dfs.core.windows.net",
            "primary_dfs_internet_endpoint": "",
            "primary_dfs_internet_host": "",
            "primary_dfs_microsoft_endpoint": "",
            "primary_dfs_microsoft_host": "",
            "primary_file_endpoint": "https://eastus2drstorageacct.file.core.windows.net/",
            "primary_file_host": "eastus2drstorageacct.file.core.windows.net",
            "primary_file_internet_endpoint": "",
            "primary_file_internet_host": "",
            "primary_file_microsoft_endpoint": "",
            "primary_file_microsoft_host": "",
            "primary_location": "eastus2",
            "primary_queue_endpoint": "https://eastus2drstorageacct.queue.core.windows.net/",
            "primary_queue_host": "eastus2drstorageacct.queue.core.windows.net",
            "primary_queue_microsoft_endpoint": "",
            "primary_queue_microsoft_host": "",
            "primary_table_endpoint": "https://eastus2drstorageacct.table.core.windows.net/",
            "primary_table_host": "eastus2drstorageacct.table.core.windows.net",
            "primary_table_microsoft_endpoint": "",
            "primary_table_microsoft_host": "",
            "primary_web_endpoint": "https://eastus2drstorageacct.z20.web.core.windows.net/",
            "primary_web_host": "eastus2drstorageacct.z20.web.core.windows.net",
            "primary_web_internet_endpoint": "",
            "primary_web_internet_host": "",
            "primary_web_microsoft_endpoint": "",
            "primary_web_microsoft_host": "",
            "public_network_access_enabled": true,
            "queue_encryption_key_type": "Service",
            "queue_properties": [
              {
                "cors_rule": [],
                "hour_metrics": [
                  {
                    "enabled": true,
                    "include_apis": true,
                    "retention_policy_days": 7,
                    "version": "1.0"
                  }
                ],
                "logging": [
                  {
                    "delete": false,
                    "read": false,
                    "retention_policy_days": 0,
                    "version": "1.0",
                    "write": false
                  }
                ],
                "minute_metrics": [
                  {
                    "enabled": false,
                    "include_apis": false,
                    "retention_policy_days": 0,
                    "version": "1.0"
                  }
                ]
              }
            ],
            "resource_group_name": "dr_test_eastus2",
            "routing": [],
            "sas_policy": [],
            "secondary_access_key": "PTdrrSRbUPH/as9xtIsNwDHluUMV9wzNdLVukSemqruV7zbYJHo2874V64I1zbzPTaCBv+DhK/xq+AStXDhn7A==",
            "secondary_blob_connection_string": "",
            "secondary_blob_endpoint": "",
            "secondary_blob_host": "",
            "secondary_blob_internet_endpoint": "",
            "secondary_blob_internet_host": "",
            "secondary_blob_microsoft_endpoint": "",
            "secondary_blob_microsoft_host": "",
            "secondary_connection_string": "DefaultEndpointsProtocol=https;AccountName=eastus2drstorageacct;AccountKey=PTdrrSRbUPH/as9xtIsNwDHluUMV9wzNdLVukSemqruV7zbYJHo2874V64I1zbzPTaCBv+DhK/xq+AStXDhn7A==;EndpointSuffix=core.windows.net",
            "secondary_dfs_endpoint": "",
            "secondary_dfs_host": "",
            "secondary_dfs_internet_endpoint": "",
            "secondary_dfs_internet_host": "",
            "secondary_dfs_microsoft_endpoint": "",
            "secondary_dfs_microsoft_host": "",
            "secondary_file_endpoint": "",
            "secondary_file_host": "",
            "secondary_file_internet_endpoint": "",
            "secondary_file_internet_host": "",
            "secondary_file_microsoft_endpoint": "",
            "secondary_file_microsoft_host": "",
            "secondary_location": "",
            "secondary_queue_endpoint": "",
            "secondary_queue_host": "",
            "secondary_queue_microsoft_endpoint": "",
            "secondary_queue_microsoft_host": "",
            "secondary_table_endpoint": "",
            "secondary_table_host": "",
            "secondary_table_microsoft_endpoint": "",
            "secondary_table_microsoft_host": "",
            "secondary_web_endpoint": "",
            "secondary_web_host": "",
            "secondary_web_internet_endpoint": "",
            "secondary_web_internet_host": "",
            "secondary_web_microsoft_endpoint": "",
            "secondary_web_microsoft_host": "",
            "sftp_enabled": false,
            "share_properties": [
              {
                "cors_rule": [],
                "retention_policy": [
                  {
                    "days": 7
                  }
                ],
                "smb": []
              }
            ],
            "shared_access_key_enabled": true,
            "static_website": [],
            "table_encryption_key_type": "Service",
            "tags": {
              "Owner": "mohit.singh@databricks.com"
            },
            "timeouts": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "primary_blob_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_access_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_blob_connection_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "primary_access_key"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiI0In0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_container",
      "name": "dr_test_eastus2_dr_sync",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "container_access_type": "private",
            "default_encryption_scope": "$account-encryption-key",
            "encryption_scope_override_enabled": true,
            "has_immutability_policy": false,
            "has_legal_hold": false,
            "id": "https://eastus2drstorageacct.blob.core.windows.net/dr-sync",
            "metadata": {},
            "name": "dr-sync",
            "resource_manager_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/blobServices/default/containers/dr-sync",
            "storage_account_name": "eastus2drstorageacct",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_storage_container",
      "name": "dr_test_eastus2_external",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "container_access_type": "private",
            "default_encryption_scope": "$account-encryption-key",
            "encryption_scope_override_enabled": true,
            "has_immutability_policy": false,
            "has_legal_hold": false,
            "id": "https://eastus2drstorageacct.blob.core.windows.net/external",
            "metadata": {},
            "name": "external",
            "resource_manager_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Storage/storageAccounts/eastus2drstorageacct/blobServices/default/containers/external",
            "storage_account_name": "eastus2drstorageacct",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_catalog",
      "name": "dr_test_catalog",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "comment": "Test catalog for data organization",
            "connection_name": null,
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog",
            "isolation_mode": "OPEN",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "dr_test_catalog",
            "options": null,
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "provider_name": null,
            "share_name": null,
            "storage_root": "abfss://external@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_cluster",
      "name": "etl_cluster",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 4,
          "attributes": {
            "apply_policy_default_values": null,
            "autoscale": [],
            "autotermination_minutes": 20,
            "aws_attributes": [],
            "azure_attributes": [
              {
                "availability": "ON_DEMAND_AZURE",
                "first_on_demand": 1,
                "log_analytics_info": [],
                "spot_bid_max_price": -1
              }
            ],
            "cluster_id": "0821-150906-z3bh4web",
            "cluster_log_conf": [],
            "cluster_mount_info": [],
            "cluster_name": "Etl Cluster",
            "custom_tags": {
              "ResourceClass": "SingleNode"
            },
            "data_security_mode": "SINGLE_USER",
            "default_tags": {
              "ClusterId": "0821-150906-z3bh4web",
              "ClusterName": "Etl Cluster",
              "Creator": "mohit.singh@databricks.com",
              "Owner": "mohit.singh@databricks.com",
              "Vendor": "Databricks"
            },
            "docker_image": [],
            "driver_instance_pool_id": null,
            "driver_node_type_id": "Standard_D4ds_v5",
            "enable_elastic_disk": true,
            "enable_local_disk_encryption": false,
            "gcp_attributes": [],
            "id": "0821-150906-z3bh4web",
            "idempotency_token": null,
            "init_scripts": [],
            "instance_pool_id": null,
            "is_pinned": false,
            "library": [],
            "node_type_id": "Standard_D4ds_v5",
            "num_workers": 0,
            "policy_id": null,
            "runtime_engine": "PHOTON",
            "single_user_name": "mohit.singh@databricks.com",
            "spark_conf": {
              "spark.databricks.cluster.profile": "singleNode",
              "spark.master": "local[*, 4]"
            },
            "spark_env_vars": {
              "PYSPARK_PYTHON": "/databricks/python3/bin/python3"
            },
            "spark_version": "14.3.x-scala2.12",
            "ssh_public_keys": null,
            "state": "RUNNING",
            "timeouts": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#setting/clusters/0821-150906-z3bh4web/configuration",
            "workload_type": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiNCJ9",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_external_location",
      "name": "dr_eastus2_external_location",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_point": null,
            "comment": "External location for data storage in eastus2",
            "credential_name": "dr_eastus2_storage_credential",
            "encryption_details": [],
            "force_destroy": null,
            "force_update": null,
            "id": "dr_eastus2_external_location",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "dr_eastus2_external_location",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "url": "abfss://external@eastus2drstorageacct.dfs.core.windows.net/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "sample_workflow_1",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "92715354334437",
            "job_cluster": [],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "sample_workflow_1",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [
              {
                "default": "eastus2drstorageacct",
                "name": "storageaccname"
              }
            ],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "true",
                    "task_key": "status"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "0821-150906-z3bh4web",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/bronze",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "adls_to_raw",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "raw_to_stage"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "0821-150906-z3bh4web",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/archive",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "archive",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "0821-150906-z3bh4web",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/file_checker",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "file_checker",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "adls_to_raw"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "0821-150906-z3bh4web",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/silver",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "raw_to_stage",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "archive"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "0821-150906-z3bh4web",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_1/gold",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "stage_to_main",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [
                  {
                    "left": "{{tasks.file_checker.values.file_check_status}}",
                    "op": "EQUAL_TO",
                    "right": "true"
                  }
                ],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "file_checker"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "status",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#job/92715354334437",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "databricks_cluster.etl_cluster"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_job",
      "name": "workflow",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "always_running": false,
            "continuous": [],
            "control_run_state": false,
            "dbt_task": [],
            "deployment": [],
            "description": null,
            "edit_mode": null,
            "email_notifications": [
              {
                "no_alert_for_skipped_runs": false,
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ],
            "environment": [],
            "existing_cluster_id": null,
            "format": "MULTI_TASK",
            "git_source": [],
            "health": [],
            "id": "41281853853977",
            "job_cluster": [
              {
                "job_cluster_key": "etl_job_cluster",
                "new_cluster": [
                  {
                    "apply_policy_default_values": false,
                    "autoscale": [],
                    "aws_attributes": [],
                    "azure_attributes": [
                      {
                        "availability": "ON_DEMAND_AZURE",
                        "first_on_demand": 0,
                        "log_analytics_info": [],
                        "spot_bid_max_price": 0
                      }
                    ],
                    "cluster_id": "",
                    "cluster_log_conf": [],
                    "cluster_mount_info": [],
                    "cluster_name": "",
                    "custom_tags": {},
                    "data_security_mode": "",
                    "docker_image": [],
                    "driver_instance_pool_id": "",
                    "driver_node_type_id": "",
                    "enable_elastic_disk": true,
                    "enable_local_disk_encryption": false,
                    "gcp_attributes": [],
                    "idempotency_token": "",
                    "init_scripts": [],
                    "instance_pool_id": "",
                    "library": [],
                    "node_type_id": "Standard_DS3_v2",
                    "num_workers": 2,
                    "policy_id": "",
                    "runtime_engine": "",
                    "single_user_name": "",
                    "spark_conf": {},
                    "spark_env_vars": {},
                    "spark_version": "14.3.x-scala2.12",
                    "ssh_public_keys": [],
                    "workload_type": []
                  }
                ]
              }
            ],
            "library": [],
            "max_concurrent_runs": 1,
            "max_retries": 0,
            "min_retry_interval_millis": 0,
            "name": "sample_workflow_2",
            "new_cluster": [],
            "notebook_task": [],
            "notification_settings": [],
            "parameter": [],
            "pipeline_task": [],
            "python_wheel_task": [],
            "queue": [],
            "retry_on_timeout": false,
            "run_as": [
              {
                "service_principal_name": "",
                "user_name": "mohit.singh@databricks.com"
              }
            ],
            "run_job_task": [],
            "schedule": [
              {
                "pause_status": "PAUSED",
                "quartz_cron_expression": "0 0 * * * ?",
                "timezone_id": "UTC"
              }
            ],
            "spark_jar_task": [],
            "spark_python_task": [],
            "spark_submit_task": [],
            "tags": null,
            "task": [
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "TransformToSilver"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "etl_job_cluster",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/AggregateToGold",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "AggregateToGold",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "etl_job_cluster",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/GenerateRawData",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "GenerateRawData",
                "timeout_seconds": 0,
                "webhook_notifications": []
              },
              {
                "condition_task": [],
                "dbt_task": [],
                "depends_on": [
                  {
                    "outcome": "",
                    "task_key": "GenerateRawData"
                  }
                ],
                "description": "",
                "disable_auto_optimization": false,
                "email_notifications": [
                  {
                    "no_alert_for_skipped_runs": false,
                    "on_duration_warning_threshold_exceeded": [],
                    "on_failure": [],
                    "on_start": [],
                    "on_streaming_backlog_exceeded": [],
                    "on_success": []
                  }
                ],
                "environment_key": "",
                "existing_cluster_id": "",
                "for_each_task": [],
                "health": [],
                "job_cluster_key": "etl_job_cluster",
                "library": [],
                "max_retries": 0,
                "min_retry_interval_millis": 0,
                "new_cluster": [],
                "notebook_task": [
                  {
                    "base_parameters": {},
                    "notebook_path": "/Workspace/sample_workflow_2/TransformToSilver",
                    "source": "WORKSPACE",
                    "warehouse_id": ""
                  }
                ],
                "notification_settings": [],
                "pipeline_task": [],
                "python_wheel_task": [],
                "retry_on_timeout": false,
                "run_if": "ALL_SUCCESS",
                "run_job_task": [],
                "spark_jar_task": [],
                "spark_python_task": [],
                "spark_submit_task": [],
                "sql_task": [],
                "task_key": "TransformToSilver",
                "timeout_seconds": 0,
                "webhook_notifications": []
              }
            ],
            "timeout_seconds": 0,
            "timeouts": null,
            "trigger": [],
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#job/41281853853977",
            "webhook_notifications": [
              {
                "on_duration_warning_threshold_exceeded": [],
                "on_failure": [],
                "on_start": [],
                "on_streaming_backlog_exceeded": [],
                "on_success": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_notebook.aggregate_to_gold",
            "databricks_notebook.generate_raw_data",
            "databricks_notebook.transform_to_silver"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_metastore",
      "name": "dr_eastus2_metastore",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].account",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cloud": "azure",
            "created_at": 1724252788530,
            "created_by": "mohit.singh@databricks.com",
            "default_data_access_config_id": null,
            "delta_sharing_organization_name": null,
            "delta_sharing_recipient_token_lifetime_in_seconds": 0,
            "delta_sharing_scope": "INTERNAL",
            "force_destroy": null,
            "global_metastore_id": "azure:eastus2:0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "dr_eastus2_metastore",
            "owner": "mohit.singh@databricks.com",
            "region": "eastus2",
            "storage_root": null,
            "storage_root_credential_id": null,
            "updated_at": 1724252788530,
            "updated_by": "mohit.singh@databricks.com"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_metastore_assignment",
      "name": "dr_eastus2_metastore_assignment",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "default_catalog_name": "main",
            "id": "3942378291930718|0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "workspace_id": 3942378291930718
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_metastore.dr_eastus2_metastore"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "aggregate_to_gold",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBSZWFkIGZyb20gc2lsdmVyIHRhYmxlCmRmX3NpbHZlciA9IHNwYXJrLnRhYmxlKCJkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uuc2lsdmVyX2RhdGEiKQoKIyBBZ2dyZWdhdGlvbiAoZS5nLiwgY291bnQgYnkgbmFtZSkKZGZfZ29sZCA9IGRmX3NpbHZlci5ncm91cEJ5KCJuYW1lIikuY291bnQoKQoKIyBXcml0ZSB0byBnb2xkIHRhYmxlCmRmX2dvbGQud3JpdGUubW9kZSgib3ZlcndyaXRlIikuc2F2ZUFzVGFibGUoImRyX3Rlc3RfY2F0YWxvZy5tYWluLmdvbGRfZGF0YSIpCgo=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/AggregateToGold",
            "language": "PYTHON",
            "md5": "8582c64e84728db1397b06a97ef57031",
            "object_id": 326876806154379,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/AggregateToGold",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/AggregateToGold"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "archive",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIFBhdGhzIHdoZXJlIHRoZSBmaWxlIGlzIGN1cnJlbnRseSBzdG9yZWQgYW5kIHdoZXJlIGl0IHdpbGwgYmUgYXJjaGl2ZWQKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCgpzb3VyY2VfcGF0aCA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9L2RhdGEvaW5nZXN0aW9uLyIKYXJjaGl2ZV9wYXRoID0gZiJhYmZzczovL2V4dGVybmFsQHtzdG9yYWdlYWNjbmFtZX0vZGF0YS9hcmNoaXZlLyIKCiMgU3BlY2lmeSB0aGUgZmlsZSBuYW1lIChpZiBrbm93bikgb3IgbGlzdCBhbmQgcHJvY2VzcyBmaWxlcyBkeW5hbWljYWxseQojIEV4YW1wbGU6IGZpbGVfbmFtZSA9ICJzYW1wbGVfZmlsZV8yMDI0MDgxM18xNTQ1MzAudHh0IgoKIyBPcHRpb25hbGx5LCBsaXN0IGZpbGVzIGluIHRoZSBzb3VyY2UgcGF0aCAoaWYgeW91IHdhbnQgdG8gbW92ZSBhbGwgZmlsZXMpCmZpbGVzID0gZGJ1dGlscy5mcy5scyhzb3VyY2VfcGF0aCkKCmZvciBmaWxlX2luZm8gaW4gZmlsZXM6CiAgICBmaWxlX25hbWUgPSBmaWxlX2luZm8ubmFtZSAgIyBFeHRyYWN0IHRoZSBmaWxlIG5hbWUKICAgIHNvdXJjZV9maWxlX3BhdGggPSBmIntzb3VyY2VfcGF0aH17ZmlsZV9uYW1lfSIKICAgIGFyY2hpdmVfZmlsZV9wYXRoID0gZiJ7YXJjaGl2ZV9wYXRofXtmaWxlX25hbWV9IgogICAgCiAgICAjIE1vdmUgdGhlIGZpbGUgYnkgY29weWluZyBpdCB0byB0aGUgYXJjaGl2ZSBwYXRoIGFuZCB0aGVuIGRlbGV0aW5nIGl0IGZyb20gdGhlIHNvdXJjZSBwYXRoCiAgICBkYnV0aWxzLmZzLmNwKHNvdXJjZV9maWxlX3BhdGgsIGFyY2hpdmVfZmlsZV9wYXRoKQogICAgZGJ1dGlscy5mcy5ybShzb3VyY2VfZmlsZV9wYXRoKQoKICAgICMgUHJpbnQgY29uZmlybWF0aW9uCiAgICBwcmludChmIkZpbGUgbW92ZWQgZnJvbSB7c291cmNlX2ZpbGVfcGF0aH0gdG8ge2FyY2hpdmVfZmlsZV9wYXRofSIp",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/archive",
            "language": "PYTHON",
            "md5": "587a1f7f17e876b9ab1f7bc0bc08a673",
            "object_id": 125143969838815,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/archive",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/archive"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "bronze",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgY3VycmVudF90aW1lc3RhbXAsIGxpdCwgZXhwciwgY29sCgp3b3Jrc3BhY2VfbmFtZSA9ICJlMi1kZW1vLWZpZWxkLWVuZyIgICMgUmVwbGFjZSB3aXRoIHRoZSBhY3R1YWwgd29ya3NwYWNlIG5hbWUKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCgojIFJlYWQgdGhlIGJpbmFyeSBmaWxlcyBmcm9tIGEgZGlyZWN0b3J5CmJpbmFyeV9kZiA9IChzcGFyay5yZWFkLmZvcm1hdCgiYmluYXJ5RmlsZSIpCiAgICAgICAgICAgICAubG9hZChmImFiZnNzOi8vZXh0ZXJuYWxAe3N0b3JhZ2VhY2NuYW1lfS9kYXRhL2luZ2VzdGlvbi8iKQoud2l0aENvbHVtbigiZmlsZV9tb2RpZmllZF90aW1lIiwgY29sKCJtb2RpZmljYXRpb25UaW1lIikpLndpdGhDb2x1bW4oImZpbGVfbmFtZSIsIGV4cHIoIl9tZXRhZGF0YS5maWxlX3BhdGgiKSkgICMgQWRqdXN0ZWQgbGluZQogICAgICAgICAgICAgLndpdGhDb2x1bW4oIndvcmtzcGFjZV9uYW1lIiwgbGl0KHdvcmtzcGFjZV9uYW1lKSkpCgojIFNhdmUgdGhlIGJpbmFyeSBkYXRhLCBmaWxlbmFtZSwgbW9kaWZpZWQgdGltZSwgYW5kIHdvcmtzcGFjZSBuYW1lIHRvIGEgRGVsdGEgdGFibGUKYmluYXJ5X2RmLndyaXRlLmZvcm1hdCgiZGVsdGEiKS5tb2RlKCJvdmVyd3JpdGUiKS5zYXZlQXNUYWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIpCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKIyBNQUdJQyAlc3FsIAojIE1BR0lDIHNlbGVjdCAqIGZyb20gZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZQ==",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/bronze",
            "language": "PYTHON",
            "md5": "d21f3d1688073585d787311ace23dfff",
            "object_id": 125143969838796,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/bronze",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/bronze"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_main",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIE1BR0lDICVydW4gLi91dGlscwoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXJ1biAuL3ZhbGlkYXRvcgoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXJ1biAuL3N5bmNfdG9fcmVnaW9uCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKTE9HX0xFVkVMID0gImRlYnVnIiAgIyBEZWZhdWx0IGxvZyBsZXZlbApjb25maWcgPSBsb2FkX2NvbmZpZygiLi9jb25maWcvY29uZmlnX2Rldi5qc29uIikKdmFsaWRhdGVkX2NvbmZpZyA9IHZhbGlkYXRlX2NvbmZpZyhjb25maWcpCgojIENPTU1BTkQgLS0tLS0tLS0tLQoKdmFsaWRhdGVfd29ya2Zsb3dfYW5kX3RhYmxlcyh2YWxpZGF0ZWRfY29uZmlnLCAic2Vjb25kYXJ5IikKICAKCiMgQ09NTUFORCAtLS0tLS0tLS0tCgojIFJ1biBzeW5jIHVzaW5nIHRoZSBzZWNvbmRhcnkgc3luYyBsb2NhdGlvbiB3aXRoIGRldGFpbGVkIGRlYnVnZ2luZyBpbmZvcm1hdGlvbgpzeW5jX3RvX3JlZ2lvbigKICAgIHZhbGlkYXRlZF9jb25maWcsICAgICAgICAjIFRoZSB2YWxpZGF0ZWQgY29uZmlndXJhdGlvbiBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgd29ya3NwYWNlIGFuZCBzeW5jIGRldGFpbHMKICAgICJzZWNvbmRhcnkiLCAgICAgICAgICAgICAjIFVzZSB0aGUgJ3NlY29uZGFyeScgc3luYyBsb2NhdGlvbiBmb3IgdGhpcyBzeW5jIG9wZXJhdGlvbgogICAgc3luY19pbnRlcnZhbF9ob3Vycz0xMCwgICMgUmVjaGVjayBncm91cHMgdGhhdCBoYXZlbid0IGJlZW4gc3luY2VkIGZvciBhdCBsZWFzdCAxMCBob3VycwogICAgbWF4X3dvcmtlcnM9MTAgICAgICAgICAgIyBVc2UgdXAgdG8gMTAgdGhyZWFkcyBmb3IgcGFyYWxsZWwgcHJvY2Vzc2luZyBvZiB3b3JrZmxvd3MKKQoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXNxbAojIE1BR0lDIHNlbGVjdCAqIGZyb20gaHVtYW5hLm1haW4ud29ya2Zsb3dfMV9nb2xk",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/main",
            "language": "PYTHON",
            "md5": "404285b44a64b86b1c3e678a99b6bfae",
            "object_id": 125143969838819,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/main",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/dr_sync_job/main"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_sync_to_region",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IsIGFzX2NvbXBsZXRlZApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgcHl0egpmcm9tIHB5c3Bhcmsuc3FsIGltcG9ydCBmdW5jdGlvbnMgYXMgRgoKIyBHbG9iYWwgdmFyaWFibGUgdG8gY29sbGVjdCBpbmZvLWxldmVsIGxvZ3MgZm9yIHN1Y2Nlc3NmdWwgd29ya2Zsb3dzCnN1Y2Nlc3NmdWxfd29ya2Zsb3dzID0gW10KCmRlZiBwcm9jZXNzX3dvcmtmbG93X3RvX3JlZ2lvbih3b3JrZmxvd19kYXRhLCBpbnN0YW5jZV91cmwsIHBhdF90b2tlbiwgdGFyZ2V0X2xvY2F0aW9uLCBtZXRhZGF0YV90YWJsZV9wYXRoKToKICAgICIiIgogICAgUHJvY2VzcyBhIHNpbmdsZSB3b3JrZmxvdzogQ2hlY2sgZm9yIG5ldyBjb21taXRzLCB0aGVuIGRvIEFQSSBjYWxsIGFuZCBkZWVwIGNsb25lIGlmIHJlcXVpcmVkLgogICAgQWxzbywgdXBkYXRlIHRoZSBtZXRhZGF0YSB0YWJsZSB3aXRoIHN5bmMgc3RhdHVzIG9ubHkgd2hlbiB0aGVyZSBpcyBhIGRlZXAgY2xvbmUgcGVyZm9ybWVkLgogICAgIiIiCiAgICAod29ya3NwYWNlX25hbWUsIGdyb3VwX25hbWUpLCBtZXRhZGF0YSA9IHdvcmtmbG93X2RhdGEKICAgIHRhYmxlcyA9IG1ldGFkYXRhWyJ0YWJsZXMiXQogICAgdmFsaWRhdGVkID0gbWV0YWRhdGEuZ2V0KCJ2YWxpZGF0ZWQiLCBOb25lKSAgIyBDYW4gYmUgTm9uZSBpZiBub3QgYXZhaWxhYmxlCiAgICB3b3JrZmxvd19pZCA9IG1ldGFkYXRhLmdldCgid29ya2Zsb3dfaWQiLCBOb25lKQogICAgbGFzdF9zeW5jX3RpbWUgPSBtZXRhZGF0YS5nZXQoImxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSIsIE5vbmUpCiAgICBzeW5jX3N0YXR1cyA9IG1ldGFkYXRhLmdldCgic3luY19zdGF0dXMiLCBOb25lKQoKICAgICMgU3RlcCAxOiBQYXJzZSBhbGwgdGFibGVzIGludG8gYSBsaXN0IG9mIChjYXRhbG9nLCBzY2hlbWEsIHRhYmxlX25hbWUpCiAgICBwYXJzZWRfdGFibGVzID0gW10KICAgIGZvciB0YWJsZSBpbiB0YWJsZXM6CiAgICAgICAgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lID0gdGFibGUuc3BsaXQoIi4iKQogICAgICAgIHBhcnNlZF90YWJsZXMuYXBwZW5kKChjYXRhbG9nLCBzY2hlbWEsIHRhYmxlX25hbWUpKQoKICAgICMgU3RlcCAyOiBDaGVjayBmb3IgbmV3IGNvbW1pdHMgaW4gYW55IG9mIHRoZSB0YWJsZXMKICAgIG5ld19jb21taXRzX2ZvdW5kID0gRmFsc2UKICAgIHRyeToKICAgICAgICBmb3IgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lIGluIHBhcnNlZF90YWJsZXM6CiAgICAgICAgICAgIHNvdXJjZV90YWJsZSA9IGYie2NhdGFsb2d9LntzY2hlbWF9Lnt0YWJsZV9uYW1lfSIKCiAgICAgICAgICAgICMgUXVlcnkgdGhlIGhpc3Rvcnkgb2YgdGhlIHRhYmxlIHRvIGNoZWNrIGZvciBjb21taXRzIGFmdGVyIHRoZSBsYXN0IHN5bmMKICAgICAgICAgICAgaGlzdG9yeV9kZiA9IHNwYXJrLnNxbChmIkRFU0NSSUJFIEhJU1RPUlkge3NvdXJjZV90YWJsZX0iKQoKICAgICAgICAgICAgIyBJZiBsYXN0X3N5bmNfdGltZSBpcyBOb25lLCBhc3N1bWUgaXQncyB0aGUgZmlyc3Qgc3luYyBhbmQgcHJvY2VlZAogICAgICAgICAgICBpZiBsYXN0X3N5bmNfdGltZSBpcyBOb25lIG9yIHN5bmNfc3RhdHVzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIkZpcnN0IHRpbWUgc3luYyBmb3Ige2dyb3VwX25hbWV9LCBwcm9jZWVkaW5nIHdpdGggc3luYy4iKQogICAgICAgICAgICAgICAgbmV3X2NvbW1pdHNfZm91bmQgPSBUcnVlCiAgICAgICAgICAgICAgICBicmVhayAgIyBObyBuZWVkIHRvIGNoZWNrIGZ1cnRoZXIgdGFibGVzLCBidXQgdGhleSB3aWxsIHN0aWxsIGJlIHBhcnQgb2YgdGhlIGRlZXAgY2xvbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgSWYgbGFzdF9zeW5jX3RpbWUgaXMgYXZhaWxhYmxlLCBjaGVjayBmb3IgbmV3IGNvbW1pdHMKICAgICAgICAgICAgICAgIGxhc3Rfc3luY19kYXRldGltZSA9IGxhc3Rfc3luY190aW1lIGlmIGlzaW5zdGFuY2UobGFzdF9zeW5jX3RpbWUsIGRhdGV0aW1lKSBlbHNlIGRhdGV0aW1lLnN0cnB0aW1lKGxhc3Rfc3luY190aW1lLCAiJVktJW0tJWQgJUg6JU06JVMiKS5yZXBsYWNlKHR6aW5mbz1weXR6LlVUQykKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiTGFzdCBzdWNjZXNzZnVsIHN5bmMgZm9yIHdvcmtmbG93IHtncm91cF9uYW1lfSwgdGFibGUge3NvdXJjZV90YWJsZX0gd2FzIHtsYXN0X3N5bmNfZGF0ZXRpbWV9LiIpCiAgICAgICAgICAgICAgICBuZXdfY29tbWl0cyA9IGhpc3RvcnlfZGYuZmlsdGVyKGhpc3RvcnlfZGZbJ3RpbWVzdGFtcCddID4gbGFzdF9zeW5jX2RhdGV0aW1lKS5jb3VudCgpCgogICAgICAgICAgICAgICAgaWYgbmV3X2NvbW1pdHMgPiAwOgogICAgICAgICAgICAgICAgICAgIG5ld19jb21taXRzX2ZvdW5kID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrICAjIFN0b3AgY2hlY2tpbmcgZnVydGhlciB0YWJsZXMgb25jZSB3ZSBmaW5kIG5ldyBjb21taXRzCgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiQ2hlY2tlZCBjb21taXRzIGZvciB7Z3JvdXBfbmFtZX0sIG5ldyBjb21taXRzIGZvdW5kOiB7bmV3X2NvbW1pdHNfZm91bmR9IikKCiAgICAgICAgIyBJZiBubyBuZXcgY29tbWl0cyBhbmQgbm90IHRoZSBmaXJzdCBzeW5jLCBza2lwIHRoZSB3b3JrZmxvdyB3aXRob3V0IHVwZGF0aW5nIG1ldGFkYXRhCiAgICAgICAgaWYgbm90IG5ld19jb21taXRzX2ZvdW5kOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIk5vIG5ldyBjb21taXRzIGZvdW5kIGZvciBncm91cCB7Z3JvdXBfbmFtZX0sIHNraXBwaW5nLiIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIFN0ZXAgMzogSWYgd29ya2Zsb3dfaWQgZXhpc3RzIGFuZCB2YWxpZGF0ZWQsIGNoZWNrIHRoZSB3b3JrZmxvdyBydW4KICAgICAgICBpZiB3b3JrZmxvd19pZDoKICAgICAgICAgICAgaWYgdmFsaWRhdGVkOgogICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bF9ydW5zID0gam9iX3N1Y2Nlc3NmdWxfcnVuX2FmdGVyX2xhc3RfcnVuKGluc3RhbmNlX3VybCwgcGF0X3Rva2VuLCBbd29ya2Zsb3dfaWRdLCBsYXN0X3N5bmNfdGltZSkKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiRm91bmQgc3VjY2Vzc2Z1bCBydW5zIGZvciB3b3JrZmxvdyB7d29ya2Zsb3dfaWR9IGFmdGVyIHtsYXN0X3N5bmNfdGltZX0gYXMge3N1Y2Nlc3NmdWxfcnVuc30iKQogICAgICAgICAgICAgICAgaWYgd29ya2Zsb3dfaWQgbm90IGluIHN1Y2Nlc3NmdWxfcnVucyBvciBub3Qgc3VjY2Vzc2Z1bF9ydW5zW3dvcmtmbG93X2lkXToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIk5vIHN1Y2Nlc3NmdWwgcnVucyBmb3VuZCBmb3Igd29ya2Zsb3cge3dvcmtmbG93X2lkfSBhZnRlciB7bGFzdF9zeW5jX3RpbWV9LiBTa2lwcGluZyBzeW5jLiIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcCA9IHN1Y2Nlc3NmdWxfcnVuc1t3b3JrZmxvd19pZF0KCiAgICAgICAgICAgICAgICAjIFN0ZXAgNDogVXBkYXRlIHN0YXR1cyB0byAnSW4gUHJvZ3Jlc3MnIGFmdGVyIHdvcmtmbG93IGNoZWNrIGFuZCBiZWZvcmUgZGVlcCBjbG9uaW5nCiAgICAgICAgICAgICAgICB1cGRhdGVfbWV0YWRhdGFfc3RhdHVzKG1ldGFkYXRhX3RhYmxlX3BhdGgsIHdvcmtzcGFjZV9uYW1lLCBncm91cF9uYW1lLCAiSW4gUHJvZ3Jlc3MiKQogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJTZXQgJ0luIFByb2dyZXNzJyBzdGF0dXMgZm9yIHt3b3Jrc3BhY2VfbmFtZX0ve2dyb3VwX25hbWV9IikKCiAgICAgICAgICAgICAgICAjIFN0ZXAgNTogUGVyZm9ybSBkZWVwIGNsb25lIGZvciBlYWNoIHRhYmxlLCB1c2luZyB0aGUgaGlnaGVzdCB2ZXJzaW9uIGJlZm9yZSBsYXN0X3N1Y2Nlc3NmdWxfdGltZXN0YW1wCiAgICAgICAgICAgICAgICBmb3IgY2F0YWxvZywgc2NoZW1hLCB0YWJsZV9uYW1lIGluIHBhcnNlZF90YWJsZXM6CiAgICAgICAgICAgICAgICAgICAgc291cmNlX3RhYmxlID0gZiJ7Y2F0YWxvZ30ue3NjaGVtYX0ue3RhYmxlX25hbWV9IgogICAgICAgICAgICAgICAgICAgIHZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcCA9IChzcGFyay5zcWwoZiJERVNDUklCRSBISVNUT1JZIHtzb3VyY2VfdGFibGV9IikKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmInRpbWVzdGFtcCA8PSAne2xhc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXB9JyIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vcmRlckJ5KCJ0aW1lc3RhbXAiLCBhc2NlbmRpbmc9RmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoInZlcnNpb24iLCAidGltZXN0YW1wIikKICAgICAgICAgICAgICAgICAgICAgICAgLmxpbWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsZWN0KCkpCgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ZXJzaW9uX2JlZm9yZV90aW1lc3RhbXA6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgZiJObyB2YWxpZCB2ZXJzaW9uIGZvdW5kIGJlZm9yZSB7bGFzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcH0gZm9yIHRhYmxlIHtzb3VyY2VfdGFibGV9LiBTa2lwcGluZy4iKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBsYXRlc3RfdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wID0gdmVyc2lvbl9iZWZvcmVfdGltZXN0YW1wWzBdWyd2ZXJzaW9uJ10KCiAgICAgICAgICAgICAgICAgICAgIyBSdW4gdGhlIGRlZXAgY2xvbmUgU1FMIGNvbW1hbmQgd2l0aCBWRVJTSU9OIEFTIE9GIGZvciBlYWNoIHRhYmxlCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3RhYmxlX3BhdGggPSBmInt0YXJnZXRfbG9jYXRpb259L3tjYXRhbG9nfS97c2NoZW1hfS97dGFibGVfbmFtZX0iCgogICAgICAgICAgICAgICAgICAgIHNxbF9jb21tYW5kID0gZiIiIgogICAgICAgICAgICAgICAgICAgICAgICBDUkVBVEUgT1IgUkVQTEFDRSBUQUJMRSBkZWx0YS5ge3RhcmdldF90YWJsZV9wYXRofWAgCiAgICAgICAgICAgICAgICAgICAgICAgIERFRVAgQ0xPTkUge3NvdXJjZV90YWJsZX0gVkVSU0lPTiBBUyBPRiB7bGF0ZXN0X3ZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcH0KICAgICAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIkV4ZWN1dGluZyBTUUwgY29tbWFuZDoge3NxbF9jb21tYW5kfSIpCiAgICAgICAgICAgICAgICAgICAgc3Bhcmsuc3FsKHNxbF9jb21tYW5kKQoKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCBmIkRlZXAgY2xvbmVkIHRhYmxlIHtzb3VyY2VfdGFibGV9IHRvIHt0YXJnZXRfdGFibGVfcGF0aH0gYXMgb2YgdmVyc2lvbiB7bGF0ZXN0X3ZlcnNpb25fYmVmb3JlX3RpbWVzdGFtcH0iKQoKICAgICAgICAjIFN0ZXAgNDogSWYgdGhlcmUgaXMgbm8gd29ya2Zsb3dfaWQsIHByb2NlZWQgZGlyZWN0bHkgd2l0aCBkZWVwIGNsb25lIGZvciB0aGUgdGFibGVzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBIYW5kbGUgZ3JvdXBzIHdpdGhvdXQgd29ya2Zsb3dzLCBwZXJmb3JtIGRlZXAgY2xvbmUgZm9yIGVhY2ggdGFibGUKICAgICAgICAgICAgZm9yIGNhdGFsb2csIHNjaGVtYSwgdGFibGVfbmFtZSBpbiBwYXJzZWRfdGFibGVzOgogICAgICAgICAgICAgICAgc291cmNlX3RhYmxlID0gZiJ7Y2F0YWxvZ30ue3NjaGVtYX0ue3RhYmxlX25hbWV9IgogICAgICAgICAgICAgICAgdGFyZ2V0X3RhYmxlX3BhdGggPSBmInt0YXJnZXRfbG9jYXRpb259L3tjYXRhbG9nfS97c2NoZW1hfS97dGFibGVfbmFtZX0iCgogICAgICAgICAgICAgICAgIyBQZXJmb3JtIGRlZXAgY2xvbmUgb25seSBpZiB0YWJsZSBkb2VzIG5vdCBleGlzdAogICAgICAgICAgICAgICAgc3FsX2NvbW1hbmQgPSBmIiIiCiAgICAgICAgICAgICAgICAgICAgQ1JFQVRFIE9SIFJFUExBQ0UgVEFCTEUgZGVsdGEuYHt0YXJnZXRfdGFibGVfcGF0aH1gIAogICAgICAgICAgICAgICAgICAgIERFRVAgQ0xPTkUge3NvdXJjZV90YWJsZX0KICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJFeGVjdXRpbmcgU1FMIGNvbW1hbmQ6IHtzcWxfY29tbWFuZH0iKQogICAgICAgICAgICAgICAgc3Bhcmsuc3FsKHNxbF9jb21tYW5kKQoKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiRGVlcCBjbG9uZWQgdGFibGUge3NvdXJjZV90YWJsZX0gdG8ge3RhcmdldF90YWJsZV9wYXRofSIpCgogICAgICAgICMgU3RlcCA1OiBBZnRlciBzdWNjZXNzZnVsIGNsb25pbmcsIHVwZGF0ZSBtZXRhZGF0YSB0byAnU3VjY2VzcycgYW5kIHNldCBzeW5jIHRpbWUKICAgICAgICBzeW5jX3RpbWUgPSBkYXRldGltZS51dGNub3coKS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiKQogICAgICAgIHVwZGF0ZV9tZXRhZGF0YV9zdGF0dXMobWV0YWRhdGFfdGFibGVfcGF0aCwgd29ya3NwYWNlX25hbWUsIGdyb3VwX25hbWUsICJTdWNjZXNzIiwgbGFzdF9zdWNjZXNzZnVsX3RpbWVzdGFtcCwgc3luY190aW1lKQogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYiU2V0ICdTdWNjZXNzJyBzdGF0dXMgZm9yIHt3b3Jrc3BhY2VfbmFtZX0ve2dyb3VwX25hbWV9IikKCiAgICAgICAgIyBMb2cgc3VtbWFyeSBpbmZvCiAgICAgICAgc3VjY2Vzc2Z1bF93b3JrZmxvd3MuYXBwZW5kKHsKICAgICAgICAgICAgJ3dvcmtzcGFjZV9uYW1lJzogd29ya3NwYWNlX25hbWUsCiAgICAgICAgICAgICdncm91cF9uYW1lJzogZ3JvdXBfbmFtZSwKICAgICAgICAgICAgJ3dvcmtmbG93X25hbWUnOiBtZXRhZGF0YVsnd29ya2Zsb3dfbmFtZSddLAogICAgICAgICAgICAnd29ya2Zsb3dfaWQnOiBtZXRhZGF0YVsnd29ya2Zsb3dfaWQnXSwKICAgICAgICAgICAgJ3RhYmxlcyc6IG1ldGFkYXRhWyd0YWJsZXMnXSwKICAgICAgICAgICAgJ2xhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSc6IGxhc3Rfc3VjY2Vzc2Z1bF90aW1lc3RhbXAsCiAgICAgICAgICAgICdzeW5jX3N0YXR1cyc6ICdTdWNjZXNzJwogICAgICAgIH0pCiAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLCBmIkVycm9yIHByb2Nlc3Npbmcgd29ya2Zsb3cge3dvcmtzcGFjZV9uYW1lfS97Z3JvdXBfbmFtZX06IHtlfSIpCgoKZGVmIHN5bmNfdG9fcmVnaW9uKHZhbGlkYXRlZF9jb25maWc6IGRpY3QsIHN5bmNfbG9jYXRpb25fdG86IHN0ciA9ICJwcmltYXJ5Iiwgc3luY19pbnRlcnZhbF9ob3VyczogaW50ID0gMTAsIG1heF93b3JrZXJzOiBpbnQgPSAxMCk6CiAgICAiIiIKICAgIFN5bmNzIERlbHRhIHRhYmxlcyBmcm9tIG1ldGFkYXRhIHdpdGggbXVsdGktdGhyZWFkaW5nIGFuZCB0d28gbGV2ZWxzIG9mIGxvZ2dpbmc6IGRlYnVnIGFuZCBpbmZvLgoKICAgIEFyZ3M6CiAgICAtIHZhbGlkYXRlZF9jb25maWcgKGRpY3QpOiBUaGUgdmFsaWRhdGVkIGNvbmZpZ3VyYXRpb24gY29udGFpbmluZyB3b3Jrc3BhY2UgYW5kIHN5bmMgZGV0YWlscy4KICAgIC0gc3luY19sb2NhdGlvbl90byAoc3RyKTogU3BlY2lmeSAncHJpbWFyeScgb3IgJ3NlY29uZGFyeScgdG8gY2hvb3NlIHRoZSBzeW5jIGxvY2F0aW9uLgogICAgLSBzeW5jX2ludGVydmFsX2hvdXJzIChpbnQpOiBOdW1iZXIgb2YgaG91cnMgYmVmb3JlIHJlY2hlY2tpbmcgZ3JvdXBzIHdpdGhvdXQgd29ya2Zsb3dzLgogICAgLSBtYXhfd29ya2VycyAoaW50KTogTWF4IHRocmVhZHMgZm9yIHBhcmFsbGVsIHByb2Nlc3NpbmcuCiAgICAtIGxvZ2dpbmdfbGV2ZWwgKHN0cik6IEVpdGhlciAnaW5mbycgZm9yIHN1bW1hcnkgb3IgJ2RlYnVnJyBmb3IgZGV0YWlsZWQgbG9nZ2luZy4KCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKCiAgICBnbG9iYWwgc3VjY2Vzc2Z1bF93b3JrZmxvd3MKICAgIHN1Y2Nlc3NmdWxfd29ya2Zsb3dzID0gW10gICMgUmVzZXQgdGhlIGdsb2JhbCBzdWNjZXNzZnVsIHdvcmtmbG93IGxpc3QKCiAgICAjIFZhbGlkYXRlIHN5bmNfbG9jYXRpb25fdG8KICAgIGlmIHN5bmNfbG9jYXRpb25fdG8gbm90IGluIFsicHJpbWFyeSIsICJzZWNvbmRhcnkiXToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJzeW5jX2xvY2F0aW9uX3RvIG11c3QgYmUgZWl0aGVyICdwcmltYXJ5JyBvciAnc2Vjb25kYXJ5JyIpCgogICAgdHJ5OgogICAgICAgICMgU3RlcCAxOiBTZXQgdXAgYSB0aHJlYWQgcG9vbCBleGVjdXRvciB0byBoYW5kbGUgdGhlIHdvcmtmbG93cyBjb25jdXJyZW50bHkKICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz1tYXhfd29ya2VycykgYXMgZXhlY3V0b3I6CiAgICAgICAgICAgIGZ1dHVyZXMgPSBbXQoKICAgICAgICAgICAgIyBTdGVwIDI6IEl0ZXJhdGUgdGhyb3VnaCB0aGUgd29ya3NwYWNlcyBpbiB0aGUgdmFsaWRhdGVkIGNvbmZpZwogICAgICAgICAgICBmb3Igd29ya3NwYWNlIGluIHZhbGlkYXRlZF9jb25maWdbJ3dvcmtzcGFjZXMnXToKICAgICAgICAgICAgICAgIHdvcmtzcGFjZV9uYW1lID0gd29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddCgogICAgICAgICAgICAgICAgIyBSZXRyaWV2ZSB0aGUgYWN0dWFsIFBBVCB0b2tlbiB1c2luZyB0aGUgc2NvcGUgYW5kIGtleQogICAgICAgICAgICAgICAgc2VjcmV0X3Njb3BlID0gdmFsaWRhdGVkX2NvbmZpZy5nZXQoInNlY3JldF9zY29wZSIpCiAgICAgICAgICAgICAgICBwYXRfa2V5ID0gd29ya3NwYWNlWyd3b3Jrc3BhY2VfcGF0X2tleSddCiAgICAgICAgICAgICAgICBwYXRfdG9rZW4gPSByZXRyaWV2ZV9wYXRfdG9rZW4oc2VjcmV0X3Njb3BlLCBwYXRfa2V5KQogICAgICAgICAgICAgICAgaWYgcGF0X3Rva2VuIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCBmIkVycm9yIHJldHJpZXZpbmcgUEFUIHRva2VuIGZvciB3b3Jrc3BhY2U6IHt3b3Jrc3BhY2VfbmFtZX0sIHNraXBwaW5nIHN5bmMuIikKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICMgQ2hvb3NlIHRoZSBtZXRhZGF0YSB0YWJsZSBwYXRoIGJhc2VkIG9uIHRoZSBzeW5jX2xvY2F0aW9uX3RvCiAgICAgICAgICAgICAgICBzeW5jX2xvY2F0aW9uID0gd29ya3NwYWNlW2Yic3luY19sb2NhdGlvbl97c3luY19sb2NhdGlvbl90b30iXQogICAgICAgICAgICAgICAgbWV0YWRhdGFfdGFibGVfcGF0aCA9IGYie3N5bmNfbG9jYXRpb259L21ldGEvc3luY19tZXRhZGF0YV90YWJsZSIKICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIGYibWV0YWRhdGEgdGFibGUgcGF0aCB7bWV0YWRhdGFfdGFibGVfcGF0aH0iKQogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCBmIlN0YXJ0aW5nIHN5bmMgZm9yIHdvcmtzcGFjZToge3dvcmtzcGFjZV9uYW1lfSB1c2luZyB7c3luY19sb2NhdGlvbl90b30gc3luYyBsb2NhdGlvbi4iKQoKICAgICAgICAgICAgICAgICMgU3RlcCAzOiBMb2FkIHRoZSBtZXRhZGF0YSB0YWJsZSBmcm9tIHRoZSBzZWxlY3RlZCBzeW5jIGxvY2F0aW9uCiAgICAgICAgICAgICAgICBtZXRhZGF0YV9kaWN0ID0gbG9hZF9tZXRhZGF0YV90YWJsZShtZXRhZGF0YV90YWJsZV9wYXRoKQoKICAgICAgICAgICAgICAgICMgU3RlcCA0OiBJdGVyYXRlIHRocm91Z2ggdGhlIG1ldGFkYXRhIGFuZCBzdWJtaXQgZWFjaCB3b3JrZmxvdyBmb3IgY29uY3VycmVudCBwcm9jZXNzaW5nCiAgICAgICAgICAgICAgICBmb3Igd29ya2Zsb3dfZGF0YSBpbiBtZXRhZGF0YV9kaWN0Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgZ3JvdXBfbmFtZSA9IHdvcmtmbG93X2RhdGFbMF1bMV0gICMgRXh0cmFjdCB0aGUgZ3JvdXBfbmFtZSBmcm9tIHRoZSB3b3JrZmxvd19kYXRhCgogICAgICAgICAgICAgICAgICAgICMgRXh0cmFjdCBpbnN0YW5jZV91cmwgZnJvbSB0aGUgdmFsaWRhdGVkIGNvbmZpZwogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX3VybCA9IHdvcmtzcGFjZVsnd29ya3NwYWNlX2luc3RhbmNlX3VybCddCgogICAgICAgICAgICAgICAgICAgICMgU3VibWl0IGVhY2ggd29ya2Zsb3cgZm9yIGNvbmN1cnJlbnQgcHJvY2Vzc2luZwogICAgICAgICAgICAgICAgICAgIGZ1dHVyZSA9IGV4ZWN1dG9yLnN1Ym1pdChwcm9jZXNzX3dvcmtmbG93X3RvX3JlZ2lvbiwgd29ya2Zsb3dfZGF0YSwgaW5zdGFuY2VfdXJsLCBwYXRfdG9rZW4sIHN5bmNfbG9jYXRpb24sIG1ldGFkYXRhX3RhYmxlX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgZnV0dXJlcy5hcHBlbmQoZnV0dXJlKQoKICAgICAgICAgICAgIyBTdGVwIDU6IFdhaXQgZm9yIGFsbCBmdXR1cmVzIHRvIGNvbXBsZXRlCiAgICAgICAgICAgIGZvciBmdXR1cmUgaW4gYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGZ1dHVyZS5yZXN1bHQoKSAgIyBHZXQgdGhlIHJlc3VsdCBmcm9tIHRoZSBmdXR1cmUKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIGYiRXJyb3IgcHJvY2Vzc2luZyB3b3JrZmxvdzoge2V9IikKCiAgICAgICAgIyBTdGVwIDY6IERpc3BsYXkgc3VtbWFyeSBpbiBpbmZvIG1vZGUKICAgICAgICBzdW1tYXJ5X2RmID0gcGQuRGF0YUZyYW1lKHN1Y2Nlc3NmdWxfd29ya2Zsb3dzKQogICAgICAgIHN1bW1hcnlfZGYgPSBzdW1tYXJ5X2RmLmRyb3AoY29sdW1ucz1bJ3ZhbGlkYXRlZCddLCBlcnJvcnM9J2lnbm9yZScpICAjIERyb3BwaW5nICd2YWxpZGF0ZWQnIGlmIGV4aXN0cwogICAgICAgIGxvZ19tZXNzYWdlKCJpbmZvIiwgIlN1bW1hcnkgb2Ygc3VjY2Vzc2Z1bGx5IHN5bmNlZCB3b3JrZmxvd3M6IikKICAgICAgICBsb2dfbWVzc2FnZSgiaW5mbyIsIHN1bW1hcnlfZGYudG9fc3RyaW5nKGluZGV4PUZhbHNlKSkgICMgUHJpbnQgdGhlIGRhdGFmcmFtZSB3aXRob3V0IGluZGV4CiAgICAgICAgbG9nX21lc3NhZ2UoImluZm8iLCAiU3luYyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsIGYiRXJyb3IgZHVyaW5nIHN5bmMgcHJvY2Vzczoge2V9IikK",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/sync_to_region",
            "language": "PYTHON",
            "md5": "ab8b17333fb45155afc30a8a3d2a3cdb",
            "object_id": 125143969838817,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/sync_to_region",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/dr_sync_job/sync_to_region"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_utils",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHB5dHoKaW1wb3J0IGpzb24KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSBweXNwYXJrLnNxbC50eXBlcyBpbXBvcnQgU3RydWN0VHlwZSwgU3RydWN0RmllbGQsIFN0cmluZ1R5cGUsIEFycmF5VHlwZSwgQm9vbGVhblR5cGUsIFRpbWVzdGFtcFR5cGUKZnJvbSBweXNwYXJrLnNxbCBpbXBvcnQgRGF0YUZyYW1lCgoKZGVmIGxvZ19tZXNzYWdlKGxldmVsOiBzdHIsIG1lc3NhZ2U6IHN0cik6CiAgICAiIiIKICAgIExvZ3MgYSBtZXNzYWdlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgbGV2ZWwuCgogICAgQXJnczoKICAgIC0gbGV2ZWwgKHN0cik6IFRoZSBsZXZlbCBvZiB0aGUgbWVzc2FnZSAoJ2RlYnVnJywgJ2luZm8nLCBvciAnZXJyb3InKS4KICAgIC0gbWVzc2FnZSAoc3RyKTogVGhlIG1lc3NhZ2UgdG8gYmUgbG9nZ2VkLgogICAgIiIiCiAgICBnbG9iYWwgTE9HX0xFVkVMCiAgICBsZXZlbHMgPSB7ImRlYnVnIjogMSwgImluZm8iOiAyLCAiZXJyb3IiOiAzfSAgIyBMb2dnaW5nIGxldmVscyBwcmlvcml0eQoKICAgICMgTG9nIHRoZSBtZXNzYWdlIG9ubHkgaWYgdGhlIGxldmVsIGlzIGVxdWFsIHRvIG9yIGhpZ2hlciB0aGFuIHRoZSBjdXJyZW50IGxvZyBsZXZlbAogICAgaWYgbGV2ZWxzLmdldChsZXZlbCwgMCkgPj0gbGV2ZWxzLmdldChMT0dfTEVWRUwsIDApOgogICAgICAgIHByaW50KGYie2xldmVsLnVwcGVyKCl9OiB7bWVzc2FnZX0iKQoKZGVmIGxvYWRfY29uZmlnKGZpbGVfcGF0aDogc3RyKSAtPiBkaWN0OgogICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InKSBhcyBmaWxlOgogICAgICAgIGNvbmZpZyA9IGpzb24ubG9hZChmaWxlKQogICAgcmV0dXJuIGNvbmZpZwoKZGVmIGZpbmRfd29ya3NwYWNlX2NvbmZpZyh3b3Jrc3BhY2VfbmFtZTogc3RyLCB2YWxpZGF0ZWRfY29uZmlnOiBkaWN0KSAtPiBkaWN0OgogICAgIiIiCiAgICBGaW5kcyBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyB3b3Jrc3BhY2UgY29uZmlndXJhdGlvbiBmcm9tIHRoZSB2YWxpZGF0ZWQgY29uZmlnLgoKICAgIEFyZ3M6CiAgICAtIHdvcmtzcGFjZV9uYW1lIChzdHIpOiBUaGUgbmFtZSBvZiB0aGUgd29ya3NwYWNlLgogICAgLSB2YWxpZGF0ZWRfY29uZmlnIChkaWN0KTogVGhlIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIGNvbnRhaW5pbmcgd29ya3NwYWNlIGRldGFpbHMuCgogICAgUmV0dXJuczoKICAgIC0gZGljdDogVGhlIHdvcmtzcGFjZSBjb25maWd1cmF0aW9uIGlmIGZvdW5kLCBvdGhlcndpc2UgTm9uZS4KICAgICIiIgogICAgZm9yIHdvcmtzcGFjZSBpbiB2YWxpZGF0ZWRfY29uZmlnWyd3b3Jrc3BhY2VzJ106CiAgICAgICAgaWYgd29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddID09IHdvcmtzcGFjZV9uYW1lOgogICAgICAgICAgICByZXR1cm4gd29ya3NwYWNlCiAgICByZXR1cm4gTm9uZQogICAgCmRlZiB1cGRhdGVfbWV0YWRhdGFfc3RhdHVzKG1ldGFkYXRhX3RhYmxlX3BhdGg6IHN0ciwgd29ya3NwYWNlX25hbWU6IHN0ciwgZ3JvdXBfbmFtZTogc3RyLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdHIgPSBOb25lLCBzeW5jX3RpbWU6IHN0ciA9IE5vbmUsIHN5bmNfdGltZV90b19yZWdpb246IHN0ciA9IE5vbmUsIHN5bmNfdGltZV9pbl9yZWdpb246IHN0ciA9IE5vbmUpOgogICAgIiIiCiAgICBVcGRhdGVzIHRoZSBtZXRhZGF0YSB0YWJsZSB3aXRoIHRoZSBjdXJyZW50IHN0YXR1cyBhbmQgc3luYyB0aW1lc3RhbXBzIGZvciB0aGUgcmVnaW9ucy4KCiAgICBBcmdzOgogICAgLSBtZXRhZGF0YV90YWJsZV9wYXRoIChzdHIpOiBQYXRoIHRvIHRoZSBtZXRhZGF0YSBEZWx0YSB0YWJsZS4KICAgIC0gd29ya3NwYWNlX25hbWUgKHN0cik6IFRoZSB3b3Jrc3BhY2UgbmFtZSBvZiB0aGUgZ3JvdXAuCiAgICAtIGdyb3VwX25hbWUgKHN0cik6IFRoZSBncm91cCBuYW1lLgogICAgLSBzdGF0dXMgKHN0ciwgb3B0aW9uYWwpOiBUaGUgc3luYyBzdGF0dXMgKCdJbiBQcm9ncmVzcycgb3IgJ1N1Y2Nlc3MnKS4KICAgIC0gc3luY190aW1lIChzdHIsIG9wdGlvbmFsKTogVGhlIGxhc3Qgc3luYyB0aW1lLgogICAgLSBzeW5jX3RpbWVfdG9fcmVnaW9uIChzdHIsIG9wdGlvbmFsKTogVGhlIHN5bmMgdGltZXN0YW1wIGZvciB0aGUgInRvIiByZWdpb24uCiAgICAtIHN5bmNfdGltZV9pbl9yZWdpb24gKHN0ciwgb3B0aW9uYWwpOiBUaGUgc3luYyB0aW1lc3RhbXAgZm9yIHRoZSAiaW4iIHJlZ2lvbi4KCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIFN0YXJ0IGNvbnN0cnVjdGluZyB0aGUgU1FMIHF1ZXJ5CiAgICAgICAgdXBkYXRlX3F1ZXJ5ID0gZiJVUERBVEUgZGVsdGEuYHttZXRhZGF0YV90YWJsZV9wYXRofWAgU0VUICIKICAgICAgICAKICAgICAgICAjIExpc3QgdG8gaG9sZCBjb2x1bW4gdXBkYXRlIGV4cHJlc3Npb25zCiAgICAgICAgdXBkYXRlX2NvbHVtbnMgPSBbXQogICAgICAgIAogICAgICAgICMgQWRkIG5vbi1Ob25lIHZhbHVlcyB0byB0aGUgdXBkYXRlIHF1ZXJ5CiAgICAgICAgaWYgc3RhdHVzIGlzIG5vdCBOb25lOgogICAgICAgICAgICB1cGRhdGVfY29sdW1ucy5hcHBlbmQoZiJzeW5jX3N0YXR1cyA9ICd7c3RhdHVzfSciKQogICAgICAgIGlmIHN5bmNfdGltZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lID0gJ3tzeW5jX3RpbWV9JyIpCiAgICAgICAgaWYgc3luY190aW1lX3RvX3JlZ2lvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXBkYXRlX2NvbHVtbnMuYXBwZW5kKGYic3luY190aW1lX3RvX3JlZ2lvbiA9ICd7c3luY190aW1lX3RvX3JlZ2lvbn0nIikKICAgICAgICBpZiBzeW5jX3RpbWVfaW5fcmVnaW9uIGlzIG5vdCBOb25lOgogICAgICAgICAgICB1cGRhdGVfY29sdW1ucy5hcHBlbmQoZiJzeW5jX3RpbWVfaW5fcmVnaW9uID0gJ3tzeW5jX3RpbWVfaW5fcmVnaW9ufSciKQogICAgICAgIAogICAgICAgICMgSm9pbiBhbGwgdXBkYXRlIGNvbHVtbnMgdG8gZm9ybSB0aGUgU0VUIHBhcnQgb2YgdGhlIFNRTCBxdWVyeQogICAgICAgIHVwZGF0ZV9xdWVyeSArPSAiLCAiLmpvaW4odXBkYXRlX2NvbHVtbnMpCiAgICAgICAgCiAgICAgICAgIyBBZGQgV0hFUkUgY2xhdXNlIHRvIGZpbHRlciBieSB3b3Jrc3BhY2VfbmFtZSBhbmQgZ3JvdXBfbmFtZQogICAgICAgIHVwZGF0ZV9xdWVyeSArPSBmIiBXSEVSRSB3b3Jrc3BhY2VfbmFtZSA9ICd7d29ya3NwYWNlX25hbWV9JyBBTkQgZ3JvdXBfbmFtZSA9ICd7Z3JvdXBfbmFtZX0nIgogICAgICAgIAogICAgICAgICMgRXhlY3V0ZSB0aGUgdXBkYXRlIHF1ZXJ5CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJFeGVjdXRpbmcgU1FMIHVwZGF0ZToge3VwZGF0ZV9xdWVyeX0iKQogICAgICAgIHNwYXJrLnNxbCh1cGRhdGVfcXVlcnkpCiAgICAgICAgCiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIiwgZiJNZXRhZGF0YSB1cGRhdGVkIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfSB3aXRoIHRoZSBmb2xsb3dpbmc6IHt1cGRhdGVfY29sdW1uc30iKQogICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIiwgZiJGYWlsZWQgdG8gdXBkYXRlIG1ldGFkYXRhIGZvciB7d29ya3NwYWNlX25hbWV9L3tncm91cF9uYW1lfToge2V9IikKCmRlZiBjaGVja19mc19wYXRoKHBhdGg6IHN0cikgLT4gYm9vbDoKICAgICIiIgogICAgQ2hlY2sgaWYgdGhlIHByb2dyYW0gaGFzIGFjY2VzcyB0byBjcmVhdGUgYW5kIGRlbGV0ZSBhIGZpbGUgYXQgdGhlIGdpdmVuIHN0b3JhZ2UgcGF0aC4KCiAgICBBcmdzOgogICAgLSBwYXRoIChzdHIpOiBUaGUgc3RvcmFnZSBwYXRoIHRvIGNoZWNrLgoKICAgIFJldHVybnM6CiAgICAtIGJvb2w6IFRydWUgaWYgdGhlIHByb2dyYW0gaGFzIHdyaXRlIGFjY2VzcywgRmFsc2Ugb3RoZXJ3aXNlLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBHZW5lcmF0ZSBhIHRlbXBvcmFyeSBmaWxlIG5hbWUKICAgICAgICB0ZW1wX2ZpbGVfcGF0aCA9IGYie3BhdGh9L3RlbXBfYWNjZXNzX2NoZWNrLnR4dCIKCiAgICAgICAgIyBXcml0ZSBhIHRlbXBvcmFyeSBmaWxlIHRvIHRoZSBzdG9yYWdlIHBhdGgKICAgICAgICBkYnV0aWxzLmZzLnB1dCh0ZW1wX2ZpbGVfcGF0aCwgInRlc3QiLCBvdmVyd3JpdGU9VHJ1ZSkKCiAgICAgICAgIyBDb25maXJtIHRoZSBmaWxlIHdhcyB3cml0dGVuIGJ5IGNoZWNraW5nIGl0cyBleGlzdGVuY2UKICAgICAgICBpZiBkYnV0aWxzLmZzLmxzKHBhdGgpOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiQWNjZXNzIGNoZWNrIHN1Y2Nlc3NmdWwgYXQgcGF0aDoge3BhdGh9IikKCiAgICAgICAgICAgICMgQ2xlYW4gdXAgYnkgZGVsZXRpbmcgdGhlIHRlbXBvcmFyeSBmaWxlCiAgICAgICAgICAgIGRidXRpbHMuZnMucm0odGVtcF9maWxlX3BhdGgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkNvdWxkIG5vdCBjb25maXJtIHRoZSBjcmVhdGlvbiBvZiB0aGUgZmlsZSBhdCBwYXRoOiB7cGF0aH0iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiQWNjZXNzIGNoZWNrIGZhaWxlZCBhdCBwYXRoOiB7cGF0aH0uIEVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIGxvYWRfbWV0YWRhdGFfdGFibGUocGF0aDogc3RyKSAtPiBkaWN0OgogICAgIiIiCiAgICBMb2FkIHRoZSBtZXRhZGF0YSB0YWJsZSBmcm9tIHRoZSBnaXZlbiBwYXRoIGFuZCBjb252ZXJ0IGl0IGludG8gYSBkaWN0aW9uYXJ5LgoKICAgIEFyZ3M6CiAgICAtIHBhdGggKHN0cik6IFRoZSBwYXRoIHdoZXJlIHRoZSBtZXRhZGF0YSB0YWJsZSBpcyBzdG9yZWQuCgogICAgUmV0dXJuczoKICAgIC0gZGljdDogVGhlIG1ldGFkYXRhIHRhYmxlIGFzIGEgZGljdGlvbmFyeSwgc3RydWN0dXJlZCBhczoKICAgICAgewogICAgICAgICh3b3Jrc3BhY2VfbmFtZSwgZ3JvdXBfbmFtZSk6IHsKICAgICAgICAgICAgIndvcmtmbG93X25hbWUiOiA8d29ya2Zsb3dfbmFtZT4sCiAgICAgICAgICAgICJ3b3JrZmxvd19pZCI6IDx3b3JrZmxvd19pZD4sCiAgICAgICAgICAgICJ0YWJsZXMiOiBbPHRhYmxlMT4sIDx0YWJsZTI+LCAuLi5dLAogICAgICAgICAgICAidmFsaWRhdGVkIjogPHZhbGlkYXRlZF9zdGF0dXM+LAogICAgICAgICAgICAibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lIjogPGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZT4sCiAgICAgICAgICAgICJzeW5jX3N0YXR1cyI6IDxzeW5jX3N0YXR1cz4sCiAgICAgICAgICAgICJzeW5jX3RpbWVfdG9fcmVnaW9uIjogPHN5bmNfdGltZV90b19yZWdpb24+LAogICAgICAgICAgICAic3luY190aW1lX2luX3JlZ2lvbiI6IDxzeW5jX3RpbWVfaW5fcmVnaW9uPgogICAgICAgIH0KICAgICAgfQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBMb2FkIHRoZSBEZWx0YSB0YWJsZSBpbnRvIGEgRGF0YUZyYW1lCiAgICAgICAgZGYgPSBzcGFyay5yZWFkLmZvcm1hdCgiZGVsdGEiKS5sb2FkKHBhdGgpCgogICAgICAgICMgSW5pdGlhbGl6ZSBhbiBlbXB0eSBkaWN0aW9uYXJ5IHRvIGhvbGQgdGhlIG1ldGFkYXRhCiAgICAgICAgbWV0YWRhdGFfZGljdCA9IHt9CgogICAgICAgICMgSXRlcmF0ZSBvdmVyIHRoZSBEYXRhRnJhbWUgcm93cyBhbmQgcG9wdWxhdGUgdGhlIGRpY3Rpb25hcnkKICAgICAgICBmb3Igcm93IGluIGRmLmNvbGxlY3QoKToKICAgICAgICAgICAgd29ya3NwYWNlX25hbWUgPSByb3dbJ3dvcmtzcGFjZV9uYW1lJ10KICAgICAgICAgICAgZ3JvdXBfbmFtZSA9IHJvd1snZ3JvdXBfbmFtZSddCiAgICAgICAgICAgIHdvcmtmbG93X25hbWUgPSByb3dbJ3dvcmtmbG93X25hbWUnXQogICAgICAgICAgICB3b3JrZmxvd19pZCA9IHJvd1snd29ya2Zsb3dfaWQnXQogICAgICAgICAgICB0YWJsZXMgPSByb3dbJ3RhYmxlcyddCiAgICAgICAgICAgIHZhbGlkYXRlZCA9IHJvd1sndmFsaWRhdGVkJ10KICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lID0gcm93WydsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUnXQogICAgICAgICAgICBzeW5jX3N0YXR1cyA9IHJvd1snc3luY19zdGF0dXMnXQogICAgICAgICAgICBzeW5jX3RpbWVfdG9fcmVnaW9uID0gcm93KCdzeW5jX3RpbWVfdG9fcmVnaW9uJywgTm9uZSkgIAogICAgICAgICAgICBzeW5jX3RpbWVfaW5fcmVnaW9uID0gcm93KCdzeW5jX3RpbWVfaW5fcmVnaW9uJywgTm9uZSkgCgogICAgICAgICAgICAjIEFkZCB0aGUgbWV0YWRhdGEgdG8gdGhlIGRpY3Rpb25hcnkKICAgICAgICAgICAgbWV0YWRhdGFfZGljdFsod29ya3NwYWNlX25hbWUsIGdyb3VwX25hbWUpXSA9IHsKICAgICAgICAgICAgICAgICJ3b3JrZmxvd19uYW1lIjogd29ya2Zsb3dfbmFtZSwKICAgICAgICAgICAgICAgICJ3b3JrZmxvd19pZCI6IHdvcmtmbG93X2lkLAogICAgICAgICAgICAgICAgInRhYmxlcyI6IHRhYmxlcywKICAgICAgICAgICAgICAgICJ2YWxpZGF0ZWQiOiB2YWxpZGF0ZWQsCiAgICAgICAgICAgICAgICAibGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lIjogbGFzdF9zdWNjZXNzZnVsX3J1bl90aW1lLAogICAgICAgICAgICAgICAgInN5bmNfc3RhdHVzIjogc3luY19zdGF0dXMsCiAgICAgICAgICAgICAgICAic3luY190aW1lX3RvX3JlZ2lvbiI6IHN5bmNfdGltZV90b19yZWdpb24sCiAgICAgICAgICAgICAgICAic3luY190aW1lX2luX3JlZ2lvbiI6IHN5bmNfdGltZV9pbl9yZWdpb24KICAgICAgICAgICAgfQoKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiTWV0YWRhdGEgdGFibGUgbG9hZGVkIHN1Y2Nlc3NmdWxseSBmcm9tOiB7cGF0aH0iKQogICAgICAgIHJldHVybiBtZXRhZGF0YV9kaWN0CgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvciBsb2FkaW5nIG1ldGFkYXRhIHRhYmxlIGZyb20gcGF0aDoge3BhdGh9LiBFcnJvcjoge2V9IikKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiQ3JlYXRpbmcgYSBuZXcgbWV0YWRhdGEgdGFibGUgYXQgcGF0aDoge3BhdGh9IikKICAgICAgICBpZiBub3QgZGJ1dGlscy5mcy5scyhwYXRoKToKICAgICAgICAgICAgY3JlYXRlX2VtcHR5X21ldGFkYXRhX3RhYmxlKHBhdGgpCiAgICAgICAgcmV0dXJuIHt9CgpkZWYgY3JlYXRlX2VtcHR5X21ldGFkYXRhX3RhYmxlKHBhdGg6IHN0cik6CiAgICAiIiIKICAgIENyZWF0ZXMgYW4gZW1wdHkgbWV0YWRhdGEgRGVsdGEgdGFibGUgYXQgdGhlIHNwZWNpZmllZCBwYXRoLgoKICAgIEFyZ3M6CiAgICAtIHBhdGggKHN0cik6IFRoZSBwYXRoIHdoZXJlIHRoZSBEZWx0YSB0YWJsZSB3aWxsIGJlIGNyZWF0ZWQuCiAgICAiIiIKICAgICMgRGVmaW5lIHRoZSBzY2hlbWEgb2YgdGhlIG1ldGFkYXRhIHRhYmxlLCBpbmNsdWRpbmcgbmV3IGNvbHVtbnMKICAgIHNjaGVtYSA9IFN0cnVjdFR5cGUoWwogICAgICAgIFN0cnVjdEZpZWxkKCJ3b3Jrc3BhY2VfbmFtZSIsIFN0cmluZ1R5cGUoKSwgRmFsc2UpLAogICAgICAgIFN0cnVjdEZpZWxkKCJncm91cF9uYW1lIiwgU3RyaW5nVHlwZSgpLCBGYWxzZSksCiAgICAgICAgU3RydWN0RmllbGQoIndvcmtmbG93X25hbWUiLCBTdHJpbmdUeXBlKCksIEZhbHNlKSwKICAgICAgICBTdHJ1Y3RGaWVsZCgid29ya2Zsb3dfaWQiLCBTdHJpbmdUeXBlKCksIEZhbHNlKSwKICAgICAgICBTdHJ1Y3RGaWVsZCgidGFibGVzIiwgQXJyYXlUeXBlKFN0cmluZ1R5cGUoKSksIEZhbHNlKSwKICAgICAgICBTdHJ1Y3RGaWVsZCgidmFsaWRhdGVkIiwgQm9vbGVhblR5cGUoKSwgRmFsc2UpLAogICAgICAgIFN0cnVjdEZpZWxkKCJsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUiLCBUaW1lc3RhbXBUeXBlKCksIFRydWUpLAogICAgICAgIFN0cnVjdEZpZWxkKCJzeW5jX3N0YXR1cyIsIFN0cmluZ1R5cGUoKSwgVHJ1ZSksCiAgICAgICAgU3RydWN0RmllbGQoInN5bmNfdGltZV90b19yZWdpb24iLCBUaW1lc3RhbXBUeXBlKCksIFRydWUpLCAKICAgICAgICBTdHJ1Y3RGaWVsZCgic3luY190aW1lX2luX3JlZ2lvbiIsIFRpbWVzdGFtcFR5cGUoKSwgVHJ1ZSkKICAgIF0pCgogICAgIyBDcmVhdGUgYW4gZW1wdHkgRGF0YUZyYW1lIHdpdGggdGhlIGRlZmluZWQgc2NoZW1hCiAgICBlbXB0eV9kZiA9IHNwYXJrLmNyZWF0ZURhdGFGcmFtZShbXSwgc2NoZW1hKQoKICAgICMgV3JpdGUgdGhlIGVtcHR5IERhdGFGcmFtZSBhcyBhIERlbHRhIHRhYmxlCiAgICBlbXB0eV9kZi53cml0ZS5mb3JtYXQoImRlbHRhIikubW9kZSgib3ZlcndyaXRlIikuc2F2ZShwYXRoKQogICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVtcHR5IG1ldGFkYXRhIHRhYmxlIGNyZWF0ZWQgYXQ6IHtwYXRofSIpCgpkZWYgZ2V0X2RhdGFicmlja3Nfam9ic19pbmZvKGluc3RhbmNlX3VybDogc3RyLCBwYXRfc2NvcGU6IHN0ciwgcGF0X3Rva2VuOiBzdHIsIHdvcmtmbG93X25hbWVzOiBsaXN0KSAtPiBkaWN0OgogICAgIiIiCiAgICBSZXRyaWV2ZXMgam9iIGluZm9ybWF0aW9uIGZyb20gRGF0YWJyaWNrcyBSRVNUIEFQSSBmb3IgYSBsaXN0IG9mIHdvcmtmbG93cyB1c2luZyBBUEkgdmVyc2lvbiAyLjEgd2l0aCBwYWdpbmF0aW9uLgoKICAgIEFyZ3M6CiAgICAtIGluc3RhbmNlX3VybCAoc3RyKTogVGhlIFVSTCBvZiB0aGUgRGF0YWJyaWNrcyBpbnN0YW5jZS4KICAgIC0gcGF0X3Rva2VuIChzdHIpOiBUaGUgUEFUIHRva2VuIGZvciBhdXRoZW50aWNhdGlvbi4KICAgIC0gd29ya2Zsb3dfbmFtZXMgKGxpc3QpOiBBIGxpc3Qgb2Ygd29ya2Zsb3cvam9iIG5hbWVzIHRvIHJldHJpZXZlIGluZm9ybWF0aW9uIGZvci4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBBIGRpY3Rpb25hcnkgd2l0aCB3b3JrZmxvdyBuYW1lcyBhcyBrZXlzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIGpvYiBJRHMgYXMgdmFsdWVzLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgcGF0ID0gcmV0cmlldmVfcGF0X3Rva2VuKHBhdF9zY29wZSwgcGF0X3Rva2VuKQogICAgICAgICMgQ29uc3RydWN0IHRoZSBBUEkgZW5kcG9pbnQgVVJMIGZvciBKb2JzIEFQSSAyLjEKICAgICAgICBlbmRwb2ludCA9IGYie2luc3RhbmNlX3VybH0vYXBpLzIuMS9qb2JzL2xpc3QiCgogICAgICAgICMgU2V0IHVwIHRoZSBoZWFkZXJzIGZvciB0aGUgQVBJIHJlcXVlc3QKICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtwYXR9IgogICAgICAgIH0KCiAgICAgICAgIyBJbml0aWFsaXplIHZhcmlhYmxlcyBmb3IgcGFnaW5hdGlvbgogICAgICAgIGpvYnNfaW5mbyA9IHt9CiAgICAgICAgaGFzX21vcmUgPSBUcnVlCiAgICAgICAgb2Zmc2V0ID0gMAoKICAgICAgICAjIFBhZ2luYXRlIHRocm91Z2ggYWxsIGpvYnMKICAgICAgICB3aGlsZSBoYXNfbW9yZSBhbmQgbGVuKGpvYnNfaW5mbykgPCBsZW4od29ya2Zsb3dfbmFtZXMpOgogICAgICAgICAgICAjIEluY2x1ZGUgdGhlIG9mZnNldCBwYXJhbWV0ZXIgdG8gaGFuZGxlIHBhZ2luYXRpb24KICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgImxpbWl0IjogMjUsICAjIEFkanVzdCBsaW1pdCB0byBtYXRjaCBBUEkgcmVxdWlyZW1lbnRzCiAgICAgICAgICAgICAgICAib2Zmc2V0Ijogb2Zmc2V0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoZW5kcG9pbnQsIGhlYWRlcnM9aGVhZGVycywgcGFyYW1zPXBhcmFtcykKICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCgogICAgICAgICAgICAjIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICBqb2JzID0gcmVzdWx0LmdldCgiam9icyIsIFtdKQoKICAgICAgICAgICAgIyBTZWFyY2ggZm9yIHRoZSBqb2JzIGJ5IG5hbWUgYW5kIGNvbGxlY3QgaW5mb3JtYXRpb24KICAgICAgICAgICAgZm9yIGpvYiBpbiBqb2JzOgogICAgICAgICAgICAgICAgam9iX25hbWUgPSBqb2IuZ2V0KCJzZXR0aW5ncyIsIHt9KS5nZXQoIm5hbWUiKQogICAgICAgICAgICAgICAgaWYgam9iX25hbWUgaW4gd29ya2Zsb3dfbmFtZXMgYW5kIGpvYl9uYW1lIG5vdCBpbiBqb2JzX2luZm86CiAgICAgICAgICAgICAgICAgICAgam9ic19pbmZvW2pvYl9uYW1lXSA9IGpvYi5nZXQoImpvYl9pZCIpCiAgICAgICAgICAgICAgICAgICAgIyBJZiB3ZSd2ZSBmb3VuZCBhbGwgcmVxdWVzdGVkIGpvYnMsIHJldHVybiBlYXJseQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihqb2JzX2luZm8pID09IGxlbih3b3JrZmxvd19uYW1lcyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqb2JzX2luZm8KCiAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhlcmUgYXJlIG1vcmUgam9icyB0byByZXRyaWV2ZQogICAgICAgICAgICBoYXNfbW9yZSA9IGxlbihqb2JzKSA9PSAyNSAgIyBBZGp1c3QgdG8gdGhlIGxpbWl0IHVzZWQKICAgICAgICAgICAgb2Zmc2V0ICs9IDI1ICAjIEluY3JlbWVudCB0aGUgb2Zmc2V0IGZvciB0aGUgbmV4dCBwYWdlCgogICAgICAgICMgUmV0dXJuIHRoZSBjb2xsZWN0ZWQgam9iIGluZm9ybWF0aW9uCiAgICAgICAgcmV0dXJuIGpvYnNfaW5mbwoKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiRXJyb3IgZmV0Y2hpbmcgam9iIGluZm8gZm9yIHdvcmtmbG93cyAne3dvcmtmbG93X25hbWVzfSc6IHtlfSIpCiAgICAgICAgcmV0dXJuIHt9CgpkZWYgam9iX3N1Y2Nlc3NmdWxfcnVuX2FmdGVyX2xhc3RfcnVuKGluc3RhbmNlX3VybDogc3RyLCBwYXRfdG9rZW46IHN0ciwgam9iX2lkczogbGlzdCwgbGFzdF9ydW5fdGltZXN0YW1wX3N0cjogc3RyID0gTm9uZSkgLT4gZGljdDoKICAgICIiIgogICAgQ2hlY2tzIGlmIGFueSBvZiB0aGUgZ2l2ZW4gRGF0YWJyaWNrcyBqb2JzIGhhdmUgaGFkIHN1Y2Nlc3NmdWwgcnVucyBhZnRlciB0aGUgbGFzdCByZWNvcmRlZCBydW4gdGltZXN0YW1wLgoKICAgIEFyZ3M6CiAgICAtIGluc3RhbmNlX3VybCAoc3RyKTogVGhlIFVSTCBvZiB0aGUgRGF0YWJyaWNrcyBpbnN0YW5jZS4KICAgIC0gcGF0X3Rva2VuIChzdHIpOiBUaGUgUEFUIHRva2VuIGZvciBhdXRoZW50aWNhdGlvbi4KICAgIC0gam9iX2lkcyAobGlzdCk6IEEgbGlzdCBvZiBqb2IgSURzIHRvIGNoZWNrLgogICAgLSBsYXN0X3J1bl90aW1lc3RhbXBfc3RyIChzdHIsIG9wdGlvbmFsKTogVGhlIHRpbWVzdGFtcCBvZiB0aGUgbGFzdCByZWNvcmRlZCBydW4gaW4gVVRDIGZvcm1hdCAieXl5eS1tbS1kZCBoaDptbTpzcyIuCiAgICAgIElmIE5vbmUsIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgcnVuIHdpdGhvdXQgY29tcGFyaXNvbi4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBBIGRpY3Rpb25hcnkgd2hlcmUgdGhlIGtleXMgYXJlIGpvYiBJRHMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBsYXN0IHN1Y2Nlc3NmdWwgcnVuIGVuZCB0aW1lc3RhbXBzLgogICAgICAgICAgICBJZiBubyBzdWNjZXNzZnVsIHJ1biBpcyBmb3VuZCBhZnRlciB0aGUgZ2l2ZW4gdGltZXN0YW1wLCB0aGUgdmFsdWUgd2lsbCBiZSBOb25lLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgaWYgbGFzdF9ydW5fdGltZXN0YW1wX3N0ciBpcyBub3QgTm9uZToKICAgICAgICAgICAgIyBDb252ZXJ0IHRoZSBpbnB1dCB0aW1lc3RhbXAgc3RyaW5nIHRvIGEgZGF0ZXRpbWUgb2JqZWN0IGluIFVUQwogICAgICAgICAgICBsYXN0X3J1bl90aW1lc3RhbXAgPSBkYXRldGltZS5zdHJwdGltZShsYXN0X3J1bl90aW1lc3RhbXBfc3RyLCAiJVktJW0tJWQgJUg6JU06JVMiKS5yZXBsYWNlKHR6aW5mbz1weXR6LlVUQykKICAgICAgICBlbHNlOgogICAgICAgICAgICBsYXN0X3J1bl90aW1lc3RhbXAgPSBOb25lCgogICAgICAgICMgU2V0IHVwIHRoZSBoZWFkZXJzIGZvciB0aGUgQVBJIHJlcXVlc3QKICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtwYXRfdG9rZW59IgogICAgICAgIH0KCiAgICAgICAgc3VjY2Vzc2Z1bF9ydW5zID0ge30KCiAgICAgICAgIyBJdGVyYXRlIG92ZXIgZWFjaCBqb2JfaWQKICAgICAgICBmb3Igam9iX2lkIGluIGpvYl9pZHM6CiAgICAgICAgICAgICMgQ29uc3RydWN0IHRoZSBBUEkgZW5kcG9pbnQgVVJMIGZvciBsaXN0aW5nIHJ1bnMgb2YgdGhlIHNwZWNpZmljIGpvYgogICAgICAgICAgICBlbmRwb2ludCA9IGYie2luc3RhbmNlX3VybH0vYXBpLzIuMS9qb2JzL3J1bnMvbGlzdCIKCiAgICAgICAgICAgICMgRGVmaW5lIHRoZSBwYXJhbWV0ZXJzIGZvciBmaWx0ZXJpbmcgam9iIHJ1bnMKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgImpvYl9pZCI6IGpvYl9pZCwKICAgICAgICAgICAgICAgICJjb21wbGV0ZWRfb25seSI6ICJ0cnVlIiwKICAgICAgICAgICAgICAgICJsaW1pdCI6IDI1ICAjIExpbWl0IHRoZSBudW1iZXIgb2YgcnVucyB0byByZXRyaWV2ZSAoYWRqdXN0IGFzIG5lZWRlZCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBNYWtlIHRoZSByZXF1ZXN0IHRvIHRoZSBEYXRhYnJpY2tzIEpvYnMgQVBJIHRvIGxpc3Qgam9iIHJ1bnMKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoZW5kcG9pbnQsIGhlYWRlcnM9aGVhZGVycywgcGFyYW1zPXBhcmFtcykKICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpICAjIFJhaXNlIGFuIGV4Y2VwdGlvbiBmb3IgSFRUUCBlcnJvcnMKCiAgICAgICAgICAgICMgUGFyc2UgdGhlIEpTT04gcmVzcG9uc2UKICAgICAgICAgICAgcnVucyA9IHJlc3BvbnNlLmpzb24oKS5nZXQoInJ1bnMiLCBbXSkKCiAgICAgICAgICAgICMgVmFyaWFibGUgdG8gc3RvcmUgdGhlIGxhc3Qgc3VjY2Vzc2Z1bCBydW4gZW5kIHRpbWUKICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3J1bl9lbmRfdGltZSA9IE5vbmUKCiAgICAgICAgICAgICMgSXRlcmF0ZSBvdmVyIHRoZSBydW5zIGFuZCBjaGVjayBpZiB0aGVyZSBpcyBhIHN1Y2Nlc3NmdWwgcnVuIGFmdGVyIHRoZSBsYXN0IHJ1bgogICAgICAgICAgICBmb3IgcnVuIGluIHJ1bnM6CiAgICAgICAgICAgICAgICBydW5fZW5kX3RpbWUgPSBydW4uZ2V0KCJlbmRfdGltZSIsIDApIC8gMTAwMCAgIyBDb252ZXJ0IGZyb20gbWlsbGlzZWNvbmRzIHRvIHNlY29uZHMKICAgICAgICAgICAgICAgIHJ1bl9lbmRfZGF0ZXRpbWUgPSBkYXRldGltZS5mcm9tdGltZXN0YW1wKHJ1bl9lbmRfdGltZSwgdHo9cHl0ei5VVEMpCiAgICAgICAgICAgICAgICBydW5fcmVzdWx0X3N0YXRlID0gcnVuLmdldCgic3RhdGUiLCB7fSkuZ2V0KCJyZXN1bHRfc3RhdGUiKQoKICAgICAgICAgICAgICAgIHJ1bl9lbmRfZGF0ZXRpbWUgPSBydW5fZW5kX2RhdGV0aW1lLnJlcGxhY2UobWljcm9zZWNvbmQ9MCkKCiAgICAgICAgICAgICAgICBpZiBsYXN0X3J1bl90aW1lc3RhbXAgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAjIElmIG5vIGxhc3QgcnVuIHRpbWVzdGFtcCBpcyBwcm92aWRlZCwgcmV0dXJuIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCBydW4KICAgICAgICAgICAgICAgICAgICBpZiBydW5fcmVzdWx0X3N0YXRlID09ICJTVUNDRVNTIjoKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9zdWNjZXNzZnVsX3J1bl9lbmRfdGltZSA9IHJ1bl9lbmRfZGF0ZXRpbWUuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsaWYgcnVuX2VuZF9kYXRldGltZSA+IGxhc3RfcnVuX3RpbWVzdGFtcCBhbmQgcnVuX3Jlc3VsdF9zdGF0ZSA9PSAiU1VDQ0VTUyI6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmInJ1bl9lbmRfZGF0ZXRpbWUgaXMge3J1bl9lbmRfZGF0ZXRpbWV9IGFuZCBsYXN0X3J1bl90aW1lc3RhbXAgaXMge2xhc3RfcnVuX3RpbWVzdGFtcH0iKQogICAgICAgICAgICAgICAgICAgIGxhc3Rfc3VjY2Vzc2Z1bF9ydW5fZW5kX3RpbWUgPSBydW5fZW5kX2RhdGV0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsgICMgRXhpdCB0aGUgbG9vcCBlYXJseSBhcyB3ZSBmb3VuZCBhIHN1Y2Nlc3NmdWwgcnVuCgogICAgICAgICAgICAjIEFkZCB0aGUgcmVzdWx0IHRvIHRoZSBkaWN0aW9uYXJ5CiAgICAgICAgICAgIHN1Y2Nlc3NmdWxfcnVuc1tqb2JfaWRdID0gbGFzdF9zdWNjZXNzZnVsX3J1bl9lbmRfdGltZQoKICAgICAgICByZXR1cm4gc3VjY2Vzc2Z1bF9ydW5zCgogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsZiJFcnJvciBjaGVja2luZyBqb2IgcnVuczoge2V9IikKICAgICAgICByZXR1cm4ge30KCmRlZiByZXRyaWV2ZV9wYXRfdG9rZW4oc2VjcmV0X3Njb3BlOiBzdHIsIHBhdF9rZXk6IHN0cikgLT4gc3RyOgogICAgIiIiCiAgICBSZXRyaWV2ZXMgdGhlIFBlcnNvbmFsIEFjY2VzcyBUb2tlbiAoUEFUKSBmb3IgYSBzcGVjaWZpYyB3b3Jrc3BhY2UgZnJvbSB0aGUgRGF0YWJyaWNrcyBzZWNyZXQgc3RvcmUuCgogICAgQXJnczoKICAgIC0gc2VjcmV0X3Njb3BlIChzdHIpOiBUaGUgc2NvcGUgd2l0aGluIHRoZSBzZWNyZXQgc3RvcmUgd2hlcmUgdGhlIFBBVCBpcyBzdG9yZWQuCiAgICAtIHBhdF9rZXkgKHN0cik6IFRoZSBrZXkgaWRlbnRpZnlpbmcgdGhlIFBBVCB3aXRoaW4gdGhlIHNlY3JldCBzY29wZS4KCiAgICBSZXR1cm5zOgogICAgLSBzdHI6IFRoZSByZXRyaWV2ZWQgUEFUIHRva2VuLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBVc2UgRGF0YWJyaWNrcyB1dGlsaXRpZXMgdG8gZmV0Y2ggdGhlIFBBVCB0b2tlbgogICAgICAgIHBhdF90b2tlbiA9IGRidXRpbHMuc2VjcmV0cy5nZXQoImRyLXRlc3Qtc2NvcGUiLCBrZXk9cGF0X2tleSkKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBQQVQgdG9rZW4gZm9yIHNlY3JldCBzY29wZToge3NlY3JldF9zY29wZX0sIGtleToge3BhdF9rZXl9IikKICAgICAgICByZXR1cm4gcGF0X3Rva2VuCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nX21lc3NhZ2UoImVycm9yIixmIkVycm9yIHJldHJpZXZpbmcgUEFUIHRva2VuIGZyb20gc2VjcmV0IHNjb3BlOiB7c2VjcmV0X3Njb3BlfSwga2V5OiB7cGF0X2tleX0uIEVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBOb25lCiAgICAKZGVmIGNoZWNrX3RhYmxlKHRhYmxlOiBzdHIpIC0+IGJvb2w6CiAgICAiIiIKICAgIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIHJlYWQgcGVybWlzc2lvbiBvbiBhIHRhYmxlIGJ5IGNoZWNraW5nIGlmIHRoZSB0YWJsZSBleGlzdHMgYW5kIGNhbiBiZSBkZXNjcmliZWQuCgogICAgQXJnczoKICAgIC0gdGFibGUgKHN0cik6IFRoZSBmdWxseSBxdWFsaWZpZWQgbmFtZSBvZiB0aGUgdGFibGUgKGNhdGFsb2cuc2NoZW1hLnRhYmxlX25hbWUpLgoKICAgIFJldHVybnM6CiAgICAtIGJvb2w6IFRydWUgaWYgdGhlIHVzZXIgaGFzIHJlYWQgcGVybWlzc2lvbiwgRmFsc2Ugb3RoZXJ3aXNlLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBpZiB0aGUgdGFibGUgZXhpc3RzIHVzaW5nIFNwYXJrIGNhdGFsb2cKICAgICAgICBpZiBzcGFyay5jYXRhbG9nLnRhYmxlRXhpc3RzKHRhYmxlKToKICAgICAgICAgICAgIyBUcnkgdG8gZGVzY3JpYmUgdGhlIHRhYmxlJ3MgbWV0YWRhdGEgdG8gZW5zdXJlIHJlYWQgYWNjZXNzCiAgICAgICAgICAgIHNwYXJrLmNhdGFsb2cubGlzdENvbHVtbnModGFibGUpCiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJSZWFkIHBlcm1pc3Npb24gY29uZmlybWVkIGZvciB0YWJsZSB7dGFibGV9LiIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIlRhYmxlICd7dGFibGV9JyBkb2VzIG5vdCBleGlzdC4iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dfbWVzc2FnZSgiZXJyb3IiLGYiRXJyb3IgY2hlY2tpbmcgcmVhZCBwZXJtaXNzaW9uIGZvciB0YWJsZSAne3RhYmxlfSc6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKZGVmIG1lcmdlX21ldGFkYXRhX2VudHJpZXMobWV0YWRhdGFfdGFibGVfcGF0aDogc3RyLCBuZXdfZW50cmllczogbGlzdCkgLT4gTm9uZToKICAgICIiIgogICAgTWVyZ2UgbmV3IGVudHJpZXMgaW50byB0aGUgRGVsdGEgbWV0YWRhdGEgdGFibGUgdXNpbmcgdGhlIE1FUkdFIElOVE8gU1FMIGNvbW1hbmQuCiAgICBJbnNlcnQgbmV3IGVudHJpZXMsIHVwZGF0ZSBleGlzdGluZyBlbnRyaWVzIG9ubHkgd2hlbiBzcGVjaWZpYyBjb2x1bW5zIGRpZmZlciwgYW5kIGRlbGV0ZSBlbnRyaWVzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0IGluIHRoZSBzb3VyY2UuCgogICAgQXJnczoKICAgIC0gbWV0YWRhdGFfdGFibGVfcGF0aCAoc3RyKTogVGhlIERlbHRhIHRhYmxlIHBhdGggaW4gdGhlIHByaW1hcnkgc3luYyBsb2NhdGlvbi4KICAgIC0gbmV3X2VudHJpZXMgKGxpc3QpOiBBIGxpc3Qgb2YgbmV3IG1ldGFkYXRhIGVudHJpZXMsIGVhY2ggY29udGFpbmluZzoKICAgICAgLSB3b3Jrc3BhY2VfbmFtZSAoc3RyKQogICAgICAtIGdyb3VwX25hbWUgKHN0cikKICAgICAgLSB3b3JrZmxvd19uYW1lIChzdHIpCiAgICAgIC0gd29ya2Zsb3dfaWQgKHN0cikKICAgICAgLSB0YWJsZXMgKGxpc3Qgb2Ygc3RyKQogICAgICAtIHZhbGlkYXRlZCAoYm9vbCkKCiAgICBSZXR1cm5zOgogICAgLSBOb25lCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIENvbnZlcnQgdGhlIG5ldyBlbnRyaWVzIGxpc3QgaW50byBhIERhdGFGcmFtZQogICAgICAgIG5ld19lbnRyaWVzX2RmID0gc3BhcmsuY3JlYXRlRGF0YUZyYW1lKG5ld19lbnRyaWVzKQoKICAgICAgICAjIFN0ZXAgMTogQ3JlYXRlIGEgdGVtcG9yYXJ5IHZpZXcgZnJvbSBuZXdfZW50cmllcwogICAgICAgIG5ld19lbnRyaWVzX2RmLmNyZWF0ZU9yUmVwbGFjZVRlbXBWaWV3KCJuZXdfbWV0YWRhdGEiKQoKICAgICAgICAjIFN0ZXAgMjogVXNlIHRoZSBNRVJHRSBJTlRPIGNvbW1hbmQgdG8gbWVyZ2UgdGhlIG5ldyBlbnRyaWVzIGludG8gdGhlIERlbHRhIHRhYmxlCiAgICAgICAgbWVyZ2Vfc3FsID0gZiIiIgogICAgICAgICAgICBNRVJHRSBJTlRPIGRlbHRhLmB7bWV0YWRhdGFfdGFibGVfcGF0aH1gIEFTIHRhcmdldAogICAgICAgICAgICBVU0lORyBuZXdfbWV0YWRhdGEgQVMgc291cmNlCiAgICAgICAgICAgIE9OIHRhcmdldC53b3Jrc3BhY2VfbmFtZSA9IHNvdXJjZS53b3Jrc3BhY2VfbmFtZQogICAgICAgICAgICBBTkQgdGFyZ2V0Lmdyb3VwX25hbWUgPSBzb3VyY2UuZ3JvdXBfbmFtZQogICAgICAgICAgICBXSEVOIE1BVENIRUQgQU5EIAogICAgICAgICAgICAgICAgKHRhcmdldC53b3JrZmxvd19uYW1lICE9IHNvdXJjZS53b3JrZmxvd19uYW1lCiAgICAgICAgICAgICAgICBPUiB0YXJnZXQudGFibGVzICE9IHNvdXJjZS50YWJsZXMKICAgICAgICAgICAgICAgIE9SIHRhcmdldC52YWxpZGF0ZWQgIT0gc291cmNlLnZhbGlkYXRlZCkgCiAgICAgICAgICAgIFRIRU4gCiAgICAgICAgICAgICAgICBVUERBVEUgU0VUIAogICAgICAgICAgICAgICAgICAgIHRhcmdldC53b3JrZmxvd19uYW1lID0gc291cmNlLndvcmtmbG93X25hbWUsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnRhYmxlcyA9IHNvdXJjZS50YWJsZXMsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnZhbGlkYXRlZCA9IHNvdXJjZS52YWxpZGF0ZWQsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lmxhc3Rfc3VjY2Vzc2Z1bF9ydW5fdGltZSA9IE5VTEwsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN5bmNfc3RhdHVzID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3luY190aW1lX3RvX3JlZ2lvbiA9IE5VTEwsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN5bmNfdGltZV9pbl9yZWdpb24gPSBOVUxMCiAgICAgICAgICAgIFdIRU4gTk9UIE1BVENIRUQgVEhFTgogICAgICAgICAgICAgICAgSU5TRVJUICgKICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dfaWQsIAogICAgICAgICAgICAgICAgICAgIHRhYmxlcywgCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVkLCAKICAgICAgICAgICAgICAgICAgICBsYXN0X3N1Y2Nlc3NmdWxfcnVuX3RpbWUsIAogICAgICAgICAgICAgICAgICAgIHN5bmNfc3RhdHVzLAogICAgICAgICAgICAgICAgICAgIHN5bmNfdGltZV90b19yZWdpb24sCiAgICAgICAgICAgICAgICAgICAgc3luY190aW1lX2luX3JlZ2lvbgogICAgICAgICAgICAgICAgKSBWQUxVRVMgKAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS53b3Jrc3BhY2VfbmFtZSwgCiAgICAgICAgICAgICAgICAgICAgc291cmNlLmdyb3VwX25hbWUsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS53b3JrZmxvd19uYW1lLCAKICAgICAgICAgICAgICAgICAgICBzb3VyY2Uud29ya2Zsb3dfaWQsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS50YWJsZXMsIAogICAgICAgICAgICAgICAgICAgIHNvdXJjZS52YWxpZGF0ZWQsIAogICAgICAgICAgICAgICAgICAgIE5VTEwsIAogICAgICAgICAgICAgICAgICAgIE5VTEwsCiAgICAgICAgICAgICAgICAgICAgTlVMTCwKICAgICAgICAgICAgICAgICAgICBOVUxMCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIFdIRU4gTk9UIE1BVENIRUQgQlkgU09VUkNFIFRIRU4KICAgICAgICAgICAgICAgIERFTEVURQogICAgICAgICIiIgoKICAgICAgICAjIFN0ZXAgMzogRXhlY3V0ZSB0aGUgbWVyZ2UgU1FMCiAgICAgICAgc3Bhcmsuc3FsKG1lcmdlX3NxbCkKCiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIk1ldGFkYXRhIHRhYmxlIG1lcmdlZCBzdWNjZXNzZnVsbHkgYXQ6IHttZXRhZGF0YV90YWJsZV9wYXRofSIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ19tZXNzYWdlKCJlcnJvciIsZiJFcnJvciBkdXJpbmcgbWV0YWRhdGEgbWVyZ2U6IHtlfSIp",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/utils",
            "language": "PYTHON",
            "md5": "c4ef5829897872bb5d23d9eb657a348e",
            "object_id": 125143969838827,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/utils",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/dr_sync_job/utils"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "dr_sync_job_validator",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpkZWYgdmFsaWRhdGVfY29uZmlnKGNvbmZpZzogZGljdCkgLT4gZGljdDoKICAgICIiIgogICAgVGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBiYXNpYyB2YWxpZGF0aW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIEpTT04uCgogICAgLSBFbnN1cmVzIHRoYXQgY3JpdGljYWwgZmllbGRzIGFyZSBub3QgZW1wdHkgYW5kIHN0b3BzIHRoZSBqb2IgaWYgdGhleSBhcmUuCiAgICAtIEVuc3VyZXMgdGhhdCBncm91cCBuYW1lcyB3aXRoaW4gZWFjaCB3b3Jrc3BhY2UgYXJlIHVuaXF1ZS4KICAgIC0gUHJvdmlkZXMgZGVmYXVsdCB2YWx1ZXMgZm9yIG9wdGlvbmFsIGZpZWxkcyBpZiB0aGV5IGFyZSBtaXNzaW5nLgogICAgLSBXYXJucyBhbmQgY29udGludWVzIGlmIG9wdGlvbmFsIGZpZWxkcyBvciBjb25kaXRpb25zIGFyZSBub3QgbWV0LgogICAgLSBSZW1vdmVzIGludmFsaWQgc3luYyBncm91cHMgZnJvbSB0aGUgY29uZmlndXJhdGlvbi4KICAgIC0gUHJpbnRzIGEgc3VtbWFyeSBpbiBhIHRhYnVsYXIgZm9ybWF0LgoKICAgIEFyZ3M6CiAgICAtIGNvbmZpZyAoZGljdCk6IFRoZSBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgbG9hZGVkIGZyb20gdGhlIEpTT04gZmlsZS4KCiAgICBSZXR1cm5zOgogICAgLSBkaWN0OiBUaGUgdmFsaWRhdGVkIGFuZCBwb3RlbnRpYWxseSBtb2RpZmllZCBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkuCiAgICAiIiIKICAgIHZhbGlkYXRlZF9jb25maWcgPSB7IndvcmtzcGFjZXMiOiBbXX0KCiAgICAjIEVuc3VyZSAnc2VjcmV0X3Njb3BlJyBpcyBwcmVzZW50CiAgICBzZWNyZXRfc2NvcGUgPSBjb25maWcuZ2V0KCJzZWNyZXRfc2NvcGUiKQogICAgaWYgbm90IHNlY3JldF9zY29wZToKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJFcnJvcjogJ3NlY3JldF9zY29wZScgaXMgbWlzc2luZy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgcmV0dXJuIHt9CiAgICAKICAgIHZhbGlkYXRlZF9jb25maWdbInNlY3JldF9zY29wZSJdID0gc2VjcmV0X3Njb3BlCiAgICAKICAgIGZvciB3b3Jrc3BhY2UgaW4gY29uZmlnWyd3b3Jrc3BhY2VzJ106CiAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIlZhbGlkYXRpbmcgd29ya3NwYWNlOiB7d29ya3NwYWNlLmdldCgnd29ya3NwYWNlX25hbWUnLCAnVW5uYW1lZCcpfSIpCgogICAgICAgICMgQ2hlY2sgY3JpdGljYWwgZmllbGRzCiAgICAgICAgaWYgbm90IHdvcmtzcGFjZS5nZXQoJ3dvcmtzcGFjZV9uYW1lJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsIkVycm9yOiBXb3Jrc3BhY2UgbmFtZSBpcyBtaXNzaW5nLiBTdG9wcGluZyBqb2IuIikKICAgICAgICAgICAgcmV0dXJuIHt9CgogICAgICAgIGlmIG5vdCB3b3Jrc3BhY2UuZ2V0KCd3b3Jrc3BhY2VfaW5zdGFuY2VfdXJsJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogV29ya3NwYWNlIGluc3RhbmNlIFVSTCBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnd29ya3NwYWNlX3BhdF9rZXknKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBXb3Jrc3BhY2UgUEFUIGtleSBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19sb2NhdGlvbl9wcmltYXJ5Jyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogcHJpbWFyeSByZWdpb24gc3luYyBsb2NhdGlvbiBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gU3RvcHBpbmcgam9iLiIpCiAgICAgICAgICAgIHJldHVybiB7fQoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19sb2NhdGlvbl9zZWNvbmRhcnknKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBzZWNvbmRhcnkgcmVnaW9uIHN5bmMgbG9jYXRpb24gaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFN0b3BwaW5nIGpvYi4iKQogICAgICAgICAgICByZXR1cm4ge30KCiAgICAgICAgIyBIYW5kbGUgb3B0aW9uYWwgZmllbGRzIHdpdGggZGVmYXVsdHMKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19kZWZhdWx0X3NjaGVkdWxlJyk6CiAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJXYXJuaW5nOiBTeW5jIGRlZmF1bHQgc2NoZWR1bGUgaXMgbWlzc2luZyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFVzaW5nIGRlZmF1bHQgc2NoZWR1bGU6IGV2ZXJ5IDEyIGhvdXJzLiIpCiAgICAgICAgICAgIHdvcmtzcGFjZVsnc3luY19kZWZhdWx0X3NjaGVkdWxlJ10gPSAiMCAqLzEyICogKiAqIgoKICAgICAgICBpZiBub3Qgd29ya3NwYWNlLmdldCgnc3luY19tYXhfcmV0cmllcycpOgogICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBtYXggcmV0cmllcyBpcyBtaXNzaW5nIGZvciB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4gVXNpbmcgZGVmYXVsdCBtYXggcmV0cmllczogMy4iKQogICAgICAgICAgICB3b3Jrc3BhY2VbJ3N5bmNfbWF4X3JldHJpZXMnXSA9ICIzIgoKICAgICAgICAjIFZhbGlkYXRlIGdyb3VwIG5hbWVzIGZvciB1bmlxdWVuZXNzCiAgICAgICAgZ3JvdXBfbmFtZXMgPSBbZ3JvdXAuZ2V0KCdncm91cF9uYW1lJykgZm9yIGdyb3VwIGluIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXSBpZiBncm91cC5nZXQoJ2dyb3VwX25hbWUnKV0KICAgICAgICBpZiBsZW4oZ3JvdXBfbmFtZXMpICE9IGxlbihzZXQoZ3JvdXBfbmFtZXMpKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBHcm91cCBuYW1lcyBtdXN0IGJlIHVuaXF1ZSB3aXRoaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIFN0b3BwaW5nIGpvYi4iKQogICAgICAgICAgICByZXR1cm4ge30KCiAgICAgICAgIyBWYWxpZGF0ZSBlYWNoIHN5bmMgZ3JvdXAKICAgICAgICB2YWxpZGF0ZWRfZ3JvdXBzID0gW10KICAgICAgICBmb3IgZ3JvdXAgaW4gd29ya3NwYWNlWydzeW5jX2dyb3VwcyddOgogICAgICAgICAgICBncm91cF9uYW1lID0gZ3JvdXAuZ2V0KCdncm91cF9uYW1lJywgJ1VubmFtZWQnKQoKICAgICAgICAgICAgaWYgbm90IGdyb3VwX25hbWU6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBncm91cCBuYW1lIGlzIG5vdCBkZWZpbmVkIGluIHdvcmtzcGFjZSAne3dvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXX0nLiBDb250aW51aW5nIHdpdGggdGhpcyBncm91cC4iKQoKICAgICAgICAgICAgIyBFeGNlcHRpb24gZm9yICdzY2hlZHVsZWRfc3luYycgZ3JvdXA6IFNraXAgd29ya2Zsb3cgdmFsaWRhdGlvbgogICAgICAgICAgICBpZiBncm91cF9uYW1lICE9ICdzY2hlZHVsZWRfc3luYycgYW5kIG5vdCBncm91cC5nZXQoJ3dvcmtmbG93Jyk6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119JyBkb2VzIG5vdCBoYXZlIGEgd29ya2Zsb3cgZGVmaW5lZC4iKQoKICAgICAgICAgICAgaWYgbm90IGdyb3VwLmdldCgndGFibGVzJyk6CiAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiV2FybmluZzogU3luYyBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119JyBkb2VzIG5vdCBoYXZlIGFueSB0YWJsZXMgZGVmaW5lZC4iKQoKICAgICAgICAgICAgaWYgZ3JvdXBfbmFtZSBhbmQgKGdyb3VwLmdldCgnd29ya2Zsb3cnKSBvciBncm91cC5nZXQoJ3RhYmxlcycpIG9yIGdyb3VwX25hbWUgPT0gJ3NjaGVkdWxlZF9zeW5jJyk6CiAgICAgICAgICAgICAgICB2YWxpZGF0ZWRfZ3JvdXBzLmFwcGVuZChncm91cCkKCiAgICAgICAgd29ya3NwYWNlWydzeW5jX2dyb3VwcyddID0gdmFsaWRhdGVkX2dyb3VwcwogICAgICAgIHZhbGlkYXRlZF9jb25maWdbJ3dvcmtzcGFjZXMnXS5hcHBlbmQod29ya3NwYWNlKQoKICAgICMgUHJpbnQgYSBzdW1tYXJ5IG9mIHRoZSB2YWxpZGF0aW9uCiAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJcblZhbGlkYXRpb24gU3VtbWFyeToiKQogICAgbG9nX21lc3NhZ2UoImRlYnVnIixmInsnV29ya3NwYWNlIE5hbWUnOjwyNX0geydHcm91cHMgVmFsaWRhdGVkJzo8MjB9IHsnRGVmYXVsdCBTY2hlZHVsZSc6PDIwfSB7J01heCBSZXRyaWVzJzo8MTB9IikKICAgIGZvciB3b3Jrc3BhY2UgaW4gdmFsaWRhdGVkX2NvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgIG51bV9ncm91cHMgPSBsZW4od29ya3NwYWNlWydzeW5jX2dyb3VwcyddKQogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJ7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddOjwyNX0ge251bV9ncm91cHM6PDIwfSB7d29ya3NwYWNlWydzeW5jX2RlZmF1bHRfc2NoZWR1bGUnXTo8MjB9IHt3b3Jrc3BhY2VbJ3N5bmNfbWF4X3JldHJpZXMnXTo8MTB9IikKCiAgICByZXR1cm4gdmFsaWRhdGVkX2NvbmZpZwoKZGVmIHZhbGlkYXRlX3dvcmtmbG93X2FuZF90YWJsZXMoY29uZmlnOiBkaWN0LCBzeW5jX2xvY2F0aW9uX3RvOiBzdHIgPSAicHJpbWFyeSIpIC0+IGJvb2w6CiAgICAiIiIKICAgIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgZGV0YWlsZWQgdmFsaWRhdGlvbiBvZiB3b3JrZmxvd3MgYW5kIHRhYmxlcyB3aXRoaW4gZWFjaCB3b3Jrc3BhY2UuCgogICAgLSBWYWxpZGF0ZXMgYWNjZXNzIHRvIGV4dGVybmFsIHN0b3JhZ2UgbG9jYXRpb25zLgogICAgLSBFbnN1cmVzIHRoZSBleGlzdGVuY2UgYW5kIGFjY2Vzc2liaWxpdHkgb2YgbWV0YWRhdGEgdGFibGVzIGF0IHNwZWNpZmljIHN1YnBhdGhzIGluIHRoZSBzdG9yYWdlIGxvY2F0aW9ucy4KICAgIC0gVmFsaWRhdGVzIHdvcmtmbG93cyBhbmQgdGFibGVzIHRoYXQgaGF2ZW4ndCBiZWVuIHZhbGlkYXRlZCB5ZXQsIGFjY29yZGluZyB0byBhIHByZS1leGlzdGluZyBtZXRhZGF0YSB0YWJsZS4KICAgIC0gQ29sbGVjdHMgdmFsaWRhdGlvbiByZXN1bHRzIGFuZCBtZXJnZXMgdGhlbSBpbnRvIHRoZSBtZXRhZGF0YSB0YWJsZSBpbiBvbmUgc2hvdC4KICAgIC0gTG9ncyBpc3N1ZXMgYW5kIGNvbnRpbnVlcyB2YWxpZGF0aW9uIGZvciBvdGhlciBncm91cHMgZXZlbiBpZiBzb21lIGZhaWwuCgogICAgQXJnczoKICAgIC0gY29uZmlnIChkaWN0KTogVGhlIGNvbmZpZ3VyYXRpb24gZGljdGlvbmFyeSBsb2FkZWQgZnJvbSB0aGUgSlNPTiBmaWxlLgogICAgLSBzeW5jX2xvY2F0aW9uX3RvIChzdHIpOiBFaXRoZXIgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIHRvIHNwZWNpZnkgd2hpY2ggc3luYyBsb2NhdGlvbiB0byB2YWxpZGF0ZS4KCiAgICBSZXR1cm5zOgogICAgLSBib29sOiBUcnVlIGlmIGFsbCB3b3JrZmxvd3MgYW5kIHRhYmxlcyBhcmUgdmFsaWQsIEZhbHNlIG90aGVyd2lzZS4KICAgICIiIgogICAgYWxsX3ZhbGlkID0gVHJ1ZQogICAgbmV3X21ldGFkYXRhX2VudHJpZXMgPSBbXSAgIyBDb2xsZWN0IG5ldyBvciB1cGRhdGVkIG1ldGFkYXRhIGVudHJpZXMKCiAgICAjIERldGVybWluZSB3aGV0aGVyIHRvIHVzZSBwcmltYXJ5IG9yIHNlY29uZGFyeSBsb2NhdGlvbgogICAgaWYgc3luY19sb2NhdGlvbl90byBub3QgaW4gWyJwcmltYXJ5IiwgInNlY29uZGFyeSJdOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN5bmNfbG9jYXRpb25fdG8gbXVzdCBiZSBlaXRoZXIgJ3ByaW1hcnknIG9yICdzZWNvbmRhcnknIikKCiAgICBmb3Igd29ya3NwYWNlIGluIGNvbmZpZ1snd29ya3NwYWNlcyddOgogICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJWYWxpZGF0aW5nIHdvcmtzcGFjZToge3dvcmtzcGFjZS5nZXQoJ3dvcmtzcGFjZV9uYW1lJywgJ1VubmFtZWQnKX0iKQoKICAgICAgICAjIERldGVybWluZSBzeW5jIGxvY2F0aW9uIGJhc2VkIG9uIHBhcmFtZXRlcgogICAgICAgIHN5bmNfbG9jYXRpb24gPSB3b3Jrc3BhY2UuZ2V0KGYic3luY19sb2NhdGlvbl97c3luY19sb2NhdGlvbl90b30iKQogICAgICAgIG1ldGFfcGF0aCA9IGYie3N5bmNfbG9jYXRpb259L21ldGEiCgogICAgICAgICMgQ2hlY2sgYWNjZXNzIHRvIHRoZSBzeW5jIGxvY2F0aW9uCiAgICAgICAgaWYgbm90IGNoZWNrX2ZzX3BhdGgobWV0YV9wYXRoKToKICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBObyBhY2Nlc3MgdG8gJ21ldGEnIHBhdGggYXQge3N5bmNfbG9jYXRpb25fdG99IHN5bmMgbG9jYXRpb24gJ3ttZXRhX3BhdGh9JyBmb3Igd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIikKICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyBMb2FkIG1ldGFkYXRhIGZyb20gdGhlIHNwZWNpZmllZCBsb2NhdGlvbgogICAgICAgIG1ldGFkYXRhX3RhYmxlX3BhdGggPSBmInttZXRhX3BhdGh9L3N5bmNfbWV0YWRhdGFfdGFibGUiCiAgICAgICAgbWV0YWRhdGFfdGFibGUgPSBsb2FkX21ldGFkYXRhX3RhYmxlKG1ldGFkYXRhX3RhYmxlX3BhdGgpCgogICAgICAgIGZvciBncm91cCBpbiB3b3Jrc3BhY2VbJ3N5bmNfZ3JvdXBzJ106CiAgICAgICAgICAgIGdyb3VwX25hbWUgPSBncm91cC5nZXQoJ2dyb3VwX25hbWUnLCAnVW5uYW1lZCcpCgogICAgICAgICAgICAjIENoZWNrIGlmIHRoaXMgZ3JvdXAgaXMgYWxyZWFkeSB2YWxpZGF0ZWQgaW4gdGhlIG1ldGFkYXRhIHRhYmxlCiAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnkgPSBtZXRhZGF0YV90YWJsZS5nZXQoKHdvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXSwgZ3JvdXBfbmFtZSksIE5vbmUpCgogICAgICAgICAgICAjIEhhbmRsZSBwb3RlbnRpYWwgZGVsZXRpb25zIGFuZCBjaGFuZ2VzIGluIGNvbmZpZ3VyYXRpb24KICAgICAgICAgICAgaWYgdmFsaWRhdGlvbl9lbnRyeToKICAgICAgICAgICAgICAgICMgSWYgdGhlIGdyb3VwIGhhcyBiZWVuIGRlbGV0ZWQgZnJvbSB0aGUgY29uZmlndXJhdGlvbiwgc2tpcCBhZGRpbmcgaXQgdG8gdGhlIG5ldyBlbnRyaWVzCiAgICAgICAgICAgICAgICBpZiBub3QgYW55KGdbJ2dyb3VwX25hbWUnXSA9PSBncm91cF9uYW1lIGZvciBnIGluIHdvcmtzcGFjZVsnc3luY19ncm91cHMnXSk6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkluZm86IFN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgbm8gbG9uZ2VyIGV4aXN0cyBpbiBjb25maWd1cmF0aW9uLiBSZW1vdmluZyBmcm9tIG1ldGFkYXRhIHRhYmxlLiIpCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAjIENoZWNrIGZvciBjaGFuZ2VzIGluIHdvcmtmbG93IG9yIHRhYmxlcwogICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25fZW50cnlbJ3dvcmtmbG93X25hbWUnXSAhPSBncm91cC5nZXQoJ3dvcmtmbG93JykpIG9yICh2YWxpZGF0aW9uX2VudHJ5Wyd0YWJsZXMnXSAhPSBncm91cC5nZXQoJ3RhYmxlcycpKToKICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiSW5mbzogRGV0ZWN0ZWQgY2hhbmdlcyBpbiBzeW5jIGdyb3VwICd7Z3JvdXBfbmFtZX0nIGNvbmZpZ3VyYXRpb24uIFJldmFsaWRhdGluZy4iKQogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25fZW50cnlbJ3ZhbGlkYXRlZCddID0gRmFsc2UgICMgTWFyayBhcyBub3QgdmFsaWRhdGVkIGZvciByZXZhbGlkYXRpb24KCiAgICAgICAgICAgIGlmIHZhbGlkYXRpb25fZW50cnkgYW5kIHZhbGlkYXRpb25fZW50cnlbJ3ZhbGlkYXRlZCddOgogICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkluZm86IFN5bmMgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScgaXMgYWxyZWFkeSB2YWxpZGF0ZWQuIFNraXBwaW5nIHZhbGlkYXRpb24uIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIFZhbGlkYXRlIHdvcmtmbG93IGV4aXN0ZW5jZQogICAgICAgICAgICBpZiBncm91cC5nZXQoJ3dvcmtmbG93Jyk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIyBGZXRjaCB0aGUgam9iIGluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIG1ldGhvZCwgcmV0cmlldmUgUEFUIHRva2VuIGFuZCBzY29wZSBmcm9tIGNvbmZpZwogICAgICAgICAgICAgICAgICAgIGpvYl9pbmZvID0gZ2V0X2RhdGFicmlja3Nfam9ic19pbmZvKAogICAgICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9pbnN0YW5jZV91cmwnXSwgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5nZXQoJ3NlY3JldF9zY29wZScpLCAgIyBQYXNzIHRoZSBzZWNyZXQgc2NvcGUgZnJvbSBjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlWyd3b3Jrc3BhY2VfcGF0X2tleSddLCAKICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwWyd3b3JrZmxvdyddXQogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGpvYl9pbmZvOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiRXJyb3I6IFdvcmtmbG93ICd7Z3JvdXBbJ3dvcmtmbG93J119JyBkb2VzIG5vdCBleGlzdCBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfScuIikKICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19pZCA9IGpvYl9pbmZvLmdldChncm91cFsnd29ya2Zsb3cnXSwgTm9uZSkKICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3Jrc3BhY2VfbmFtZSc6IHdvcmtzcGFjZVsnd29ya3NwYWNlX25hbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdncm91cF9uYW1lJzogZ3JvdXBfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3JrZmxvd19uYW1lJzogZ3JvdXAuZ2V0KCd3b3JrZmxvdycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dvcmtmbG93X2lkJzogd29ya2Zsb3dfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFibGVzJzogZ3JvdXAuZ2V0KCd0YWJsZXMnLCBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsaWRhdGVkJzogRmFsc2UgICMgTWFyayBhcyBub3QgdmFsaWRhdGVkIHVudGlsIHJlLXZhbGlkYXRpb24gaXMgZG9uZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgbG9nX21lc3NhZ2UoImRlYnVnIixmIkVycm9yOiBDb3VsZCBub3QgdmFsaWRhdGUgd29ya2Zsb3cgJ3tncm91cFsnd29ya2Zsb3cnXX0nIGZvciBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jzoge2V9IikKICAgICAgICAgICAgICAgICAgICBhbGxfdmFsaWQgPSBGYWxzZQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIFZhbGlkYXRlIHRhYmxlcyBleGlzdGVuY2UgYW5kIHJlYWQgcGVybWlzc2lvbnMKICAgICAgICAgICAgZm9yIHRhYmxlIGluIGdyb3VwWyd0YWJsZXMnXToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBpZiBub3QgY2hlY2tfdGFibGUodGFibGUpOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLGYiRXJyb3I6IENhbm5vdCBhY2Nlc3MgdGFibGUgJ3t0YWJsZX0nIGZvciBncm91cCAne2dyb3VwX25hbWV9JyBpbiB3b3Jrc3BhY2UgJ3t3b3Jrc3BhY2VbJ3dvcmtzcGFjZV9uYW1lJ119Jy4iKQogICAgICAgICAgICAgICAgICAgICAgICBhbGxfdmFsaWQgPSBGYWxzZQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgIGxvZ19tZXNzYWdlKCJkZWJ1ZyIsZiJFcnJvcjogQ291bGQgbm90IHZhbGlkYXRlIHRhYmxlICd7dGFibGV9JyBmb3IgZ3JvdXAgJ3tncm91cF9uYW1lfScgaW4gd29ya3NwYWNlICd7d29ya3NwYWNlWyd3b3Jrc3BhY2VfbmFtZSddfSc6IHtlfSIpCiAgICAgICAgICAgICAgICAgICAgYWxsX3ZhbGlkID0gRmFsc2UKCiAgICAgICAgICAgICMgSWYgdmFsaWRhdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgdXBkYXRlIHRoZSBtZXRhZGF0YSBlbnRyeSBhcyB2YWxpZGF0ZWQKICAgICAgICAgICAgaWYgYWxsX3ZhbGlkOgogICAgICAgICAgICAgICAgdmFsaWRhdGlvbl9lbnRyeVsndmFsaWRhdGVkJ10gPSBUcnVlCiAgICAgICAgICAgICAgICBuZXdfbWV0YWRhdGFfZW50cmllcy5hcHBlbmQodmFsaWRhdGlvbl9lbnRyeSkKCiAgICAjIE9uY2UgYWxsIHZhbGlkYXRpb25zIGFyZSBkb25lLCBtZXJnZSBuZXcgZW50cmllcyBpbnRvIHRoZSBtZXRhZGF0YSB0YWJsZSwgb25seSBpZiBuZXcgZW50cmllcyB3ZXJlIGZvdW5kCiAgICBpZiBuZXdfbWV0YWRhdGFfZW50cmllczoKICAgICAgICBtZXJnZV9tZXRhZGF0YV9lbnRyaWVzKG1ldGFkYXRhX3RhYmxlX3BhdGgsIG5ld19tZXRhZGF0YV9lbnRyaWVzKQogICAgZWxzZToKICAgICAgICBsb2dfbWVzc2FnZSgiZGVidWciLCJObyBuZXcgbWV0YWRhdGEgZW50cmllcyBmb3VuZC4gU2tpcHBpbmcgbWV0YWRhdGEgbWVyZ2UuIikKCiAgICByZXR1cm4gYWxsX3ZhbGlkCg==",
            "format": "SOURCE",
            "id": "/Workspace/dr_sync_job/validator",
            "language": "PYTHON",
            "md5": "8d9abd33b54ae66adc178516dcc3a168",
            "object_id": 125143969838810,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/dr_sync_job/validator",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/dr_sync_job/validator"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "file_checker",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQojIERlZmluZSB0aGUgc291cmNlIGRpcmVjdG9yeSBwYXRoCnN0b3JhZ2VhY2NuYW1lID0gZGJ1dGlscy53aWRnZXRzLmdldCgic3RvcmFnZWFjY25hbWUiKQoKc291cmNlX2RpcmVjdG9yeSA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9L2RhdGEvaW5nZXN0aW9uLyIgICMgUmVwbGFjZSB3aXRoIHlvdXIgYWN0dWFsIFMzIHBhdGgKCiMgQ2hlY2sgaWYgYW55IGZpbGVzIGV4aXN0IGluIHRoZSBzb3VyY2UgZGlyZWN0b3J5CmZpbGVzID0gZGJ1dGlscy5mcy5scyhzb3VyY2VfZGlyZWN0b3J5KQoKIyBTZXQgdGhlIHRhc2sgc3RhdHVzIGJhc2VkIG9uIHRoZSBwcmVzZW5jZSBvZiBmaWxlcwppZiBmaWxlczoKICAgIGRidXRpbHMuam9icy50YXNrVmFsdWVzLnNldCgiZmlsZV9jaGVja19zdGF0dXMiLCAidHJ1ZSIpCiAgICBwcmludCgiRmlsZXMgZm91bmQsIHNldHRpbmcgc3RhdHVzIHRvIEZJTEVTX0ZPVU5ELiIpCmVsc2U6CiAgICBkYnV0aWxzLmpvYnMudGFza1ZhbHVlcy5zZXQoImZpbGVfY2hlY2tfc3RhdHVzIiwgImZhbHNlIikKICAgIHByaW50KCJObyBmaWxlcyBmb3VuZCwgc2V0dGluZyBzdGF0dXMgdG8gTk9fRklMRVNfRk9VTkQuIikK",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/file_checker",
            "language": "PYTHON",
            "md5": "d2ba79c4c37b56e3198e111a119f85cc",
            "object_id": 125143969838806,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/file_checker",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/file_checker"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "generate_raw_data",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "aW1wb3J0IHJhbmRvbQppbXBvcnQgc3RyaW5nCgojIEdlbmVyYXRlIHJhbmRvbSBkYXRhCmRhdGEgPSBbKGksICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX2xldHRlcnMgKyBzdHJpbmcuZGlnaXRzLCBrPTEwKSksIHJhbmRvbS5yYW5kaW50KDEsIDEwMCkpIGZvciBpIGluIHJhbmdlKDEwMCldCgojIENyZWF0ZSBEYXRhRnJhbWUKZGYgPSBzcGFyay5jcmVhdGVEYXRhRnJhbWUoZGF0YSwgWyJpZCIsICJuYW1lIiwgInZhbHVlIl0pCgojIFdyaXRlIHRvIHJhdyB0YWJsZQpkZi53cml0ZS5tb2RlKCJvdmVyd3JpdGUiKS5zYXZlQXNUYWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy5yYXdfZGF0YSIpCg==",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/GenerateRawData",
            "language": "PYTHON",
            "md5": "c43c3d3278728a282f1697e530090ed4",
            "object_id": 326876806154381,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/GenerateRawData",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/GenerateRawData"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "gold",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIGRlbHRhLnRhYmxlcyBpbXBvcnQgRGVsdGFUYWJsZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgZXhwciwgY3VycmVudF90aW1lc3RhbXAsIGNvbCwgbGl0CgojIERlZmluZSBwYXRocyBhbmQgZGF0YWJhc2UKc3RvcmFnZWFjY25hbWUgPSBkYnV0aWxzLndpZGdldHMuZ2V0KCJzdG9yYWdlYWNjbmFtZSIpCmdvbGRfdGFibGVfcGF0aCA9IGYiYWJmc3M6Ly9leHRlcm5hbEB7c3RvcmFnZWFjY25hbWV9L2RhdGEvbWFpbi93b3JrZmxvd18xX2dvbGQiICAKZGF0YWJhc2VfbmFtZSA9ICJkcl90ZXN0X2NhdGFsb2cubWFpbiIgCnRhYmxlX25hbWUgPSAid29ya2Zsb3dfMV9nb2xkIiAgCgojIENyZWF0ZSBvciByZXBsYWNlIHRoZSBHb2xkIHRhYmxlIGFzIGFuIGV4dGVybmFsIERlbHRhIHRhYmxlIGFuZCByZWdpc3RlciBpdCBpbiBVbml0eSBDYXRhbG9nCnNwYXJrLnNxbChmIiIiCiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB7ZGF0YWJhc2VfbmFtZX0ue3RhYmxlX25hbWV9ICgKICAgICAgICBmaWxlX25hbWUgU1RSSU5HLAogICAgICAgIHBhcnNlZF9kYXRhIFNUUklORywKICAgICAgICBwYXJzZWRfdGltZSBUSU1FU1RBTVAsCiAgICAgICAgd29ya3NwYWNlX25hbWUgU1RSSU5HLAogICAgICAgIG1lcmdlX2NvdW50ZXIgQklHSU5ULAogICAgICAgIG1lcmdlX3RpbWUgVElNRVNUQU1QCiAgICApCiAgICBVU0lORyBERUxUQQogICAgTE9DQVRJT04gJ3tnb2xkX3RhYmxlX3BhdGh9JwoiIiIpCgojIExvYWQgdGhlIFNpbHZlciB0YWJsZSBkYXRhCnNpbHZlcl9kZiA9IHNwYXJrLnJlYWQudGFibGUoImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIpCgojIENhbGN1bGF0ZSB0aGUgY3VycmVudCBtYXggdmFsdWUgb2YgbWVyZ2VfY291bnRlciBmcm9tIHRoZSBHb2xkIHRhYmxlCm1heF9jb3VudGVyID0gc3Bhcmsuc3FsKGYiU0VMRUNUIENPQUxFU0NFKE1BWChtZXJnZV9jb3VudGVyKSwgMCkgQVMgbWF4X2NvdW50ZXIgRlJPTSB7ZGF0YWJhc2VfbmFtZX0ue3RhYmxlX25hbWV9IikuY29sbGVjdCgpWzBdWydtYXhfY291bnRlciddCgojIEFkZCBhIG5ldyBtZXJnZSBjb3VudGVyIHN0YXJ0aW5nIGZyb20gdGhlIGN1cnJlbnQgbWF4IGNvdW50ZXIKc2lsdmVyX2RmID0gc2lsdmVyX2RmLndpdGhDb2x1bW4oIm1lcmdlX2NvdW50ZXIiLCBleHByKGYie21heF9jb3VudGVyfSArIG1vbm90b25pY2FsbHlfaW5jcmVhc2luZ19pZCgpICsgMSIpKQpzaWx2ZXJfZGYgPSBzaWx2ZXJfZGYud2l0aENvbHVtbigibWVyZ2VfdGltZSIsIGN1cnJlbnRfdGltZXN0YW1wKCkpCgojIE1lcmdlIHRoZSBTaWx2ZXIgZGF0YSBpbnRvIHRoZSBHb2xkIHRhYmxlCmdvbGRfdGFibGUgPSBEZWx0YVRhYmxlLmZvclBhdGgoc3BhcmssIGdvbGRfdGFibGVfcGF0aCkKCmdvbGRfdGFibGUuYWxpYXMoInRndCIpLm1lcmdlKAogICAgc2lsdmVyX2RmLmFsaWFzKCJzcmMiKSwKICAgICJ0Z3QuZmlsZV9uYW1lID0gc3JjLmZpbGVfbmFtZSIKKS53aGVuTWF0Y2hlZFVwZGF0ZUFsbCgKKS53aGVuTm90TWF0Y2hlZEluc2VydEFsbCgKKS5leGVjdXRlKCkKCiMgVmVyaWZ5IHRoZSBjcmVhdGlvbiBhbmQgbWVyZ2luZwpzcGFyay5zcWwoZiJTRUxFQ1QgKiBGUk9NIHtkYXRhYmFzZV9uYW1lfS57dGFibGVfbmFtZX0iKS5zaG93KCkK",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/gold",
            "language": "PYTHON",
            "md5": "c09256fd942ff6b292c0cc20adbadbcf",
            "object_id": 125143969838799,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/gold",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/gold"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "silver",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBEYXRhYnJpY2tzIG5vdGVib29rIHNvdXJjZQpmcm9tIHB5c3Bhcmsuc3FsLmZ1bmN0aW9ucyBpbXBvcnQgZnJvbV91bml4dGltZSwgY29sCmZyb20gcHlzcGFyay5zcWwudHlwZXMgaW1wb3J0IFN0cnVjdFR5cGUsIFN0cnVjdEZpZWxkLCBTdHJpbmdUeXBlCgojIFJlYWQgZGF0YSBmcm9tIHRoZSBicm9uemUgdGFibGUKYnJvbnplX2RmID0gc3BhcmsucmVhZC50YWJsZSgiZHJfdGVzdF9jYXRhbG9nLnJhdy53b3JrZmxvd18xX2Jyb256ZSIpCgojIERlZmluZSB0aGUgc2NoZW1hIGZvciB0aGUgcGFyc2VkIGRhdGEKc2NoZW1hID0gU3RydWN0VHlwZShbCiAgICBTdHJ1Y3RGaWVsZCgicGFyc2VkX2RhdGEiLCBTdHJpbmdUeXBlKCksIFRydWUpCl0pCgojIFBhcnNlIHRoZSBiaW5hcnkgY29udGVudApzaWx2ZXJfZGYgPSAoYnJvbnplX2RmLndpdGhDb2x1bW4oInBhcnNlZF9kYXRhIiwgYnJvbnplX2RmWyJjb250ZW50Il0uY2FzdCgic3RyaW5nIikpICAjIENhc3QgY29udGVudCB0byBzdHJpbmcgYXMgYW4gZXhhbXBsZSBvZiBwYXJzaW5nCiAgICAgICAgICAgICAud2l0aENvbHVtbigicGFyc2VkX3RpbWUiLCBmcm9tX3VuaXh0aW1lKGNvbCgiZmlsZV9tb2RpZmllZF90aW1lIikuY2FzdCgibG9uZyIpKSkgICMgQ29udmVydCBmaWxlX21vZGlmaWVkX3RpbWUgdG8gaHVtYW4tcmVhZGFibGUgdGltZQogICAgICAgICAgICAgLnNlbGVjdCgiZmlsZV9uYW1lIiwgInBhcnNlZF9kYXRhIiwgInBhcnNlZF90aW1lIiwgIndvcmtzcGFjZV9uYW1lIikpCgojIFNhdmUgdGhlIHBhcnNlZCBkYXRhIHRvIGEgU2lsdmVyIHRhYmxlCnNpbHZlcl9kZi53cml0ZS5mb3JtYXQoImRlbHRhIikubW9kZSgib3ZlcndyaXRlIikuc2F2ZUFzVGFibGUoImRyX3Rlc3RfY2F0YWxvZy5zdGFnZS53b3JrZmxvd18xX3NpbHZlciIpCgojIHNsZWVwIGZvciAyIG1pbnMKaW1wb3J0IHRpbWUKdGltZS5zbGVlcCgxMjApCgoKIyBDT01NQU5EIC0tLS0tLS0tLS0KCiMgTUFHSUMgJXNxbAojIE1BR0lDIHNlbGVjdCAqIGZyb20gZHJfdGVzdF9jYXRhbG9nLnN0YWdlLndvcmtmbG93XzFfc2lsdmVy",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_1/silver",
            "language": "PYTHON",
            "md5": "b74c10f50acec53fafdc92911bac2dbf",
            "object_id": 125143969838811,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_1/silver",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_1/silver"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_notebook",
      "name": "transform_to_silver",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "IyBSZWFkIGZyb20gcmF3IHRhYmxlCmRmX3JhdyA9IHNwYXJrLnRhYmxlKCJkcl90ZXN0X2NhdGFsb2cucmF3LnJhd19kYXRhIikKCiMgVHJhbnNmb3JtYXRpb24gKGUuZy4sIGZpbHRlciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDUwKQpkZl9zaWx2ZXIgPSBkZl9yYXcuZmlsdGVyKGRmX3Jhdy52YWx1ZSA+IDUwKQoKIyBXcml0ZSB0byBzaWx2ZXIgdGFibGUKZGZfc2lsdmVyLndyaXRlLm1vZGUoIm92ZXJ3cml0ZSIpLnNhdmVBc1RhYmxlKCJkcl90ZXN0X2NhdGFsb2cuc3RhZ2Uuc2lsdmVyX2RhdGEiKQo=",
            "format": "SOURCE",
            "id": "/Workspace/sample_workflow_2/TransformToSilver",
            "language": "PYTHON",
            "md5": "274511d439cdc454657a34f49a3602b1",
            "object_id": 326876806154377,
            "object_type": "NOTEBOOK",
            "path": "/Workspace/sample_workflow_2/TransformToSilver",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/sample_workflow_2/TransformToSilver"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for gold data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.main",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "main",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "raw",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for raw data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.raw",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "raw",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_schema",
      "name": "stage",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "catalog_name": "dr_test_catalog",
            "comment": "Schema for silver data",
            "enable_predictive_optimization": "INHERIT",
            "force_destroy": false,
            "id": "dr_test_catalog.stage",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "stage",
            "owner": "mohit.singh@databricks.com",
            "properties": null,
            "storage_root": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "azurerm_storage_account.dr_test_eastus2_storage",
            "azurerm_storage_container.dr_test_eastus2_external",
            "databricks_catalog.dr_test_catalog",
            "databricks_external_location.dr_eastus2_external_location",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment",
            "databricks_storage_credential.dr_eastus2_storage_credential"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_storage_credential",
      "name": "dr_eastus2_storage_credential",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "aws_iam_role": [],
            "azure_managed_identity": [
              {
                "access_connector_id": "/subscriptions/edd4cc45-85c7-4aec-8bf5-648062d519bf/resourceGroups/dr_test_eastus2/providers/Microsoft.Databricks/accessConnectors/dr_test_eastus2_connector",
                "credential_id": "5eec7d43-e23b-447b-b792-b99e7b5b17e7",
                "managed_identity_id": ""
              }
            ],
            "azure_service_principal": [],
            "comment": "Managed identity for storage access",
            "databricks_gcp_service_account": [],
            "force_destroy": null,
            "force_update": null,
            "gcp_service_account_key": [],
            "id": "dr_eastus2_storage_credential",
            "isolation_mode": "ISOLATION_MODE_OPEN",
            "metastore_id": "0bc5fc84-d3b7-44d0-89f3-a5bf3aa1ab3f",
            "name": "dr_eastus2_storage_credential",
            "owner": "mohit.singh@databricks.com",
            "read_only": false,
            "skip_validation": null,
            "storage_credential_id": "2884470d-f239-42b2-95d6-cc5aa096790f"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_databricks_access_connector.dr_test_eastus2_connector",
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2",
            "databricks_metastore.dr_eastus2_metastore",
            "databricks_metastore_assignment.dr_eastus2_metastore_assignment"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "databricks_workspace_file",
      "name": "dr_sync_job_config",
      "provider": "provider[\"registry.terraform.io/databricks/databricks\"].workspace",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "content_base64": "eyAic2VjcmV0X3Njb3BlIiA6ICJkci10ZXN0LXNjb3BlIiwKICAid29ya3NwYWNlcyI6IFsKICAgIHsKICAgICAgIndvcmtzcGFjZV9uYW1lIjogImUyLWRlbW8tZmllbGQtZW5nIiwKICAgICAgIndvcmtzcGFjZV9pbnN0YW5jZV91cmwiOiAiaHR0cHM6Ly9lMi1kZW1vLWZpZWxkLWVuZy5jbG91ZC5kYXRhYnJpY2tzLmNvbSIsCiAgICAgICJ3b3Jrc3BhY2VfcGF0X2tleSIgOiAiZHItcGF0LXRva2VuIiwgCiAgICAgICJzeW5jX2xvY2F0aW9uX3ByaW1hcnkiOiAiczM6Ly9vbmUtZW52LXVjLWV4dGVybmFsLWxvY2F0aW9uL21vaGl0L2Vhc3Qvc3luYy9tZXRhL3ByaW1hcnlfc3luYyIsCiAgICAgICJzeW5jX2xvY2F0aW9uX3NlY29uZGFyeSI6ICJzMzovL29uZS1lbnYtdWMtZXh0ZXJuYWwtbG9jYXRpb24vbW9oaXQvY2VudHJhbC9zeW5jL21ldGEvc2Vjb25kYXJ5X3N5bmMiLAogICAgICAic3luY19mYWlsdXJlX25vdGlmaWNhdGlvbiI6ICJtb2hpdC5zaW5naEBkYXRhYnJpY2tzLmNvbSIsCiAgICAgICJzeW5jX3N1Y2Nlc3Nfbm90aWZpY2F0aW9uIjogIm1vaGl0LnNpbmdoQGRhdGFicmlja3MuY29tIiwKICAgICAgInN5bmNfZGVmYXVsdF9zY2hlZHVsZSI6ICIwICovMTIgKiAqICoiLAogICAgICAic3luY19tYXhfcmV0cmllcyI6ICIzIiwKICAgICAgInN5bmNfZ3JvdXBzIjogWwogICAgICAgIHsKICAgICAgICAgICJncm91cF9uYW1lIjogInNhbXBsZV93b3JrZmxvdyIsCiAgICAgICAgICAiZ3JvdXBfb3duZXJfZW1haWwiOiAibW9oaXQuc2luZ2hAZGF0YWJyaWNrcy5jb20iLAogICAgICAgICAgIndvcmtmbG93IjogInNhbXBsZV93b3JrZmxvd18xIiwKICAgICAgICAgICJ0YWJsZXMiOiBbImh1bWFuYS5yYXcud29ya2Zsb3dfMV9icm9uemUiLCJodW1hbmEuc3RhZ2Uud29ya2Zsb3dfMV9zaWx2ZXIiLCJodW1hbmEubWFpbi53b3JrZmxvd18xX2dvbGQiXQogICAgICAgIH0KICAgICAgXQogICAgfQogIF0KfQ==",
            "id": "/Workspace/dr_sync_job/config/config_dev.json",
            "md5": "30cec5ceec362407fbd49c1e202ad7e8",
            "object_id": 125143969838805,
            "path": "/Workspace/dr_sync_job/config/config_dev.json",
            "source": null,
            "url": "https://adb-3942378291930718.18.azuredatabricks.net/#workspace/Workspace/dr_sync_job/config/config_dev.json",
            "workspace_path": "/Workspace/Workspace/dr_sync_job/config/config_dev.json"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "azurerm_databricks_workspace.dr_test_eastus2_databricks",
            "azurerm_resource_group.dr_test_eastus2"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
